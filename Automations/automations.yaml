- id: '1716745835793'
  alias: Toon videodeurbel op tablet
  description: Toont de videodeurbel op de browser_mod tablet wanneer de deurbel wordt
    ingedrukt.
  triggers:
  - entity_id:
    - binary_sensor.voordeurbel_deurbel
    to: 'on'
    trigger: state
  actions:
  - action: switch.turn_on
    target:
      entity_id:
      - switch.galaxy_tab_a7_lite_scherm
      - switch.lenovo_tab_m10_3rd_gen_scherm
    data: {}
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.woonkamer_wallpanel_screensaver
      - input_boolean.werkkamer_helmer_wallpanel_screensaver
  - metadata: {}
    data:
      dismissable: true
      autoclose: true
      title: Deurbelcamera
      content:
        show_state: false
        show_name: false
        camera_view: live
        type: picture-entity
        entity: camera.g4_doorbell_pro_high_resolution_channel
        name: Voordeur
      timeout: 90000
      size: fullscreen
      browser_id:
      - browser_mod_834f8c52_8fcc5c8e0
    target:
      entity_id: media_player.dashwoonkamer
    action: browser_mod.popup
- id: '1638644515973'
  alias: Zonsondergang - Lampen AAN
  description: Verlichting woonkamer en Achtertuin aan
  triggers:
  - event: sunset
    offset: -0:15:00
    trigger: sun
  - trigger: numeric_state
    entity_id:
    - sensor.woonkamer_mmwave_plafond_keuken_illuminance
    below: 20
  conditions:
  - condition: time
    after: '14:00:00'
    before: '23:00:00'
  actions:
  - target:
      entity_id: scene.woonkamer_standaard_standaard
    metadata: {}
    action: scene.turn_on
    data: {}
  - action: scene.turn_on
    metadata: {}
    target:
      entity_id: scene.keuken_koffiecorner_sfeer_tv_kijken_of_zon_onder
    data: {}
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      label_id: zonsondergang_aan
  - action: light.turn_on
    metadata: {}
    data: {}
    target:
      label_id:
      - naam_kerstverlichting_zonsondergang
  mode: single
- id: '1639257226029'
  alias: Dashboard Woonkamer - Screensaver UIT
  description: ''
  triggers:
  - trigger: time
    at: input_datetime.dashboard_woonkamer_time_screen_on
  conditions: []
  actions:
  - data: {}
    target:
      entity_id:
      - switch.lenovo_tab_m10_3rd_gen_scherm
      - switch.galaxy_tab_a7_lite_scherm
    enabled: true
    action: switch.turn_on
  - data: {}
    enabled: true
    action: switch.turn_off
    target:
      entity_id:
      - switch.lenovo_tab_m10_3rd_gen_screensaver
      - switch.galaxy_tab_a7_lite_screensaver
  mode: single
- id: '1639257270445'
  alias: Dashboard Woonkamer - Screensaver AAN
  description: ''
  triggers:
  - trigger: time
    at: input_datetime.dashboard_woonkamer_time_screen_off
  conditions: []
  actions:
  - data: {}
    enabled: true
    action: switch.turn_off
    target:
      entity_id:
      - switch.lenovo_tab_m10_3rd_gen_scherm
      - switch.galaxy_tab_a7_lite_scherm
  mode: single
- id: '7426848686945'
  alias: homeassistant_start
  trigger:
  - platform: homeassistant
    event: start
  action:
  - service: frontend.reload_themes
    data: {}
  - delay:
      seconds: 10
  - service: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.brievenbus_post_arrived
    enabled: false
  initial_state: true
- id: '1641919653196'
  alias: Wake Up Light v2 (Weekdagen)
  description: ''
  trigger:
  - platform: time
    at: input_datetime.wakeup_time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.wakeup_weekend
      state: 'off'
    - condition: time
      after: input_datetime.wakeup_time
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: state
      entity_id: input_boolean.wakeup_enabled
      state: 'on'
  action:
  - service: light.turn_on
    data:
      brightness_pct: 5
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - service: light.turn_on
    data:
      transition: 600
      brightness_pct: 75
  mode: restart
  max: 10
- id: '1642264891399'
  alias: Wake Up Light v2 (Weekend)
  description: ''
  trigger:
  - platform: time
    at: input_datetime.wakeup_time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.wakeup_weekend
      state: 'on'
    - condition: time
      after: input_datetime.wakeup_time
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
      - sat
      - sun
    - condition: state
      entity_id: input_boolean.wakeup_enabled
      state: 'on'
  action:
  - service: light.turn_on
    data:
      brightness_pct: 5
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - service: light.turn_on
    data:
      transition: 600
      brightness_pct: 75
  mode: restart
  max: 10
- id: '1654160640509'
  alias: Updates - Update Home Assistant Core (Notify Helmer)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - update.home_assistant_core_update
    to: 'on'
  condition: []
  action:
  - service: notify.all_helmer
    data:
      message: 'Installed: {{ state_attr("update.home_assistant_core_update", "installed_version")
        }} Available: {{ state_attr("update.home_assistant_core_update", "latest_version")
        }}'
      title: HA Update
      data:
        push:
          category: default
          sound:
            name: default
            critical: 0
            volume: 0.3
          thread-id: updates
  mode: single
- id: '1668433584005'
  alias: Zonsopkomst - Verlichting TUIN UIT
  description: Verlichting woonkamer en Achtertuin aan
  triggers:
  - event: sunrise
    offset: 00:15:00
    trigger: sun
  conditions: []
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      label_id: tuinverlichting_uit_s_nachts
  - action: light.turn_off
    metadata: {}
    target:
      label_id: zonsopkomst_uit
    data: {}
  mode: single
- id: '1672682335774'
  alias: Vaatwasser v1 - Notificatie UITgeschakeld
  description: Track het moment dat de vaatwasmachine notificatie (handmatig) wordt
    uitgeschakeld  na een voltooide wasbeurt.
  trigger:
  - platform: state
    entity_id:
    - input_boolean.vaatwasser_v1_ready
    to: 'off'
  - platform: state
    entity_id:
    - input_select.status_vaatwasser
    to: completed
    for:
      hours: 0
      minutes: 23
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.keuken_afwasmachine_deur
    to: 'on'
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: Waiting to start
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_vaatwasser
      state: running
    - condition: state
      entity_id: input_select.status_vaatwasser
      state: completed
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.vaatwasser_v1_last_emptied
  - service: input_select.select_option
    data:
      option: idle
    target:
      entity_id: input_select.status_vaatwasser
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.vaatwasser_v1_ready
  - service: script.vaatwasser_notification_scheduler_v25
    data: {}
  mode: single
- id: '1674147454172'
  alias: Sonos - Play Favorite (Werkkamer)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.sonos_favorites_list
  condition: []
  action:
  - service: media_player.select_source
    data:
      source: '{{ states(''input_select.sonos_favorites_list'') }}'
    target:
      entity_id: media_player.werkkamer_helmer_sonos
  mode: single
- id: '1674423480612'
  alias: Zonsondergang - Woonkamer - Natuurlijk Licht
  description: Schema volgens de ‘Natuurlijk Licht’ scene in de HUE App.
  trigger:
  - platform: sun
    event: sunset
    offset: '2:00:00'
    id: Ontspannen
  - platform: sun
    event: sunset
    offset: '3:00:00'
    id: Rusten
  - platform: sun
    event: sunset
    offset: -0:15:00
    id: Zonsondergang
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: Ontspannen
      sequence:
      - service: hue.activate_scene
        data:
          transition: 300
        target:
          entity_id: scene.woonkamer_standaard_ontspannen
    - conditions:
      - condition: trigger
        id: Rusten
      sequence:
      - service: hue.activate_scene
        data:
          transition: 300
        target:
          entity_id: scene.woonkamer_standaard_rusten
    - conditions:
      - condition: trigger
        id: Zonsondergang
      sequence:
      - service: hue.activate_scene
        data: {}
        target:
          entity_id: scene.woonkamer_standaard_lezen
      - service: hue.activate_scene
        data: {}
        target:
          entity_id: scene.voordeur_standaard
  mode: single
- id: '1674426358327'
  alias: NFC - Station van Helmer gescanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 06eb797c-ddc7-4b22-87c5-e30fcf9c9a01
  condition: []
  action:
  - service: notify.all_helmer
    data:
      message: Music
      title: Station van Helmer wordt afgespeeld in de Woonkamer
  - service: media_player.select_source
    data:
      source: Station van Helmer
    target:
      entity_id: media_player.woonkamer_sonos
  mode: single
- id: '1674641324333'
  alias: Apple Focus - Helmer - Focus UIT
  description: Als de Focus mode op de iPhone van Helmer wordt uigeschakeld, schakel
    de input_boolean ook uit.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.just_a_phone_max_focus
    to: 'off'
  condition: []
  action:
  - service: input_select.select_option
    data:
      option: Uit
    target:
      entity_id: input_select.focus_status_iphone_helmer
  mode: single
- id: '1674641358802'
  alias: Apple Focus - Helmer - Focus UIT
  description: Als de Focus mode op de iPhone van Helmer wordt uigeschakeld, schakel
    de input_boolean ook uit.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.just_a_phone_max_focus
    to: 'off'
  condition: []
  action:
  - service: input_select.select_option
    data:
      option: Uit
    target:
      entity_id: input_select.focus_status_iphone_helmer
  - if:
    - condition: state
      entity_id: input_boolean.voice_response
      state: 'on'
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.voice_response_werkkamer_helmer
  mode: single
- id: '1674684597722'
  alias: Run Level - Someone is at Home
  description: As soon as someone comes home -> Set Run Level -> Thuis
  trigger:
  - platform: state
    entity_id:
    - zone.home
    id: HomeComing
  - platform: state
    entity_id:
    - input_select.focus_status_iphone_helmer
    id: HelmerFocus
  - platform: state
    entity_id:
    - person.helmer_zandbergen
    id: HelmerChange
  - platform: state
    entity_id:
    - person.regina_zandbergen
    id: ReginaChange
  condition:
  - condition: numeric_state
    entity_id: zone.home
    above: 0
  - condition: state
    entity_id: input_select.focus_status_iphone_helmer
    state: Uit
    for:
      hours: 0
      minutes: 0
      seconds: 0
  action:
  - service: input_select.select_option
    data:
      option: Thuis
    target:
      entity_id: input_select.status_house_runlevel
  mode: single
- id: '1674684672501'
  alias: Run Level - Slapen
  description: As soon as someone as everybody goes to sleep -> Set Run Level -> Slapen
  trigger:
  - platform: state
    entity_id:
    - input_select.focus_status_iphone_helmer
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_select.focus_status_iphone_helmer
      state: Slaap
  action:
  - service: input_select.select_option
    data:
      option: Slapen
    target:
      entity_id: input_select.status_house_runlevel
  mode: single
- id: '1674769290547'
  alias: Tag Blauwe Tag is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: c1bed934-fa87-41fa-b44a-f93f47e15b95
  condition: []
  action:
  - service: notify.all_helmer
    data:
      message: Blauwe Tag gescanned!
      title: NFC
  mode: single
- id: '1674769505233'
  alias: Tag 54-8A-E5-03 is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 54-8A-E5-03
  condition: []
  action:
  - service: notify.iphone_helmer
    data:
      message: Witte tag gescanned
  mode: single
- id: '1675000816855'
  alias: Run level - Afwezig
  description: As soon as nobody is home -> Set Run Level -> Afwezig
  trigger:
  - platform: state
    entity_id:
    - zone.home
    id: HomeComing
  - platform: state
    entity_id:
    - input_select.focus_status_iphone_helmer
    id: HelmerFocus
  - platform: state
    entity_id:
    - person.helmer_zandbergen
    id: HelmerChange
  - platform: state
    entity_id:
    - person.regina_zandbergen
    id: ReginaChange
  condition:
  - condition: numeric_state
    entity_id: zone.home
    below: 1
  action:
  - service: input_select.select_option
    data:
      option: Afwezig
    target:
      entity_id: input_select.status_house_runlevel
  mode: single
- id: '1675018833645'
  alias: Slaapkamer - Remote Helmer
  description: ''
  use_blueprint:
    path: Malte/zha-ikea-four-button-remote-styrbar-for-lights-e2001-e2002.yaml
    input:
      remote: c43648203711f969ff400666fe419733
      button_left_short:
      - service: light.turn_on
        data:
          brightness_pct: 1
        target:
          entity_id: light.slaapkamer_bedlamp_helmer
      button_left_long: []
      button_right_short:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.slaapkamer_bedlamp_helmer
      button_right_long: []
      light:
        entity_id: light.slaapkamer_wled_bed_helmer
      force_brightness: true
      brightness: 10
- id: '1675109800734'
  alias: Water - Tel Bad Sessie
  description: Meer dan x liter water verbruikt, dus het bad is gevuld.
  trigger:
  - platform: state
    entity_id:
    - input_number.water_verbruik_douche_bad_sessie
  condition:
  - condition: numeric_state
    entity_id: input_number.water_verbruik_douche_bad_sessie
    above: 100
  action:
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.water_bad_aantal_sessies_week
  mode: single
- id: '1675347165286'
  alias: Slaapkamer - Beweging Bed Helmer s nachts - WLED Helmer 10% (1 minuut)
  description: Als Helmer 's nachts uit bed stapt, dan 1 minuut LED strip aan.
  trigger:
  - type: motion
    platform: device
    device_id: d3645e62909e96bbfc43c6ab1c6166cb
    entity_id: 6f61582adb8ec5bd26645d326a10da7f
    domain: binary_sensor
  condition:
  - condition: time
    after: 00:01:00
    before: 07:30:00
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - mon
    - tue
  action:
  - service: script.slaapkamer_beweging_activeer_wled_helmer_10_voor_60_seconden
    data: {}
  mode: single
- id: '1675425788751'
  alias: Apple Focus - Helmer - Presentatie Modus
  description: Turn on lights to Presentation Mode
  triggers:
  - entity_id:
    - input_select.focus_status_iphone_helmer
    to: Presenting-Meeting
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: zone
      entity_id: person.helmer_zandbergen
      zone: zone.home
    - condition: zone
      entity_id: person.helmer_zandbergen
      zone: zone.landgoed_de_woldberg
  actions:
  - metadata: {}
    action: scene.turn_on
    data: {}
    target:
      entity_id: scene.werkkamer_helmer_concentreren
  mode: single
- id: '1676282812716'
  alias: Werkkamer - Schakel Verlichting AAN/UIT v0.1
  description: Actie om de verlichting in de Werkkamer Helmer te schakelen (door middel
    van iOS Action).
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Werkh_licht_toggle
      actionName: Werkh_licht_toggle
    id: schakel_alle_lampen_standaard
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: werkh_licht_xbox
      actionName: werkh_licht_xbox
    id: schakel_xbox_scene
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: schakel_alle_lampen_standaard
      sequence:
      - data: {}
        action: light.toggle
        target:
          entity_id: light.ruimte_werkkamer_helmer
    - conditions:
      - condition: trigger
        id: schakel_xbox_scene
      sequence:
      - data: {}
        target:
          entity_id: scene.werkkamer_helmer_gamen
        action: hue.activate_scene
  mode: single
- id: '1676315030582'
  alias: Werkkamer - Schakel Verlichting d.m.v. iOS Actions v2
  description: Actie om de verlichting in de Werkkamer Helmer te schakelen (door middel
    van iOS Action).
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Werkh_licht_toggle
      actionName: Werkh_licht_toggle
    id: schakel_alle_lampen_standaard
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: werkh_licht_xbox
      actionName: werkh_licht_xbox
    id: schakel_xbox_scene
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: schakel_alle_lampen_standaard
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.ruimte_werkkamer_helmer
            state: 'on'
          sequence:
          - data: {}
            action: light.turn_off
            target:
              entity_id: light.ruimte_werkkamer_helmer
        - conditions:
          - condition: state
            entity_id: light.ruimte_werkkamer_helmer
            state: 'off'
          sequence:
          - data: {}
            action: hue.activate_scene
            target:
              entity_id: scene.werkkamer_helmer_helder
    - conditions:
      - condition: trigger
        id: schakel_xbox_scene
      sequence:
      - data: {}
        action: hue.activate_scene
        target:
          entity_id: scene.werkkamer_helmer_gamen
  mode: single
- id: '1676315584566'
  alias: Woonkamer - Schakel Verlichting d.m.v. iOS Actions
  description: Actie om de verlichting in de Woonkamer te schakelen (door middel van
    iOS Action).
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Woonk_licht_toggle
      actionName: Woonk_licht_toggle
    id: schakel_alle_lampen_standaard
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: woonk_licht_movie_night
      actionName: woonk_licht_movie_night
    id: schakel_movie_night
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: schakel_alle_lampen_standaard
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.zone_woonkamer_standaard
            state: 'on'
          sequence:
          - data: {}
            target:
              entity_id: light.zone_woonkamer_standaard
            action: light.turn_off
        - conditions:
          - condition: state
            entity_id: light.zone_woonkamer_standaard
            state: 'off'
          sequence:
          - data: {}
            target:
              entity_id: scene.woonkamer_standaard_standaard
            action: hue.activate_scene
    - conditions:
      - condition: trigger
        id: schakel_movie_night
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
  mode: single
- id: '1676399288643'
  alias: Slaapkamer - Remote Regina
  description: ''
  use_blueprint:
    path: Malte/zha-ikea-four-button-remote-styrbar-for-lights-e2001-e2002.yaml
    input:
      remote: aafadc3958ca41e7fa6118b8b15ff4d1
      button_left_short: []
      button_left_long: []
      button_right_short: []
      button_right_long: []
      force_brightness: true
      brightness: 10
      light:
        entity_id: light.slaapkamer_wled_bed_regina
- id: '1676480994191'
  alias: Laadpaal - Notificatie als Laadpaal beschikbaar komt.
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.count_available_charging_poles
    from: '0'
  condition:
  - condition: state
    entity_id: input_boolean.notificatie_laadpaal_beschikbaar
    state: 'on'
  action:
  - service: script.notificatie_iphone_v7
    data:
      action_phone_action_enabled: none
      ruimte: Werkkamer Helmer
      notify_phone: iphone_helmer
      persoon: helmer
      notify_location: away
      message_phone_body: Er is nu een laadpaal beschikbaar aan de Kerkweg in Giethoorn.
      message_phone_title: Laadpaal beschikbaar
      message_phone_tag: laadpaal_beschikbaar
      message_phone_group: laadpaal
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.notificatie_laadpaal_beschikbaar
  mode: single
- id: '1677231332342'
  alias: Notificatie - Low battery level detection & notification for all battery
    sensors
  description: Melding indien er batterij gevoede devices zijn die bijna  leeg zijn.
  use_blueprint:
    path: gmlupatelli/low_battery_notification.yaml
    input:
      time: '19:00:00'
      exclude:
        entity_id:
        - sensor.greatscott14_battery_level
        - sensor.just_a_phone_se_battery_level
        - sensor.just_a_phone_max_battery_level
        - sensor.cutting_board_pro_battery_level
        - sensor.i4_edrive40_remaining_battery_percent
      actions:
      - service: script.notificatie_iphone_v2
        data:
          notify_phone: iphone_helmer
          message_phone_body: 'De volgende batterijen zijn bijna leeg: {{sensors}}'
          message_phone_title: Batterijen
          message_phone_tag: batterij_leeg
          message_phone_group: batterij_leeg
      sunday_enabled: true
      monday_enabled: true
      wednesday_enabled: true
      friday_enabled: true
      saturday_enabled: true
      threshold: 20
- id: '1677233203289'
  alias: 'Notificatie - Agenda afspraak HUIS 2.0 '
  description: Geef een melding als we een afspraak hebben met [HUIS 2.0] in het onderwerp.
  trigger:
  - platform: calendar
    event: start
    offset: '-1:0:0'
    entity_id: calendar.familie_zandbergen_m365_helmer
  condition:
  - condition: template
    value_template: '{{ ''[HUIS 2.0]'' in state_attr(''calendar.familie_zandbergen_m365_helmer'',
      ''message'')}}'
  action:
  - service: script.notificatie_iphone_v2
    data:
      notify_phone: iphone_helmer
      message_phone_body: '{{as_timestamp(state_attr(''calendar.familie_zandbergen_m365_helmer'',
        ''start_time'')) | timestamp_custom(''%H:%M'')}} - {{as_timestamp(state_attr(''calendar.familie_zandbergen_m365_helmer'',
        ''end_time'')) | timestamp_custom(''%H:%M'')}} {{state_attr(''calendar.familie_zandbergen_m365_helmer'',
        ''message'')}} (Locatie: {{state_attr(''calendar.familie_zandbergen_m365_helmer'',
        ''location'')}})'
      message_phone_title: Agenda
      message_phone_tag: agenda_afspraak
      message_phone_group: agenda_afspraak
      message_tts_priority: false
  mode: single
- id: '1677272804134'
  alias: iOS - Event Fired - ios Focus iPhone Helmer
  description: Actions om de iPhone Focus te bepalen
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: ios_focus_slapen
      actionName: ios_focus_slapen
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: focus_slapen
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: ios_focus_uit
      actionName: ios_focus_uit
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: focus_uit
  - platform: state
    entity_id:
    - binary_sensor.just_a_phone_max_focus
    to: 'off'
    id: focus_uit
  - platform: state
    entity_id:
    - binary_sensor.just_a_phone_max_focus
    to: 'off'
    id: focus_uit
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: ios_focus_gaming
      actionName: ios_focus_gaming
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: focus_gaming
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: ios_focus_presenting_meeting
      actionName: ios_focus_presenting_meeting
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: focus_presenting
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: ios_focus_persoonlijk
      actionName: ios_focus_persoonlijk
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: focus_persoonlijk
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: focus_slapen
      sequence:
      - data:
          option: Slaap
        target:
          entity_id: input_select.focus_status_iphone_helmer
        action: input_select.select_option
    - conditions:
      - condition: trigger
        id: focus_presenting
      sequence:
      - data:
          option: Presenting-Meeting
        target:
          entity_id: input_select.focus_status_iphone_helmer
        action: input_select.select_option
    - conditions:
      - condition: trigger
        id: focus_uit
      sequence:
      - data:
          option: Uit
        target:
          entity_id: input_select.focus_status_iphone_helmer
        action: input_select.select_option
    - conditions:
      - condition: and
        conditions:
        - condition: trigger
          id: focus_gaming
        - condition: state
          entity_id: light.ruimte_werkkamer_helmer
          state: 'on'
      sequence:
      - data:
          option: Gaming
        target:
          entity_id: input_select.focus_status_iphone_helmer
        action: input_select.select_option
      - data: {}
        target:
          entity_id: scene.werkkamer_helmer_gamen
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id: focus_persoonlijk
      sequence:
      - data:
          option: Persoonlijk
        target:
          entity_id: input_select.focus_status_iphone_helmer
        action: input_select.select_option
  mode: single
- id: '1677960364443'
  alias: Zonsondergang - Woonkamer - Natuurlijk Licht v2
  description: Schema volgens de ‘Natuurlijk Licht’ scene in de HUE App.
  triggers:
  - event: sunset
    offset: -0:15:00
    id: Zonsondergang
    trigger: sun
  conditions: []
  actions:
  - data: {}
    target:
      entity_id: scene.woonkamer_standaard_standaard
    enabled: false
    action: hue.activate_scene
  - data: {}
    action: light.turn_on
    target:
      entity_id:
      - light.zone_alle_wandlampen
  mode: single
- id: '1679392228618'
  alias: Woonkamer - Apple TV start Afspelen - Movie Night AAN? v2.1
  description: Als de AppleTV gaat afspelen, Movie Night AAN? Dan lampen dimmen (als
    ze aan staan).
  triggers:
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: ATV-PLAY-long
    enabled: false
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-STOPPLAY
    from: playing
    trigger: state
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-on
    to: 'on'
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-off
    to: 'off'
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.wbd.hbomax
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.amazon.aiv.AIVApp
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.skyshowtime.skyshowtime
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.firecore.infuse
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
    enabled: false
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'on'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: ATV-PLAY-short
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - ATV-STOPPLAY
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-on
      - condition: state
        entity_id: media_player.woonkamer_appletv
        state: playing
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-off
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
  mode: single
- id: '1679392359042'
  alias: Woonkamer - Enable or Trigger Movie Night v2
  description: 'iOS Event Fired: Movie Night / Activate HUE Scene: Woonkamer - Movie
    Night'
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Movie_Night
      actionName: Movie Night
    id: ios_event_movie_night
  - platform: event
    event_type: call_service
    event_data:
      domain: scene
      service: turn_on
      service_data:
        entity_id: scene.woonkamer_standaard_movie_night
    id: scene_turned_on
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: scene_turned_on
      sequence:
      - data: {}
        target:
          entity_id: input_boolean.movie_night
        action: input_boolean.toggle
    - conditions:
      - condition: trigger
        id: ios_event_movie_night
      sequence:
      - data: {}
        target:
          entity_id: input_boolean.movie_night
        action: input_boolean.toggle
  mode: single
- id: '1681896527415'
  alias: Afvalcontainer aan de weg
  description: Notificatie als de afvalcontainer aan de weg moet.
  triggers:
  - at: input_datetime.tijdstip_melding_afval_container_morgen
    trigger: time
    enabled: true
  - at: input_datetime.tijdstip_melding_afval_container_vandaag
    trigger: time
    enabled: false
  conditions:
  - condition: template
    value_template: '{{ state_attr(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'',''over_aantal_dagen'')
      == 1 }}'
  actions:
  - action: input_button.press
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_button.notificatie_afvalcontainer_aan_de_weg
  mode: single
- id: '1684142882457'
  alias: Template - Audio Notification v3.5
  description: Template with all notifications combined.
  trigger:
  - platform: webhook
    webhook_id: -7D8SmIGry7U-hjtjg4y4yfgjfgj
    allowed_methods:
    - POST
    - PUT
    local_only: true
  condition: []
  action:
  - parallel:
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.werkkamer_helmer_sonos
        ruimte: werkkamer_helmer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De wasmachine zal nu wel klaar zijn en ik moet eerlijk zeggen
          dat dit best goed werkt al zeg ik het zelf. De Sonos Speaker kan dus gewoon
          op de achtergrond blijven doorspelen en je hebt niet meer van die stomme
          time-outs.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
    - service: script.notificatie_iphone_v2
      data:
        media_player_entity: media_player.woonkamer_sonos
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_volume: 0.1
        message_tts_body: Testbericht.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
      enabled: false
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: woonkamer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De Sonos Speaker kan dus gewoon op de achtergrond blijven
          doorspelen en je hebt niet meer van die stomme time-outs.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
  mode: single
- id: '1685202350529'
  alias: Jukebox v3.0 (Sonos)
  description: Added choice en pauze
  trigger:
  - platform: event
    event_type: tag_scanned
  condition:
  - condition: template
    value_template: '{{ trigger.event.data.tag_id in tags }}'
    enabled: true
  - condition: template
    value_template: '{{ trigger.event.data.device_id in media_players }}'
    enabled: true
  action:
  - variables:
      media_player_entity_id: '{{ media_players[trigger.event.data.device_id] }}'
      media_source: '{{ tags[trigger.event.data.tag_id].source }}'
      media_action: '{{ tags[trigger.event.data.tag_id].media_action }}'
      media_content_type: '{{ tags[trigger.event.data.tag_id].media_content_type }}'
    enabled: true
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ tags[trigger.event.data.tag_id].media_action  == ''sonos''
          }}'
      sequence:
      - service: notify.iphone_helmer
        data:
          title: Jukebox
          message: SONOS
        enabled: false
      - service: media_player.select_source
        data:
          source: '{{ tags[trigger.event.data.tag_id].source }}'
        target:
          entity_id: '{{ media_player_entity_id }}'
      - service: input_text.set_value
        data:
          value: '{{ tags[trigger.event.data.tag_id].source }}'
        target:
          entity_id: input_text.woonkamer_jukebox_playing
    - conditions:
      - condition: template
        value_template: '{{ tags[trigger.event.data.tag_id].media_action  == ''spotify''
          }}'
      sequence:
      - service: notify.iphone_helmer
        data:
          title: Jukebox
          message: SONOS
        enabled: false
      - service: media_player.play_media
        target:
          entity_id: '{{ media_player_entity_id }}'
        data:
          media_content_id: '{{ tags[trigger.event.data.tag_id].source }}'
          media_content_type: '{{ tags[trigger.event.data.tag_id].media_content_type
            }}'
      - service: input_text.set_value
        data:
          value: '{{ tags[trigger.event.data.tag_id].source }}'
        target:
          entity_id: input_text.woonkamer_jukebox_playing
    - conditions:
      - condition: template
        value_template: '{{ media_action == ''pause'' }}'
      sequence:
      - service: notify.iphone_helmer
        data:
          message: PAUSE
          title: Jukebox
        enabled: false
      - service: media_player.media_pause
        data: {}
        target:
          entity_id: '{{ media_player_entity_id }}'
  - service: notify.iphone_helmer
    data:
      title: Jukebox
      message: '"{{ tags[trigger.event.data.tag_id].source }}"

        '
    enabled: false
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  mode: single
  max_exceeded: silent
  variables:
    media_players:
      93921ebe4926c90c3d257a9327620cd1: media_player.werkkamer_helmer_sonos
      fe913be0456a246c64328c7a38bf670d: media_player.werkkamer_helmer_sonos
    tags:
      53-F1-1E-FD-70-00-01:
        media_action: pause
        source: pause
        media_content_type: playlist
      339242d9-85ff-42e1-9260-c4e83e994945:
        media_action: pause
        source: pause
        media_content_type: playlist
      F5-74-2E-04:
        media_action: sonos
        source: Populair Jaren 90
        media_content_type: playlist
      15-01-2E-04:
        media_action: sonos
        source: Station van Helmer
        media_content_type: playlist
      53-35-24-FD-70-00-01:
        media_action: sonos
        source: Populair Jaren 80
        media_content_type: playlist
      41-8A-F8-0C:
        media_action: sonos
        source: Travelling the World (Live at Caupolican, Santiago, Chile May 5, 2012)
        media_content_type: playlist
      25-12-2E-04:
        media_action: sonos
        source: The Miracle (Collector's Edition)
        media_content_type: album
      3d3c5524-84a8-4594-9987-ca220199ce3d:
        media_action: sonos
        source: The Miracle (Collector's Edition)
        media_content_type: album
      95-08-2E-04:
        media_action: sonos
        source: TRUSTFALL
        media_content_type: album
      f01b1eef-41d4-4e6d-9baf-f5696b10faf3:
        media_action: sonos
        source: TRUSTFALL
        media_content_type: album
      F5-F3-2D-04:
        media_action: sonos
        source: Nederlandse Top 40
        media_content_type: playlist
      35-7C-2E-04:
        media_action: sonos
        source: Station van Regina
        media_content_type: playlist
      53-BD-2E-FD-70-00-01:
        media_action: sonos
        source: P!nk Radio
        media_content_type: playlist
      53-79-29-FD-70-00-01:
        media_action: sonos
        source: 538 Hitzone
        media_content_type: playlist
      53-AA-19-FD-70-00-01:
        media_action: sonos
        source: Qmusic
        media_content_type: playlist
      15-6D-2E-04:
        media_action: sonos
        source: Favorietenmix Regina
        media_content_type: playlist
- id: '1685276892126'
  alias: Notificatie test v5
  description: Template with all notifications combined.
  trigger:
  - platform: webhook
    webhook_id: -7D8SmIGry7U-hjtjg4y4yfgjfgj
    allowed_methods:
    - POST
    - PUT
    local_only: true
  condition: []
  action:
  - parallel:
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.werkkamer_helmer_sonos
        ruimte: werkkamer_helmer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
    - service: script.notificatie_iphone_v2
      data:
        media_player_entity: media_player.woonkamer_sonos
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_volume: 0.1
        message_tts_body: Testbericht.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: woonkamer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: true
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.keuken_sonos
        ruimte: keuken
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
  mode: single
- id: '1685279730510'
  alias: Voice - ALL Response Aan-Uit
  description: Schakelt Voice Response in alle ruimte aan of uit.
  trigger:
  - platform: state
    entity_id:
    - input_boolean.voice_response
    to: 'off'
    id: voice_uit
  - platform: state
    entity_id:
    - input_boolean.voice_response
    to: 'on'
    id: voice_aan
  - platform: time
    at: input_datetime.voice_response_begin
    id: voice_aan
  - platform: time
    at: input_datetime.voice_response_end
    id: voice_uit
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: voice_uit
      sequence:
      - parallel:
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_badkamer
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_slaapkamer
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_keuken
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_woonkamer
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_werkkamer_helmer
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.voice_response_werkkamer_regina
    - conditions:
      - condition: trigger
        id: voice_aan
      sequence:
      - parallel:
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_badkamer
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_slaapkamer
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_keuken
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_woonkamer
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_werkkamer_helmer
        - service: input_boolean.turn_on
          data: {}
          target:
            entity_id: input_boolean.voice_response_werkkamer_regina
  mode: restart
- id: '1685316965791'
  alias: Template - Clear iOS Notification
  description: Template with a clear notification for iOS
  trigger:
  - platform: webhook
    webhook_id: -7D8SmIGry7U-hjtjg4y4yfgjfgj
    allowed_methods:
    - POST
    - PUT
    local_only: true
  condition: []
  action:
  - parallel:
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.werkkamer_helmer_sonos
        ruimte: werkkamer_helmer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
    - service: script.notificatie_clear_iphone_v2
      data:
        media_player_entity: media_player.woonkamer_sonos
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_volume: 0.1
        message_tts_body: Testbericht.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: kraan_open
        message_phone_group: kraan_open
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: woonkamer
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: true
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.keuken_sonos
        ruimte: keuken
        notify_phone: iphone_helmer
        notify_tv: lg_c4_woonkamer
        message_tts_body: De audio notificatie staat aan.
        message_tv_body: Testbericht op LG 4
        message_phone_body: Testbericht.
        message_phone_title: Test
        message_phone_tag: Test
        message_phone_group: Test
        message_tts_timeout_hours: 0
        message_tts_timeout_minutes: 0
        message_tts_timeout_seconds: 2
        message_tts_timeout_milliseconds: 0
        message_tts_priority: false
  mode: single
- id: '1685977410413'
  alias: Wasdroger v2 - 02 - STOP PROGRAMMA
  description: Track de start en eindtijd van een droogbeurt en hou de totale tijd
    bij. Aan het einde van de drogbeurt stuur een notificatie.
  triggers:
  - entity_id:
    - sensor.bijkeuken_wasdroger_status
    to: program_ended
    trigger: state
  conditions:
  - condition: state
    entity_id: input_select.status_wasdroger_v2
    state: running
    enabled: false
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now() }}'
    target:
      entity_id: input_datetime.wasdroger_v2_stopped
    action: input_datetime.set_datetime
  - data:
      value: '{{ (as_timestamp(states(''input_datetime.wasdroger_v2_stopped'')) -
        as_timestamp(states(''input_datetime.wasdroger_v2_started''))) | float(0)
        }}'
    target:
      entity_id: input_number.wasdroger_v2_expected_runtime
    enabled: false
    action: input_number.set_value
  - data:
      option: completed
    target:
      entity_id: input_select.status_wasdroger_v2
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.wasdroger_v2_ready
    action: input_boolean.turn_on
  - data: {}
    action: script.wasdroger_notification_scheduler_v25
    enabled: false
  - data: {}
    target:
      entity_id: counter.wasdroger_v2_aantal_droogbeurten
    action: counter.increment
  mode: single
- id: '1685977427334'
  alias: Wasdroger v2 - 03 - LEEGGEHAALD
  description: Track het moment dat de wasdrogerdeur wordt opgemaakt na een voltooide
    droogbeurt.
  triggers:
  - entity_id:
    - sensor.bijkeuken_wasdroger_status
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 0
    trigger: state
  - entity_id:
    - binary_sensor.bijkeuken_wasdroger_deur
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.wasdroger_v2_last_emptied
    action: input_datetime.set_datetime
  - data:
      option: idle
    target:
      entity_id: input_select.status_wasdroger_v2
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.wasdroger_v2_ready
    action: input_boolean.turn_off
  - data:
      notify_phone:
      - iPhone Helmer
      - iPhone Regina
      message_phone_tag: wasdroger_klaar
    action: script.notificatie_clear_iphone_v3
  mode: single
- id: '1685977653735'
  alias: 'Notification : Water - Expensive day'
  description: ''
  trigger:
  - platform: template
    value_template: '  {{ ((states.sensor.waterverbruik_vandaag.state|float) > ((states.sensor.waterverbruik_deze_maand.state|float)
      / now().day)) }} '
  condition:
  - condition: template
    value_template: '{{ state_attr(this.entity_id, ''last_triggered'').date() < now().date()
      }}'
  - condition: template
    value_template: '{{ now().day > 1 }}'
  action:
  - service: notify.iphone_helmer
    data:
      message: 'Let op : Dure dag vandaag, al {{ states(''sensor.waterverbruik_vandaag'')
        }} liter water verbruikt.'
  mode: single
- id: '1685977665692'
  alias: 'Notification : Stroom - Expensive day'
  description: ''
  trigger:
  - platform: template
    value_template: '  {{ ((states.sensor.stroomverbruik_vandaag.state|float) > ((states.sensor.stroomverbruik_deze_maand.state|float)
      / now().day)) }} '
  condition:
  - condition: template
    value_template: '{{ state_attr(this.entity_id, ''last_triggered'').date() < now().date()
      }}'
  - condition: template
    value_template: '{{ now().day > 1 }}'
  action:
  - service: notify.iphone_helmer
    data:
      message: 'Let op : Dure dag vandaag, al {{ states(''sensor.stroomverbruik_vandaag'')
        }} kWh aan stroom verbruikt.'
  mode: single
- id: '1685977723663'
  alias: Werkkamer - Schakel Verlichting d.m.v. iOS Actions
  description: Actie om de verlichting in de Werkkamer Helmer te schakelen (door middel
    van iOS Action).
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Werkh_licht_toggle
      actionName: Werkh_licht_toggle
    id: schakel_alle_lampen_standaard
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: werkh_licht_xbox
      actionName: werkh_licht_xbox
    id: schakel_xbox_scene
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: schakel_alle_lampen_standaard
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.ruimte_werkkamer_helmer
            state: 'on'
          sequence:
          - data: {}
            target:
              entity_id: light.ruimte_werkkamer_helmer
            action: light.turn_off
        - conditions:
          - condition: state
            entity_id: light.ruimte_werkkamer_helmer
            state: 'off'
          sequence:
          - data: {}
            target:
              entity_id: scene.werkkamer_helmer_helder
            action: hue.activate_scene
    - conditions:
      - condition: trigger
        id: schakel_xbox_scene
      sequence:
      - data: {}
        action: hue.activate_scene
        target:
          entity_id: scene.werkkamer_helmer_gamen
  mode: single
- id: '1685977793745'
  alias: Woonkamer - Enable or Trigger Movie Night
  description: 'iOS Event Fired: Movie Night / Activate HUE Scene: Woonkamer - Movie
    Night'
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Movie_Night
      actionName: Movie Night
    id: ios_event_movie_night
  - platform: event
    event_type: call_service
    event_data:
      domain: scene
      service: turn_on
      service_data:
        entity_id: scene.woonkamer_standaard_movie_night
    id: scene_turned_on
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: scene_turned_on
      sequence:
      - data: {}
        target:
          entity_id: input_boolean.movie_night
        action: input_boolean.toggle
    - conditions:
      - condition: trigger
        id: ios_event_movie_night
      sequence:
      - data: {}
        target:
          entity_id: input_boolean.movie_night
        action: input_boolean.toggle
  mode: single
- id: '1686141778424'
  alias: iOS - Action or Event Fired - Post UIT v2
  description: Schakel de Post notificatie uit.
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Post UIT
      actionName: Post UIT
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: Post UIT
      actionName: Post UIT
      triggerSource: watch
    enabled: false
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: POST_UIT
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.brievenbus_post_arrived
  mode: single
- id: '1686143251837'
  alias: iOS - Event Fired - WeK Light Off
  description: 'Test action '
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: WeK Licht UIT
      actionName: WeK Licht UIT
  condition: []
  action:
  - data: {}
    action: light.turn_off
    target:
      entity_id: light.ruimte_werkkamer_helmer
  mode: single
- id: '1686648692433'
  alias: Oven v2 - 01 - AAN
  description: Track de start en eindtijd van de oven en hou de totale tijd bij.
  triggers:
  - entity_id:
    - sensor.keuken_combi_stoomoven_status
    to:
    - Opwarmen
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_oven_v2
      state: uit
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.oven_v2_aan
    action: input_datetime.set_datetime
  - target:
      entity_id: input_select.status_oven_v2
    data:
      option: opwarmen
    action: input_select.select_option
  mode: single
- id: '1686648899808'
  alias: 'Oven v2 - 02 - Op Temperatuur '
  description: Uitvoeren als de Oven aan staat en op temperatuur is.
  triggers:
  - entity_id:
    - sensor.keuken_combi_stoomoven_status_v2
    to: Op Temperatuur
    trigger: state
  conditions:
  - condition: state
    entity_id: input_select.status_oven_v2
    state: opwarmen
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - if:
    - condition: state
      entity_id: input_boolean.oven_v2_op_temperatuur
      state: 'off'
    then:
    - data:
        datetime: '{{ now() }}'
      target:
        entity_id: input_datetime.oven_v2_op_temperatuur
      action: input_datetime.set_datetime
    - data: {}
      target:
        entity_id: input_boolean.oven_v2_op_temperatuur
      action: input_boolean.turn_on
    - metadata: {}
      data:
        media_ruimte: Woonkamer
        message_tv_body: De oven is op temperatuur.
        message_tts_pre_notify: false
        message_tts_body: De oven is op temperatuur.
        message_tts_priority: false
      action: script.1716215162458
    - metadata: {}
      data:
        media_ruimte: Keuken
        message_tv_body: De oven is op temperatuur.
        message_tts_pre_notify: false
        message_tts_body: De oven is op temperatuur.
        message_tts_priority: false
      action: script.1716215162458
    - metadata: {}
      data:
        media_ruimte: Werkkamer Helmer
        message_tv_body: De oven is op temperatuur.
        message_tts_pre_notify: false
        message_tts_body: De oven is op temperatuur.
        message_tts_priority: false
      action: script.1716215162458
    - metadata: {}
      data:
        media_ruimte: Badkamer
        message_tv_body: De oven is op temperatuur.
        message_tts_pre_notify: false
        message_tts_body: De oven is op temperatuur.
        message_tts_priority: false
      action: script.1716215162458
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: home
        message_phone_body: De oven is op temperatuur
        message_phone_title: Oven
        message_phone_tag: oven_optemperatuur
        message_phone_persistent: true
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_title: BMW i4 op slot doen
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: BMW_I4_FLASH_LIGHT
        action_2_phone_title: Knipper lampen
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_group: oven
  - data:
      option: op_temperatuur
    target:
      entity_id: input_select.status_oven_v2
    action: input_select.select_option
  - data:
      notify_phone: iphone_helmer
      notify_location: home
      message_phone_body: De oven is op temperatuur.
      message_phone_title: Oven
      message_phone_tag: oven_aan
      message_phone_group: oven
      message_phone_persistent: true
      media_room:
      - Werkkamer Helmer
      - Woonkamer
      media_person: Helmer
      media_person_priority: false
      message_tv_body: De oven staat nog aan.
      message_tts_pre_notify: true
      message_tts_body: De oven staat nog aan.
    enabled: true
    action: script.oven_notificatie_oven_aan_scheduler_v3
  mode: single
- id: '1686648984445'
  alias: Oven v2 - 03 - UIT
  description: Uitvoeren als de Oven UIT gaat.
  triggers:
  - entity_id:
    - sensor.keuken_combi_stoomoven_status
    to: 'off'
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_oven_v2
      state: op_temperatuur
    - condition: state
      entity_id: input_select.status_oven_v2
      state: opwarmen
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.oven_v2_uit
    action: input_datetime.set_datetime
  - target:
      entity_id: input_select.status_oven_v2
    data:
      option: uit
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.oven_v2_op_temperatuur
    action: input_boolean.turn_off
  - data:
      notify_phone: iphone_helmer
      message_phone_tag: oven_aan
    enabled: true
    action: script.notificatie_clear_iphone_v2
  - data:
      notify_phone: iphone_helmer
      message_phone_tag: oven_op_temperatuur
    enabled: true
    action: script.notificatie_clear_iphone_v2
  mode: single
- id: '1687178739741'
  alias: ESPresense - Helmer Room Change
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: werkkamer_helmer
    id: from-wk_helmer
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: woonkamer
    id: from-woonkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: keuken
    id: from-keuken
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: slaapkamer
    id: from-slaapkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: werkkamer_regina
    id: from-wk_regina
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: gang
    id: from-gang
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: hal
    id: from-hal
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: bijkeuken
    id: from-bijkeuken
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: berging
    id: from-berging
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: badkamer
    id: from-badkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: vliering
    id: from-vliering
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: voortuin
    id: from-voortuin
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: achtertuin
    id: from-achtertuin
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: toilet_gang
    id: from-toilet_gang
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: toilet_hal
    id: from-toilet_hal
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: unknown
    id: from-onbekend
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    from: not_home
    id: from-not_home
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - from-slaapkamer
      sequence:
      - data:
          previous_room: slaapkamer_helmer
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: slaapkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-wk_helmer
      sequence:
      - data:
          previous_room: werkkamer_helmer
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: werkkamer_helmer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id: from-woonkamer
      sequence:
      - data:
          previous_room: woonkamer
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: woonkamer
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: woonkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id: from-keuken
      sequence:
      - data:
          previous_room: keuken
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: keuken
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: keuken
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-wk_regina
      sequence:
      - data:
          previous_room: werkkamer_regina
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: werkkamer_regina
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: werkkamer_regina
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: gang
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-hal
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: hal
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: hal
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-bijkeuken
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: bijkeuken
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: bijkeuken
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-berging
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: bijkeuken
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: berging
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-badkamer
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: badkamer
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: badkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-vliering
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: vliering
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: vliering
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-voortuin
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: voortuin
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: voortuin
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-achtertuin
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: achtertuin
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: achtertuin
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-toilet_gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: toilet_gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: toilet_gang
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-toilet_gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: toilet_hal
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: toilet_hal
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-onbekend
      sequence:
      - data:
          previous_room: onbekend
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: onbekend
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-not_home
      sequence:
      - data:
          previous_room: not_home
          current_room: '{{ states(''sensor.presence_iphone_helmer'')}}'
          person: helmer
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: Helmer
          previous_room: not_home
        action: script.espresense_update_previous_current_room_v2
  mode: restart
- id: '1687862074681'
  alias: Werkkamer - Helmer Focus - Present Mode UIT
  description: Als de Presenteer Focus mode op de iPhone van Helmer wordt uigeschakeld,
    schakel de input_boolean ook uit.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.just_a_phone_max_focus
    to: 'off'
  - platform: state
    entity_id:
    - input_select.focus_status_iphone_helmer
    to: Uit
  condition: []
  action:
  - service: input_select.select_option
    data:
      option: '{{ states(''input_select.focus_status_iphone_helmer'') }}'
    target:
      entity_id: input_select.focus_status_iphone_helmer
  - if:
    - condition: state
      entity_id: input_boolean.voice_response
      state: 'on'
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.voice_response_werkkamer_helmer
  - if:
    - condition: state
      entity_id: input_boolean.iphone_helmer_focus_media_player_playing
      state: 'on'
    then:
    - service: media_player.media_play
      data: {}
      target:
        entity_id: media_player.werkkamer_helmer_sonos
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.iphone_helmer_focus_media_player_playing
  mode: single
- id: '1688153879373'
  alias: ESPresense - Regina Room Change
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: werkkamer_helmer
    id: from-wk_helmer
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: woonkamer
    id: from-woonkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: keuken
    id: from-keuken
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: slaapkamer
    id: from-slaapkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: werkkamer_regina
    id: from-wk_regina
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: gang
    id: from-gang
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: hal
    id: from-hal
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: bijkeuken
    id: from-bijkeuken
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: berging
    id: from-berging
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: badkamer
    id: from-badkamer
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: vliering
    id: from-vliering
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: voortuin
    id: from-voortuin
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: achtertuin
    id: from-achtertuin
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: toilet_gang
    id: from-toilet_gang
  - platform: state
    entity_id:
    - sensor.presence_iphone_regina
    from: toilet_hal
    id: from-toilet_hal
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - from-slaapkamer
      sequence:
      - data:
          previous_room: slaapkamer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: slaapkamer_helmer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: slaapkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-wk_helmer
      sequence:
      - data:
          previous_room: werkkamer_helmer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: werkkamer_helmer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: werkkamer_helmer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id: from-woonkamer
      sequence:
      - data:
          previous_room: woonkamer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: woonkamer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: woonkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id: from-keuken
      sequence:
      - data:
          previous_room: keuken
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: keuken
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: keuken
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-wk_regina
      sequence:
      - data:
          previous_room: werkkamer_regina
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: werkkamer_regina
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: werkkamer_regina
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: gang
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-hal
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: hal
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: hal
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-bijkeuken
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: bijkeuken
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: bijkeuken
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-berging
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: bijkeuken
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: berging
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-badkamer
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: badkamer
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: badkamer
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-vliering
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: vliering
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: vliering
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-voortuin
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: voortuin
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: voortuin
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-achtertuin
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: achtertuin
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: achtertuin
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-toilet_gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: toilet_gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: toilet_gang
        action: script.espresense_update_previous_current_room_v2
    - conditions:
      - condition: trigger
        id:
        - from-toilet_gang
      sequence:
      - data:
          previous_room: gang
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        enabled: false
        action: script.presense_update_previous_and_current_room
      - data:
          previous_room: toilet_hal
          current_room: '{{ states.sensor.presence_iphone_regina.state}}'
          person: regina
        action: script.presense_follow_music
      - metadata: {}
        data:
          person: regina
          previous_room: toilet_hal
        action: script.espresense_update_previous_current_room_v2
  mode: restart
- id: '1688676255309'
  alias: Notificatie - Staan er nog ramen of deuren open?
  description: Notificatie als de afvalcontainer aan de weg moet.
  trigger:
  - platform: time
    at: input_datetime.tijdstip_melding_raam_deur_open
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.notificatie_raam_deur_open_aan
      state: 'on'
    - condition: or
      conditions:
      - condition: numeric_state
        entity_id: sensor.count_windows_open
        above: 0
      - condition: numeric_state
        entity_id: sensor.count_doors_open
        above: 0
  action:
  - service: script.notificatie_scheduler_raam_and_deur_open
    data: {}
  mode: single
- id: '1690462756711'
  alias: Sonos - Update Favorites Lijst v2
  description: Elke nacht om 00:00 en na een herstart van HA de Sonos Favorites updaten
    via een script.
  trigger:
  - platform: time
    at: 00:00:00
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: script.sonos_update_favorites_lijst_v2
    data: {}
  mode: single
- id: '1691580410379'
  alias: 'Schuur - Bosch v36 Oplader - 01 - OPLADEN '
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.bosch_36v_oplader_power
    above: 12
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_bosch_36v_oplader
      state: uit
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.bosch_36v_oplader_aan
    action: input_datetime.set_datetime
  - data:
      option: opladen
    target:
      entity_id: input_select.status_bosch_36v_oplader
    action: input_select.select_option
  mode: single
- id: '1691580788777'
  alias: Schuur - Bosch v36 Oplader - 02 - LADEN GEREED
  description: Bosch 36V oplader is klaar met opladen.
  triggers:
  - entity_id:
    - switch.bosch_36v_oplader
    to: 'on'
    id: stekker_aan
    trigger: state
    enabled: false
  - trigger: numeric_state
    entity_id:
    - sensor.bosch_36v_oplader_power
    below: 10
  conditions:
  - condition: state
    entity_id: input_select.status_bosch_36v_oplader
    state: opladen
    enabled: false
  - condition: state
    entity_id: switch.bosch_36v_oplader
    state: 'on'
  actions:
  - data:
      option: laden_gereed
    target:
      entity_id: input_select.status_bosch_36v_oplader
    action: input_select.select_option
  - choose:
    - conditions:
      - condition: trigger
        id:
        - laden_gereed
      sequence:
      - if:
        - condition: state
          entity_id: input_boolean.bosch_36v_oplader_laden_gereed
          state: 'off'
        then:
        - data:
            datetime: '{{ now() }}'
          target:
            entity_id: input_datetime.bosch_36v_oplader_opladen_gereed
          action: input_datetime.set_datetime
        - data: {}
          target:
            entity_id: input_boolean.bosch_36v_oplader_laden_gereed
          action: input_boolean.turn_on
  mode: single
- id: '1691583096359'
  alias: Schuur - Bosch v36 Oplader - 03 - OPLADER UIT
  description: UItvoeren 30 minuten nadat de oplader klaar is met laden, stroom wordt
    van oplader gehaald.
  triggers:
  - entity_id:
    - switch.bosch_36v_oplader
    to: 'off'
    id: stekker-uit
    trigger: state
  - entity_id:
    - input_select.status_bosch_36v_oplader
    to: laden_gereed
    for:
      hours: 0
      minutes: 45
      seconds: 0
    id: laden-uit-trigger
    trigger: state
  - event_type: ios.notification_action_fired
    event_data:
      actionName: BOSCH_36V_LADER
    id: laden-uit-trigger
    trigger: event
  - type: power
    device_id: 13d1bfef772aade5b120a543d713d73f
    entity_id: 0b9a8c585bb5d4459f5f6db381d54529
    domain: sensor
    trigger: device
    below: 2
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: laden-uit-trigger
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_bosch_36v_oplader
      state: laden_gereed
    - condition: state
      entity_id: input_select.status_bosch_36v_oplader
      state: opladen
    enabled: false
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.bosch_36v_oplader_uit
    action: input_datetime.set_datetime
  - data:
      option: uit
    target:
      entity_id: input_select.status_bosch_36v_oplader
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.bosch_36v_oplader_laden_gereed
    action: input_boolean.turn_off
    enabled: false
  - data:
      notify_phone: iphone_helmer
      message_phone_tag: bosch_36v_gereed
    enabled: true
    action: script.notificatie_clear_iphone_v2
  - choose:
    - conditions:
      - condition: trigger
        id:
        - lader-uit-trigger
      sequence: []
    enabled: false
  - data: {}
    action: switch.turn_off
    target:
      entity_id:
      - switch.bosch_36v_oplader
      - sensor.bosch_36v_oplader_power
      - input_boolean.bosch_36v_oplader_actief
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.bosch_36v_oplader_actief
  mode: single
- id: '1691770294248'
  alias: Template - Notificatie v5
  description: Template with all notifications combined.
  trigger:
  - platform: webhook
    webhook_id: -7D8SmIGry7U-hjtjg4y4yfgjfgj
    allowed_methods:
    - POST
    - PUT
    local_only: true
  condition: []
  action:
  - service: script.sonos_determine_speaker_name
    data:
      media_room:
      - Werkkamer Helmer
    response_variable: sonos_speaker
  - service: script.notificatie_iphone_v6
    data:
      action_phone_action_enabled: none
      ruimte: Werkkamer Helmer
      notify_phone: iphone_helmer
      message_phone_body: Deze speaker {{ sonos_speaker}} -
      message_phone_group: device
      message_phone_persistent: true
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_activationmode: background
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: true
      message_phone_title: Actionable Notification Test
  - service: script.notification_script_v10
    metadata: {}
    data:
      notify_device:
      - iPhone
      - Sonos Speaker
      message_room:
      - Woonkamer
      - Keuken
      message_person: Helmer
      message_person_priority: false
      notify_tv: woonkamer_tv
      message_tts_pre_notify: false
      message_tts_body: Dit is een testbericht
      action_phone_action_enabled: none
      notify_ios_device:
      - iPhone Helmer
      notify_location: home
      message_phone_body: Dit is een bericht
      message_phone_title: Titel
      message_phone_tag: device_status
      message_phone_group: device
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
  mode: single
- id: '1692015826032'
  alias: Vaatwasser v1 - START
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  trigger:
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: running
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_vaatwasser
      state: idle
    - condition: state
      entity_id: input_select.status_vaatwasser
      state: completed
  action:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.vaatwasser_v1_started
    action: input_datetime.set_datetime
  - data:
      option: running
    target:
      entity_id: input_select.status_vaatwasser
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.vaatwasser_v1_ready
    action: input_boolean.turn_off
  - data:
      datetime: '{{ (now().timestamp() + states(''input_number.vaatwasser_v1_expected_runtime'')
        | float(0)) | timestamp_local() }}'
    target:
      entity_id: input_datetime.vaatwasser_v1_expected_time_to_stop
    action: input_datetime.set_datetime
  mode: single
- id: '1692015852767'
  alias: Vaatwasser v1 - STOP
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  trigger:
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: program_ended
  condition:
  - condition: state
    entity_id: input_select.status_vaatwasser
    state: running
  action:
  - data:
      datetime: '{{ now() }}'
    target:
      entity_id: input_datetime.vaatwasser_v1_stopped
    action: input_datetime.set_datetime
  - data:
      option: completed
    target:
      entity_id: input_select.status_vaatwasser
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.vaatwasser_v1_ready
    action: input_boolean.turn_on
  - data: {}
    target:
      entity_id: counter.vaatwasser_aantal_wasbeurten
    action: counter.increment
  mode: single
- id: '1692210298558'
  alias: Slaapkamer - iOS Alarm - Update HA Alarm Tijd
  description: Werkt in combinatie met Apple Shortcut. Zodra iOS Alarm (met de naam
    Wekker) is gewijzigd, wordt de Trigger helper van deze automation gewijzigd waardoor
    deze automation wordt gestart.
  triggers:
  - entity_id:
    - input_datetime.wekker_iphone_helmer
    id: configure_alarm
    trigger: state
  - entity_id:
    - input_boolean.wekker_iphone_helmer_enabled
    to: 'off'
    id: alam_off
    trigger: state
  conditions:
  - condition: state
    entity_id: sensor.just_a_phone_max_ssid
    state: Silence of the LANs
    enabled: true
  - condition: state
    entity_id: person.helmer_zandbergen
    state: home
    enabled: true
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - choose:
    - conditions:
      - condition: time
        weekday:
        - mon
        - tue
        - wed
        - thu
        - sun
        - fri
        - sat
      sequence:
      - data:
          time: '{{ states("input_datetime.wekker_iphone_helmer")}}'
        target:
          entity_id: input_datetime.wakeup_time_week
        action: input_datetime.set_datetime
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_week
        action: switch.turn_on
      - data: {}
        target:
          entity_id: input_boolean.wekker_iphone_helmer_enabled
        action: input_boolean.turn_on
      - data:
          time: '{{ states("input_datetime.wekker_iphone_helmer")}}'
        target:
          entity_id: input_datetime.wakeup_time_weekend
        action: input_datetime.set_datetime
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_weekend
        action: switch.turn_on
      - data:
          notify_phone: iphone_helmer
          message_phone_body: Wekker gaat morgenochtend om {{ states("input_datetime.wekker_iphone_helmer")}}
          message_phone_title: Wekker Ingeschakeld
          message_phone_tag: wekker_aan
          message_phone_group: wekker
          message_phone_persistent: true
          action_phone_action_enabled: none
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_1_phone_title: BMW i4 op slot doen
          message_tts_timeout_hours: 0
          message_tts_timeout_minutes: 0
          message_tts_timeout_seconds: 2
          message_tts_timeout_milliseconds: 0
          message_tts_priority: false
        enabled: true
        action: script.notificatie_iphone_v3
    - conditions:
      - condition: time
        weekday:
        - fri
        - sat
        - sun
        enabled: false
      sequence:
      - data:
          time: '{{ states("input_datetime.wekker_iphone_helmer")}}'
        target:
          entity_id: input_datetime.wakeup_time_weekend
        action: input_datetime.set_datetime
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_weekend
        action: switch.turn_on
      - data: {}
        target:
          entity_id: input_boolean.wekker_iphone_helmer_enabled
        action: input_boolean.turn_on
      - data:
          notify_phone: iphone_helmer
          message_phone_body: Wekker gaat morgenochtend om {{ states("input_datetime.wekker_iphone_helmer")}}
          message_phone_title: Wekker Ingeschakeld
          message_phone_tag: wekker_aan
          message_phone_group: wekker
          message_phone_persistent: true
          action_phone_action_enabled: none
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_1_phone_title: BMW i4 op slot doen
          message_tts_timeout_hours: 0
          message_tts_timeout_minutes: 0
          message_tts_timeout_seconds: 2
          message_tts_timeout_milliseconds: 0
          message_tts_priority: false
        enabled: true
        action: script.notificatie_iphone_v3
  - choose:
    - conditions:
      - condition: time
        weekday:
        - mon
        - tue
        - wed
        - thu
        - sun
        - fri
        - sat
      - condition: trigger
        id:
        - alam_off
      sequence:
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_week
        action: switch.turn_off
      - data: {}
        target:
          entity_id: media_player.slaapkamer_helmer_sonos
        enabled: false
        action: media_player.media_pause
      - data: {}
        target:
          entity_id: light.slaapkamer_bedlamp_helmer
        enabled: false
        action: light.turn_off
      - data:
          notify_phone: iphone_helmer
          message_phone_body: Wekker is uitgeschakeld.
          message_phone_title: Wekker Uitgeschakeld
          message_phone_tag: wekker_uit
          message_phone_group: wekker
          message_phone_persistent: true
          action_phone_action_enabled: none
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_1_phone_title: BMW i4 op slot doen
          message_tts_timeout_hours: 0
          message_tts_timeout_minutes: 0
          message_tts_timeout_seconds: 2
          message_tts_timeout_milliseconds: 0
          message_tts_priority: false
        enabled: true
        action: script.notificatie_iphone_v3
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_weekend
        action: switch.turn_off
    - conditions:
      - condition: time
        weekday:
        - fri
        - sun
        - sat
        enabled: false
      - condition: trigger
        id:
        - alam_off
      sequence:
      - data: {}
        target:
          entity_id: switch.slaapkamer_helmer_sonos_alarm_weekend
        action: switch.turn_off
      - data: {}
        target:
          entity_id: media_player.slaapkamer_helmer_sonos
        enabled: false
        action: media_player.media_pause
      - data: {}
        target:
          entity_id: light.slaapkamer_bedlamp_helmer
        enabled: false
        action: light.turn_off
      - data:
          notify_phone: iphone_helmer
          message_phone_body: Wekker is uitgeschakeld.
          message_phone_title: Wekker Uitgeschakeld
          message_phone_tag: wekker_uit
          message_phone_group: wekker
          message_phone_persistent: true
          action_phone_action_enabled: none
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_1_phone_title: BMW i4 op slot doen
          message_tts_timeout_hours: 0
          message_tts_timeout_minutes: 0
          message_tts_timeout_seconds: 2
          message_tts_timeout_milliseconds: 0
          message_tts_priority: false
        enabled: true
        action: script.notificatie_iphone_v3
  mode: single
- id: '1692373649483'
  alias: Schuur - Bosch eBike - 01 - OPLADEN
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.bosch_ebike_oplader_power
    above: 2
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.bosch_ebike_oplader
      state: uit
      enabled: true
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.bosch_ebike_oplader_aan
    action: input_datetime.set_datetime
  - data:
      option: opladen
    target:
      entity_id: input_select.status_bosch_ebike_oplader
    action: input_select.select_option
  mode: single
- id: '1692374572862'
  alias: Schuur - Bosch eBike Oplader - 02 - LADEN GEREED
  description: Bosch eBike oplader is klaar met opladen.
  triggers:
  - entity_id:
    - switch.berging_bosch_ebike_oplader
    to: 'on'
    id: stekker_aan
    enabled: false
    trigger: state
  - type: power
    device_id: 6b3f2c66bb50bf68cc1e816132b0f3e5
    entity_id: cd88b7055d25a446a8063d74a1e4e733
    domain: sensor
    trigger: device
    below: 2
  conditions:
  - condition: state
    entity_id: input_select.status_bosch_ebike_oplader
    state: opladen
    enabled: true
  - condition: state
    entity_id: switch.bosch_ebike_oplader
    state: 'on'
  actions:
  - data:
      option: laden_gereed
    target:
      entity_id: input_select.status_bosch_ebike_oplader
    action: input_select.select_option
  mode: single
- id: '1692375399752'
  alias: Schuur - Bosch eBike - 03 - OPLADER UIT
  description: UItvoeren 30 minuten nadat de oplader klaar is met laden, stroom wordt
    van oplader gehaald.
  triggers:
  - entity_id:
    - switch.bosch_ebike_oplader
    to: 'off'
    id: stekker-uit
    trigger: state
  - entity_id:
    - input_select.status_bosch_ebike_oplader
    to: laden_gereed
    for:
      hours: 0
      minutes: 30
      seconds: 0
    id: laden-uit-trigger
    trigger: state
  - event_type: ios.notification_action_fired
    event_data:
      actionName: BOSCH_EBIKE_LADER
    id: laden-uit-trigger
    trigger: event
  - type: power
    device_id: 6b3f2c66bb50bf68cc1e816132b0f3e5
    entity_id: cd88b7055d25a446a8063d74a1e4e733
    domain: sensor
    trigger: device
    below: 1
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_bosch_ebike_oplader
      state: laden_gereed
    - condition: state
      entity_id: input_select.status_bosch_ebike_oplader
      state: opladen
    enabled: true
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.bosch_ebike_oplader_uit
    action: input_datetime.set_datetime
  - data:
      option: uit
    target:
      entity_id: input_select.status_bosch_ebike_oplader
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.bosch_ebike_oplader_laden_gereed
    action: input_boolean.turn_off
  - data:
      notify_phone: iphone_helmer
      message_phone_tag: bosch_ebike_gereed
    enabled: true
    action: script.notificatie_clear_iphone_v2
  - choose:
    - conditions:
      - condition: trigger
        id:
        - lader-uit-trigger
      sequence: []
    enabled: false
  - data: {}
    target:
      entity_id:
      - switch.bosch_ebike_oplader
    action: switch.turn_off
  mode: single
- id: '1692978765230'
  alias: Agenda - UIT ETEN
  description: Geef een melding als we een afspraak hebben met ‘Uit Eten’  in het
    onderwerp.
  trigger:
  - platform: calendar
    event: start
    offset: -0:30:0
    entity_id: calendar.familie_zandbergen_m365_helmer
  condition:
  - condition: template
    value_template: '{{ not is_state(''sensor.waze_event_destination'', '''')}}'
    enabled: true
  action:
  - service: script.notificatie_iphone_v6
    data:
      action_phone_action_enabled: two
      ruimte: Werkkamer Helmer
      notify_phone: iphone_helmer
      persoon: helmer
      notify_location: away
      message_phone_body: Je moet over een half uur vertrekken. Moet ik de BMW alvast
        acclimatiseren?
      message_phone_title: BMW Airco
      message_phone_tag: bmw_bereik
      message_phone_group: laadpaal
      message_phone_persistent: true
      action_1_phone_single: AIRCO_JA
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:checkmark.seal.fill
      action_1_phone_destructive: false
      action_2_phone_single: AIRCO_NEE
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:multiply
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
      action_1_phone_title: JA
      action_2_phone_title: NEE
  mode: single
- id: '1693150481207'
  alias: Sonos - Configureer Alarm Week Day v3
  description: Configureer de tijd voor het genoemde Alarm.
  triggers:
  - entity_id:
    - input_datetime.wakeup_time_week
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      alarm_id: '{{  state_attr(''switch.slaapkamer_helmer_sonos_alarm_week'', ''alarm_id'')
        }}'
      volume: 0.12
      time: '{{ states(''input_datetime.wakeup_time_week'') }}'
    target:
      entity_id: media_player.slaapkamer_helmer_sonos
    action: sonos.update_alarm
  mode: single
- id: '1693150503292'
  alias: Sonos - Configureer Alarm Weekend Day v3.1
  description: Configureer de tijd voor het genoemde Alarm.
  triggers:
  - entity_id:
    - input_datetime.wakeup_time_weekend
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      alarm_id: '{{  state_attr(''switch.slaapkamer_helmer_sonos_alarm_weekend'',
        ''alarm_id'') }}'
      volume: 0.12
      time: '{{ states(''input_datetime.wakeup_time_weekend'') }}'
    target:
      entity_id: media_player.slaapkamer_helmer_sonos
    action: sonos.update_alarm
  mode: single
- id: '1693150529850'
  alias: Sonos - Configureer Alarm Travel Day v3
  description: Configureer de tijd voor het genoemde Alarm.
  triggers:
  - entity_id:
    - input_datetime.wakeup_time_travel
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      alarm_id: '{{  state_attr(''switch.slaapkamer_helmer_sonos_alarm_travel'', ''alarm_id'')
        }}'
      volume: 0.12
      time: '{{ states(''input_datetime.wakeup_time_travel'') }}'
    target:
      entity_id: media_player.slaapkamer_helmer_sonos
    action: sonos.update_alarm
  mode: single
- id: '1693593202235'
  alias: AGENDA - Boodschappen Checken v1
  description: Geef een melding als we een afspraak hebben met ‘Boodschappen checken’  in
    het onderwerp.
  trigger:
  - platform: calendar
    event: start
    offset: '-1:0:0'
    entity_id: calendar.familie_zandbergen_m365_helmer
  - platform: calendar
    event: start
    offset: '-1:0:0'
    entity_id: calendar.familie_zandbergen_m365_helmer
  condition:
  - condition: template
    value_template: '{{ ''Boodschappen checken'' in state_attr(''calendar.familie_zandbergen_m365_helmer'',
      ''message'')}}'
  action:
  - service: script.notificatie_iphone_v5
    data:
      media_player_entity: media_player.woonkamer_sonos
      ruimte: woonkamer
      persoon: helmer
      notify_phone: iphone_helmer
      notify_tv: lg_c4_woonkamer
      message_phone_body: Check vanavond de boodschappen in de app van Albert Heijn.
      message_phone_title: AH Boodschappen
      message_phone_tag: agenda_afspraak
      message_phone_group: agenda_afspraak
      message_phone_persistent: true
      action_phone_action_enabled: none
    enabled: true
  - parallel:
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.badkamer_sonos
        ruimte: badkamer
        notify_tv: lg_c4_woonkamer
        message_tts_pre_notify: true
        message_tts_body: Check vanavond de boodschappen in de app van de AHA.
        message_tv_body: Check de boodschappen!
        message_tts_priority: true
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.keuken_sonos
        ruimte: keuken
        notify_tv: lg_c4_woonkamer
        message_tts_pre_notify: true
        message_tts_body: Check vanavond de boodschappen in de app van de AHA.
        message_tv_body: Check de boodschappen!
        message_tts_priority: true
      enabled: true
    - service: script.sonos_audio_notificatie_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: woonkamer
        notify_tv: lg_c4_woonkamer
        message_tts_pre_notify: true
        message_tts_body: Check vanavond de boodschappen in de app van de AHA.
        message_tv_body: Check de boodschappen!
        message_tts_priority: true
      enabled: true
    - service: script.sonos_audio_notificatie_v6
      data:
        media_player_entity: media_player.badkamer_sonos
        ruimte: woonkamer
        notify_tv: lg_c4_woonkamer
        message_tts_pre_notify: true
        message_tts_body: Check vanavond de boodschappen in de app van Albert Heijn.
        message_tv_body: Check de boodschappen!
        message_tts_priority: true
      enabled: true
  mode: single
- id: '1693680982845'
  alias: Controller - IKEA E2001/E2002 STYRBAR Remote control
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e2001_e2002.yaml
    input:
      integration: ZHA
      controller_device: 26a3203097af411317b0495a77945a36
      helper_last_controller_event: input_text.remote_wk_helmer_helper_last_controller_event
      action_button_left_short:
      - service: script.sonos_remote_previous_playlist
        data: {}
      action_button_right_short:
      - service: script.sonos_remote_next_playlist
        data: {}
      button_right_double_press: true
      button_left_double_press: true
      action_button_left_double: []
      action_button_right_double: []
      action_button_right_long: []
      action_button_left_long: []
- id: '1693681106539'
  alias: Hook - Media Player
  description: ''
  use_blueprint:
    path: EPMatt/media_player.yaml
    input:
      controller_device: 26a3203097af411317b0495a77945a36
      controller_model: IKEA E2001/E2002 STYRBAR Remote control
      media_player: media_player.woonkamer_sonos
- id: '1694200631192'
  alias: Wasdroger v3.0 - START PROGRAMMA
  description: Track de start en eindtijd van een droogbeurt en hou de totale tijd
    bij. Aan het einde van de droogbeurt stuur een notificatie.
  triggers:
  - entity_id:
    - sensor.bijkeuken_wasdroger_status
    to: running
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.wasdroger_v2_started
    action: input_datetime.set_datetime
  - data:
      value: '{{states(''sensor.bijkeuken_wasdroger_starttijd'')}}'
    target:
      entity_id: input_text.wasdroger_v3_started_at
    action: input_text.set_value
  - data:
      option: running
    target:
      entity_id: input_select.status_wasdroger_v2
    action: input_select.select_option
  - data:
      value: '{{ states(''sensor.bijkeuken_wasdroger_einde_om'') }}'
    target:
      entity_id: input_text.wasdroger_v3_finish_at
    action: input_text.set_value
  - data: {}
    target:
      entity_id: input_boolean.wasdroger_v2_ready
    action: input_boolean.turn_off
  mode: single
- id: '1697900772846'
  alias: Media Remote - Symfonisk Remote Gen 2 (Helmer)
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 6
      command: toggle
    id: play_pause
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 0
      - 255
      params:
        move_mode: 0
        rate: 255
    enabled: true
    id: volume_up
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 1
      - 255
      params:
        move_mode: 1
        rate: 255
    enabled: true
    id: volume_down
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 1
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 1
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: previous
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 0
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 0
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: next
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_long_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_long_press
  condition: []
  action:
  - variables:
      symfonisk_media_speler: "{% set mediaplayer = states('input_select.current_selected_speaker_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} media_player.badkamer_sonos {% elif
        mediaplayer == 'Keuken' %} media_player.keuken_sonos {% elif mediaplayer ==
        'Slaapkamer' %} media_player.slaapkamer_helmer_sonos {% elif mediaplayer ==
        'Werkkamer Helmer' %} media_player.werkkamer_helmer_sonos {% elif mediaplayer
        == 'Werkkamer Regina' %} media_player.werkkamer_regina_sonos {% elif mediaplayer
        == 'Woonkamer' %} media_player.woonkamer_sonos {% else %} media_player.woonkamer_sonos
        {% endif %}  \n"
      symfonisk_remote_device_ieee: 38:5b:44:ff:fe:7f:b6:00
      symfonisk_remote_user: helmer
      button_one_dot_single_press_playlist: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
      button_two_dot_single_press_playlist: '{{ states(''input_text.two_dot_active_playlist_remote_wk_helmer'')}}'
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - service: media_player.media_play_pause
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - service: media_player.volume_up
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Speaker
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_previous_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Speaker
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_next_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_long_press
      sequence:
      - service: input_select.select_next
        data:
          cycle: true
        target:
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
    - conditions:
      - condition: trigger
        id:
        - two_dot_long_press
      sequence:
      - service: input_text.set_value
        data_template:
          value: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
          entity_id: input_text.two_dot_active_playlist_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: state
      entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
      state: 'on'
    then:
    - service: script.notificatie_iphone_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: werkkamer_helmer
        persoon: helmer
        notify_location: home
        notify_phone: iphone_helmer
        message_tv_body: Testbericht op LG 4
        message_phone_body: "Sonos: {{ states('input_select.current_selected_speaker_symfonisk_remote_wk_helmer')}}\nVoorkeuze:
          \ \n1 - {{states('input_select.sonos_favorites_symfonisk_remote_wk_helmer')
          }}  \n2 - {{states('input_text.two_dot_active_playlist_remote_wk_helmer')
          }}\n"
        message_phone_title: Remote WK Helmer
        message_phone_tag: symfonisk_remote_wk_helmer
        message_phone_group: symfonisk_remote
        message_phone_persistent: true
        action_phone_action_enabled: none
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_1_phone_title: BMW i4 op slot doen
      enabled: true
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
  mode: restart
- id: '1697906337935'
  alias: Symfonisk Remote WK Regina
  description: Symfonisk Remote Gen 2 voor Werkkamer Regina
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 1
      cluster_id: 6
      command: toggle
    id: play_pause
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 0
      - 255
      params:
        move_mode: 0
        rate: 255
    enabled: true
    id: volume_up
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 1
      - 255
      params:
        move_mode: 1
        rate: 255
    enabled: true
    id: volume_down
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 1
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 1
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: previous
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 0
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 0
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: next
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 2
      cluster_id: 64640
      command: initial_press
      args:
      - 0
      params:
        new_position: 0
    enabled: true
    id: one_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_id: f1a3d745b641ed589f4b632b85713bf2
      endpoint_id: 3
      cluster_id: 64640
      command: initial_press
      args:
      - 0
      params:
        new_position: 0
    enabled: true
    id: two_dot_short_press
  condition: []
  action:
  - variables:
      symfonisk_media_speler: media_player.werkkamer_regina_sonos
      symfonisk_remote_id: f1a3d745b641ed589f4b632b85713bf2
      symfonisk_remote_room: werkkamer_regina
      symfonisk_remote_user: regina
      button_one_dot_single_press_playlist: Pure focus
      button_two_dot_single_press_playlist: Qmusic
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - service: media_player.media_play_pause
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - service: media_player.volume_up
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - service: media_player.media_previous_track
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - service: media_player.media_next_track
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
  mode: single
- id: '1697921924982'
  alias: Media Remote - Symfonisk Remote Gen 2 (Regina)
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 1
      cluster_id: 6
      command: toggle
    id: play_pause
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 0
      - 255
      params:
        move_mode: 0
        rate: 255
    enabled: true
    id: volume_up
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 1
      - 255
      params:
        move_mode: 1
        rate: 255
    enabled: true
    id: volume_down
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 1
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 1
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: previous
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 0
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 0
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: next
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 2
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 3
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 2
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_long_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:55:6c:8b
      endpoint_id: 3
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_long_press
  condition: []
  action:
  - variables:
      symfonisk_media_speler: "{% set mediaplayer = states('input_select.current_selected_speaker_symfonisk_remote_wk_regina')
        %} {% if mediaplayer == 'Badkamer' %} media_player.badkamer_sonos {% elif
        mediaplayer == 'Keuken' %} media_player.keuken_sonos {% elif mediaplayer ==
        'Slaapkamer' %} media_player.slaapkamer_helmer_sonos {% elif mediaplayer ==
        'Werkkamer Helmer' %} media_player.werkkamer_helmer_sonos {% elif mediaplayer
        == 'Werkkamer Regina' %} media_player.werkkamer_regina_sonos {% elif mediaplayer
        == 'Woonkamer' %} media_player.woonkamer_sonos {% else %} media_player.woonkamer_sonos
        {% endif %}  \n"
      symfonisk_remote_device_ieee_wk_helmer: 38:5b:44:ff:fe:7f:b6:00
      symfonisk_remote_device_ieee_wk_regina: 38:5b:44:ff:fe:55:6c:8b
      symfonisk_remote_user: regina
      button_one_dot_single_press_playlist: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_regina'')}}'
      button_two_dot_single_press_playlist: '{{ states(''input_text.two_dot_active_playlist_remote_wk_regina'')}}'
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - service: media_player.media_play_pause
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - service: media_player.volume_up
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Speaker
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_regina
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Playlist
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_regina
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Track
        then:
        - service: media_player.media_previous_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Speaker
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_regina
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Playlist
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_regina
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
          state: Track
        then:
        - service: media_player.media_next_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_long_press
      sequence:
      - service: input_select.select_next
        data:
          cycle: true
        target:
          entity_id: input_select.current_status_symfonisk_remote_wk_regina
    - conditions:
      - condition: trigger
        id:
        - two_dot_long_press
      sequence:
      - service: input_text.set_value
        data_template:
          value: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_regina'')}}'
          entity_id: input_text.two_dot_active_playlist_remote_wk_regina
  mode: single
- id: '1698742203471'
  alias: Media Remote - Symfonisk Remote Gen 2 (Helmer) BETA
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 6
      command: toggle
    id: play_pause
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 0
      - 255
      params:
        move_mode: 0
        rate: 255
    enabled: true
    id: volume_up
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 1
      - 255
      params:
        move_mode: 1
        rate: 255
    enabled: true
    id: volume_down
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 1
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 1
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: previous
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 0
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 0
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: next
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_long_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_long_press
  condition: []
  action:
  - variables:
      symfonisk_media_speler: "{% set mediaplayer = states('input_select.current_selected_speaker_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} media_player.badkamer_sonos {% elif
        mediaplayer == 'Keuken' %} media_player.keuken_sonos {% elif mediaplayer ==
        'Slaapkamer' %} media_player.slaapkamer_helmer_sonos {% elif mediaplayer ==
        'Werkkamer Helmer' %} media_player.werkkamer_helmer_sonos {% elif mediaplayer
        == 'Werkkamer Regina' %} media_player.werkkamer_regina_sonos {% elif mediaplayer
        == 'Woonkamer' %} media_player.woonkamer_sonos {% else %} media_player.woonkamer_sonos
        {% endif %}  \n"
      symfonisk_remote_device_ieee: 38:5b:44:ff:fe:7f:b6:00
      symfonisk_remote_user: helmer
      button_one_dot_single_press_playlist: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
      button_two_dot_single_press_playlist: '{{ states(''input_text.two_dot_active_playlist_remote_wk_helmer'')}}'
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - service: media_player.media_play_pause
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - service: media_player.volume_up
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Speaker
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_previous_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Speaker
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.current_selected_speaker_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_next_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_long_press
      sequence:
      - service: input_select.select_next
        data:
          cycle: true
        target:
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
    - conditions:
      - condition: trigger
        id:
        - two_dot_long_press
      sequence:
      - service: input_text.set_value
        data_template:
          value: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
          entity_id: input_text.two_dot_active_playlist_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: state
      entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
      state: 'on'
    then:
    - service: script.notificatie_iphone_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: werkkamer_helmer
        persoon: helmer
        notify_location: home
        notify_phone: iphone_helmer
        message_tv_body: Testbericht op LG 4
        message_phone_body: "Sonos: {{ states('input_select.current_selected_speaker_symfonisk_remote_wk_helmer')}}\nVoorkeuze:
          \ \n1 - {{states('input_select.sonos_favorites_symfonisk_remote_wk_helmer')
          }}  \n2 - {{states('input_text.two_dot_active_playlist_remote_wk_helmer')
          }}\n"
        message_phone_title: Remote WK Helmer
        message_phone_tag: symfonisk_remote_wk_helmer
        message_phone_group: symfonisk_remote
        message_phone_persistent: true
        action_phone_action_enabled: none
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_1_phone_title: BMW i4 op slot doen
      enabled: true
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
  mode: restart
- id: '1699454671778'
  alias: Media Remote - Symfonisk Remote Gen 2 (Helmer) v2
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 6
      command: toggle
    id: play_pause
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 0
      - 255
      params:
        move_mode: 0
        rate: 255
    enabled: true
    id: volume_up
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: move_with_on_off
      args:
      - 1
      - 255
      params:
        move_mode: 1
        rate: 255
    enabled: true
    id: volume_down
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 1
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 1
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: previous
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 1
      cluster_id: 8
      command: step
      args:
      - 0
      - 1
      - 0
      - 0
      - 0
      params:
        step_mode: 0
        step_size: 1
        transition_time: 0
        options_mask: 0
        options_override: 0
    enabled: true
    id: next
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: short_release
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_short_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 2
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: one_dot_long_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: long_press
      args:
      - 0
      params:
        previous_position: 0
    enabled: true
    id: two_dot_long_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: multi_press_complete
      args:
      - 0
      - 2
      params:
        previous_position: 0
        total_number_of_presses_counted: 2
    enabled: true
    id: two_dot_multi_press
  condition: []
  action:
  - variables:
      symfonisk_media_speler: "{% set mediaplayer = states('input_select.current_selected_room_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} media_player.badkamer_sonos {% elif
        mediaplayer == 'Keuken' %} media_player.keuken_sonos {% elif mediaplayer ==
        'Slaapkamer' %} media_player.slaapkamer_helmer_sonos {% elif mediaplayer ==
        'Werkkamer Helmer' %} media_player.werkkamer_helmer_sonos {% elif mediaplayer
        == 'Werkkamer Regina' %} media_player.werkkamer_regina_sonos {% elif mediaplayer
        == 'Woonkamer' %} media_player.woonkamer_sonos {% else %} media_player.woonkamer_sonos
        {% endif %}  \n"
      symfonisk_ruimte: "{% set mediaplayer = states('input_select.current_selected_room_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} badkamer {% elif mediaplayer == 'Keuken'
        %} keuken {% elif mediaplayer == 'Slaapkamer' %} slaapkamer {% elif mediaplayer
        == 'Werkkamer Helmer' %}werkkamer_helmer{% elif mediaplayer == 'Werkkamer
        Regina' %} werkkamer_regina {% elif mediaplayer == 'Woonkamer' %} woonkamer
        {% else %} woonkamer {% endif %}  \n"
      symfonisk_remote_device_ieee: 38:5b:44:ff:fe:7f:b6:00
      symfonisk_remote_user: helmer
      button_one_dot_single_press_playlist: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
      button_two_dot_single_press_playlist: '{{ states(''input_text.two_dot_active_playlist_remote_wk_helmer'')}}'
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - service: media_player.media_play_pause
        data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - if:
        - condition: state
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
          state: Verlichting
        then:
        - service: light.turn_on
          data:
            brightness_step_pct: 10
          target:
            area_id: '{{symfonisk_ruimte}}'
        else:
        - service: media_player.volume_up
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - if:
        - condition: state
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
          state: Verlichting
        then:
        - service: light.turn_on
          data:
            brightness_step_pct: -10
          target:
            area_id: '{{symfonisk_ruimte}}'
        else:
        - service: media_player.volume_down
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Ruimte
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id:
            - input_select.current_selected_room_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_previous
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_previous_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Ruimte
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id:
            - input_select.current_selected_room_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - service: input_select.select_next
          data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - service: media_player.media_next_track
          data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - service: media_player.select_source
        data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
    - conditions:
      - condition: trigger
        id:
        - one_dot_long_press
      sequence:
      - service: input_select.select_next
        data:
          cycle: true
        target:
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
    - conditions:
      - condition: trigger
        id:
        - two_dot_long_press
      sequence:
      - service: input_text.set_value
        data_template:
          value: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
          entity_id: input_text.two_dot_active_playlist_remote_wk_helmer
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
    - conditions:
      - condition: trigger
        id:
        - two_dot_multi_press
      sequence:
      - service: input_select.select_next
        data:
          cycle: true
        target:
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: state
      entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
      state: 'on'
    then:
    - service: script.notificatie_iphone_v5
      data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: werkkamer_helmer
        persoon: helmer
        notify_location: home
        notify_phone: iphone_helmer
        message_tv_body: Testbericht op LG 4
        message_phone_body: "Ruimte: {{ states('input_select.current_selected_room_symfonisk_remote_wk_helmer')}}
          Bediening: {{ states('input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer')}}
          Voorkeuze:  \n1 - {{states('input_select.sonos_favorites_symfonisk_remote_wk_helmer')
          }}  \n2 - {{states('input_text.two_dot_active_playlist_remote_wk_helmer')
          }}\n"
        message_phone_title: Remote WK Helmer
        message_phone_tag: symfonisk_remote_wk_helmer
        message_phone_group: symfonisk_remote
        message_phone_persistent: true
        action_phone_action_enabled: none
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_1_phone_title: BMW i4 op slot doen
      enabled: true
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
  mode: restart
- id: '1699822120478'
  alias: iOS Action - Poetsen Slapen JA/NEE
  description: ''
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: POETSEN_SLAPEN_JA
    id: poetsen_slapen_ja
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionName: POETSEN_SLAPEN_JA
    id: poetsen_slapen_ja
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: POETSEN_SLAPEN_NEE
    id: poetsen_slapen_nee
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionName: POETSEN_SLAPEN_NEE
    id: poetsen_slapen_nee
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - poetsen_slapen_ja
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Woonkamer
          notify_phone: iphone_helmer
          message_phone_tag: huisstatus_slaapstand
          message_phone_group: huisstatus
          message_phone_persistent: true
          message_phone_body: Huis wordt in slaapstand gezet
          message_phone_title: Huis Status
      - service: script.woning_zet_woning_in_slaapstand
        data:
          verlichting_werkkamer_helmer_uit: true
          tv_woonkamer_uit: true
          verlichting_woonkamer_uit: true
          voice_response_uit: false
    - conditions:
      - condition: trigger
        id:
        - poetsen_slapen_nee
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Woonkamer
          notify_phone: iphone_helmer
          message_phone_tag: huisstatus_slaapstand
          message_phone_group: huisstatus
          message_phone_persistent: true
          message_phone_body: Huis wordt NIET in slaapstand gezet.
          message_phone_title: Huis Status
  mode: single
- id: '1702507934257'
  alias: Slaapkamer - Presence Slaapkamer - Motion UIT!
  description: Als we beiden slapen, dan bewegingsdetectie UIT. Of als één iemand
    niet thuis is en de ander slaapt, dan bewegingsdetectie UIT.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.count_person_slaapkamer
    above: 0
    id: slaapkamer_1
  - platform: state
    entity_id:
    - sensor.count_person_slaapkamer
    to: '1'
    id: slaapkamer_1
  - platform: state
    entity_id:
    - sensor.count_person_slaapkamer
    to: '2'
    id: slaapkamer_2
  - platform: state
    entity_id:
    - sensor.count_person_slaapkamer
    to: '0'
    id: slaapkamer_0
  condition:
  - condition: time
    after: '20:00:00'
    before: 08:30:00
    weekday:
    - sun
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - slaapkamer_1
      sequence:
      - if:
        - condition: or
          conditions:
          - condition: not
            conditions:
            - condition: zone
              entity_id: person.helmer_zandbergen
              zone: zone.home
          - condition: not
            conditions:
            - condition: zone
              entity_id: person.regina_zandbergen
              zone: zone.home
        then:
        - service: input_boolean.turn_on
          target:
            entity_id: input_boolean.presense_slaapkamer_motion_off
          data: {}
    - conditions:
      - condition: trigger
        id:
        - slaapkamer_2
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.presense_slaapkamer_motion_off
        data: {}
    - conditions:
      - condition: trigger
        id:
        - slaapkamer_0
      sequence:
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.presense_slaapkamer_motion_off
        data: {}
  mode: single
- id: '1702942883225'
  alias: Assist - Hoeveel laadpalen zijn beschikbaar?
  description: ''
  trigger:
  - platform: conversation
    command:
    - Hoeveel laadpalen zijn er beschikbaar
    - Check hoeveel ladpalen er beschikbaar zijn
    - Is er een laadpaal beschikbaar
  condition: []
  action:
  - service: script.laadpaal_notificatie_check_laadpaal_beschikbaar
    data: {}
  mode: single
- id: '1702943200464'
  alias: Assist - Hoeveel range heeft de BMW i4 nog?
  description: ''
  trigger:
  - platform: conversation
    command:
    - Hoeveel bereik heeft de bmw nog
    - hoeveel batterij heeft de bmw nog
    - hoeveel bereik heeft de i4 nog
    - hoeveel batterij heeft de i4 nog
    - hoeveel range heeft de bmw nog
    - hoeveel range heeft de i4 nog
  condition: []
  action:
  - service: script.notificatie_iphone_v6
    data:
      action_phone_action_enabled: none
      notify_phone: iphone_helmer
      persoon: helmer
      notify_location: away
      message_phone_body: De range van de BMW is ongeveer {{     states('sensor.i4_edrive40_remaining_range_electric')
        }} kilometer.
      message_phone_tag: bereik_bmw
      message_phone_group: bmw
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
      message_phone_title: Bereik BMW i4
  - service: script.sonos_audio_notificatie_v6
    data:
      media_ruimte: Werkkamer Helmer
      message_tts_pre_notify: false
      message_tts_body: De range van de BMW is ongeveer {{ states('sensor.i4_edrive40_remaining_range_electric')
        }} kilometer.
  mode: single
- id: '1703625967947'
  alias: Top 2000 - iOS Actions
  description: Actie om te informeren over Top 2000 Tracks en DJ's (door middel van
    iOS Action).
  trigger:
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: top2000_currenttrack
      actionName: top2000_currenttrack
    id: top2000_currenttrack
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: top2000_prevtrack
      actionName: top2000_prevtrack
    id: top2000_previoustrack
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: top2000_currentdj
      actionName: top2000_currentdj
    id: top2000_currentdj
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: top2000_nextdj
      actionName: top2000_nextdj
    id: top2000_nextdj
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - top2000_currenttrack
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_body: Speelt nu ({{ as_timestamp(state_attr('sensor.top_2000_track_current_basic','from'))
            | timestamp_custom("%H:%M:%S") }}-{{ as_timestamp(state_attr('sensor.top_2000_track_current_basic','until'))
            | timestamp_custom("%H:%M:%S") }}) {{ state_attr('sensor.top_2000_track_current_basic','artist')}}
            - {{state_attr('sensor.top_2000_track_current_basic','song')}}
          message_phone_tag: top2000_currenttrack
          message_phone_group: top2000
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_title: Top 2000 - Current Track
    - conditions:
      - condition: trigger
        id:
        - top2000_previoustrack
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_body: ({{ as_timestamp(state_attr('sensor.top_2000_track_previous_basic','from'))
            | timestamp_custom("%H:%M:%S") }}-{{ as_timestamp(state_attr('sensor.top_2000_track_previous_basic','until'))
            | timestamp_custom("%H:%M:%S") }}) {{ state_attr('sensor.top_2000_track_previous_basic','artist')}}
            - {{state_attr('sensor.top_2000_track_previous_basic','song')}}
          message_phone_tag: top2000_previoustrack
          message_phone_group: top2000
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_title: Top 2000 - Previous Track
    - conditions:
      - condition: trigger
        id:
        - top2000_currentdj
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_body: 'Van {{ as_timestamp(state_attr(''sensor.top_2000_show_current'',''from''))
            | timestamp_custom("%H:%M") }} tot {{ as_timestamp(state_attr(''sensor.top_2000_show_current'',''until''))
            | timestamp_custom("%H:%M") }} {{ state_attr(''sensor.top_2000_presenter_current'',''name'')}} '
          message_phone_tag: top2000_currentdj
          message_phone_group: top2000
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_title: Top 2000 - Current DJ
    - conditions:
      - condition: trigger
        id:
        - top2000_nextdj
      sequence:
      - service: script.notificatie_iphone_v6
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_body: 'Van {{ as_timestamp(state_attr(''sensor.top_2000_show_upcoming'',''from''))
            | timestamp_custom("%H:%M") }} tot {{ as_timestamp(state_attr(''sensor.top_2000_show_upcoming'',''until''))
            | timestamp_custom("%H:%M") }} {{ state_attr(''sensor.top_2000_presenter_upcoming'',''name'')}} '
          message_phone_tag: top2000_upcomingdj
          message_phone_group: top2000
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_title: Top 2000 - Upcoming DJ
  mode: single
- id: '1703877954860'
  alias: 'Notification script '
  description: ''
  trigger: []
  condition: []
  action:
  - service: script.notification_script_v10_github
    data:
      notify_device:
      - iPhone
      - Sonos Speaker
      message_room:
      - Woonkamer
      - Werkkamer JohnDoe
      - Keuken
      message_person: JohnDoe
      message_person_priority: true
      message_tv_body: Example Message
      notify_tv: lg_c4_woonkamer
      message_tts_pre_notify: false
      message_tts_body: Dit is een testbericht.
      action_phone_action_enabled: none
      notify_phone:
      - iPhone JohnDoe
      notify_location: home
      message_phone_body: Dit is een bericht
      message_phone_title: Titel
      message_phone_tag: device_status
      message_phone_group: device
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
  mode: single
- id: '1703877978762'
  alias: 'Notification script '
  description: ''
  trigger: []
  condition: []
  action:
  - service: script.notification_script_v10_github
    data:
      notify_device:
      - iPhone
      - Sonos Speaker
      message_room:
      - Woonkamer
      - Werkkamer JohnDoe
      - Keuken
      message_person: JohnDoe
      message_person_priority: true
      message_tv_body: Example Message
      notify_tv: lg_c4_woonkamer
      message_tts_pre_notify: false
      message_tts_body: Dit is een testbericht.
      action_phone_action_enabled: none
      notify_phone:
      - iPhone JohnDoe
      notify_location: home
      message_phone_body: Dit is een bericht
      message_phone_title: Titel
      message_phone_tag: device_status
      message_phone_group: device
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
  mode: single
- id: '1704490740374'
  alias: Media Remote - Symfonisk Remote Gen 2 (Helmer) v3
  description: ''
  triggers:
  - event_type: zha_event
    event_data:
      device_ieee: 38:5b:44:ff:fe:7f:b6:00
      endpoint_id: 3
      cluster_id: 64640
      command: multi_press_complete
      args:
      - 0
      - 2
      params:
        previous_position: 0
        total_number_of_presses_counted: 2
    enabled: true
    id: two_dot_multi_press
    trigger: event
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: toggle
    id: play_pause
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: volume_up
    id: volume_up
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: volume_down
    id: volume_down
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: track_previous
    id: previous
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: track_next
    id: next
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: dots_1_short_release
    id: one_dot_short_press
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: dots_2_short_release
    id: two_dot_short_press
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: dots_2_long_press
    id: two_dot_long_press
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: dots_1_long_press
    id: one_dot_long_press
    trigger: mqtt
  - topic: zigbee2mqtt/Symfonisk Remote WK Helmer/action
    payload: dots_2_double_press
    id: two_dot_multi_press
    trigger: mqtt
  conditions: []
  actions:
  - variables:
      symfonisk_media_speler: "{% set mediaplayer = states('input_select.current_selected_room_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} media_player.badkamer_sonos {% elif
        mediaplayer == 'Keuken' %} media_player.keuken_sonos {% elif mediaplayer ==
        'Slaapkamer' %} media_player.slaapkamer_helmer_sonos {% elif mediaplayer ==
        'Werkkamer Helmer' %} media_player.werkkamer_helmer_sonos {% elif mediaplayer
        == 'Werkkamer Regina' %} media_player.werkkamer_regina_sonos {% elif mediaplayer
        == 'Woonkamer' %} media_player.woonkamer_sonos {% else %} media_player.woonkamer_sonos
        {% endif %}  \n"
      symfonisk_ruimte: "{% set mediaplayer = states('input_select.current_selected_room_symfonisk_remote_wk_helmer')
        %} {% if mediaplayer == 'Badkamer' %} badkamer {% elif mediaplayer == 'Keuken'
        %} keuken {% elif mediaplayer == 'Slaapkamer' %} slaapkamer {% elif mediaplayer
        == 'Werkkamer Helmer' %}werkkamer_helmer{% elif mediaplayer == 'Werkkamer
        Regina' %} werkkamer_regina {% elif mediaplayer == 'Woonkamer' %} woonkamer
        {% else %} woonkamer {% endif %}  \n"
      symfonisk_remote_device_ieee: 38:5b:44:ff:fe:7f:b6:00
      symfonisk_remote_user: helmer
      button_one_dot_single_press_playlist: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
      button_two_dot_single_press_playlist: '{{ states(''input_text.two_dot_active_playlist_remote_wk_helmer'')}}'
  - choose:
    - conditions:
      - condition: trigger
        id:
        - play_pause
      sequence:
      - data: {}
        target:
          entity_id: '{{symfonisk_media_speler}}'
        action: media_player.media_play_pause
    - conditions:
      - condition: trigger
        id:
        - volume_up
      sequence:
      - if:
        - condition: state
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
          state: Verlichting
        then:
        - data:
            brightness_step_pct: 10
          target:
            area_id: '{{symfonisk_ruimte}}'
          action: light.turn_on
        else:
        - data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
          action: media_player.volume_up
    - conditions:
      - condition: trigger
        id:
        - volume_down
      sequence:
      - if:
        - condition: state
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
          state: Verlichting
        then:
        - data:
            brightness_step_pct: -10
          target:
            area_id: '{{symfonisk_ruimte}}'
          action: light.turn_on
        else:
        - data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
          action: media_player.volume_down
    - conditions:
      - condition: trigger
        id:
        - previous
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Ruimte
        then:
        - data:
            cycle: true
          target:
            entity_id:
            - input_select.current_selected_room_symfonisk_remote_wk_helmer
          action: input_select.select_previous
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
          action: input_select.select_previous
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
          action: media_player.media_previous_track
    - conditions:
      - condition: trigger
        id:
        - next
      sequence:
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Ruimte
        then:
        - data:
            cycle: true
          target:
            entity_id:
            - input_select.current_selected_room_symfonisk_remote_wk_helmer
          action: input_select.select_next
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Playlist
        then:
        - data:
            cycle: true
          target:
            entity_id: input_select.sonos_favorites_symfonisk_remote_wk_helmer
          action: input_select.select_next
      - if:
        - condition: state
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
          state: Track
        then:
        - data: {}
          target:
            entity_id: '{{symfonisk_media_speler}}'
          action: media_player.media_next_track
    - conditions:
      - condition: trigger
        id:
        - one_dot_short_press
      sequence:
      - data:
          source: '{{button_one_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
        action: media_player.select_source
    - conditions:
      - condition: trigger
        id:
        - two_dot_short_press
      sequence:
      - data:
          source: '{{button_two_dot_single_press_playlist}}'
        target:
          entity_id: '{{symfonisk_media_speler}}'
        action: media_player.select_source
    - conditions:
      - condition: trigger
        id:
        - one_dot_long_press
      sequence:
      - data:
          cycle: true
        target:
          entity_id: input_select.current_status_symfonisk_remote_wk_helmer
        action: input_select.select_next
      - data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
        action: input_boolean.turn_on
    - conditions:
      - condition: trigger
        id:
        - two_dot_long_press
      sequence:
      - data_template:
          value: '{{states(''input_select.sonos_favorites_symfonisk_remote_wk_helmer'')}}'
          entity_id: input_text.two_dot_active_playlist_remote_wk_helmer
        action: input_text.set_value
      - data: {}
        target:
          entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
        action: input_boolean.turn_on
    - conditions:
      - condition: trigger
        id:
        - two_dot_multi_press
      sequence:
      - data:
          cycle: true
        target:
          entity_id: input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer
        action: input_select.select_next
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: state
      entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
      state: 'on'
    then:
    - data:
        media_player_entity: media_player.woonkamer_sonos
        ruimte: werkkamer_helmer
        persoon: helmer
        notify_location: home
        notify_phone: iphone_helmer
        message_tv_body: Testbericht op LG 4
        message_phone_body: "Ruimte: {{ states('input_select.current_selected_room_symfonisk_remote_wk_helmer')}}
          Bediening: {{ states('input_select.status_select_muziek_verlichting_symfonisk_remote_wk_helmer')}}
          Voorkeuze:  \n1 - {{states('input_select.sonos_favorites_symfonisk_remote_wk_helmer')
          }}  \n2 - {{states('input_text.two_dot_active_playlist_remote_wk_helmer')
          }}\n"
        message_phone_title: Remote WK Helmer
        message_phone_tag: symfonisk_remote_wk_helmer
        message_phone_group: symfonisk_remote
        message_phone_persistent: true
        action_phone_action_enabled: none
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_1_phone_title: BMW i4 op slot doen
      enabled: true
      action: script.notificatie_iphone_v7
    - data: {}
      target:
        entity_id: input_boolean.notificatie_symfonish_status_change_remote_wk_helmer
      action: input_boolean.turn_off
  mode: restart
- id: '1706570467273'
  alias: 3D Printer - Bijna klaar!
  description: ''
  triggers:
  - entity_id:
    - sensor.justprint_print_status
    to: finish
    id: print_complete
    trigger: state
    from: running
  - entity_id:
    - sensor.sovol_sv06_plus_progress
    above: 90
    below: 93
    id: print_almost_complete
    enabled: false
    trigger: numeric_state
  - value_template: '{{ (((states(''sensor.justprint_remaining_time'') | float)) |
      round(0)) <= 3 }}'
    id: print_3minute
    trigger: template
  - entity_id:
    - sensor.justprint_print_status
    to: finish
    id: print_complete_lamp_uit
    trigger: state
    from: running
    for:
      hours: 0
      minutes: 5
      seconds: 0
  conditions: []
  actions:
  - if:
    - condition: trigger
      id:
      - print_almost_complete
    then:
    - metadata: {}
      data:
        notify_device:
        - iPhone
        - Sonos Speaker
        message_room:
        - Woonkamer
        - Werkkamer Helmer
        - Keuken
        message_person: Helmer
        message_person_priority: false
        message_tv_body: 3D Print is voor {{states('sensor.sovol_sv06_plus_progress')}}%
          gereed.
        notify_tv: lg_c4_woonkamer
        message_tts_pre_notify: false
        message_tts_body: De 3D print is voor {{states('sensor.sovol_sv06_plus_progress')}}%
          gereed.
        action_phone_action_enabled: none
        notify_ios_device:
        - iPhone Helmer
        notify_location: away
        message_phone_body: De 3D print is voor {{states('sensor.sovol_sv06_plus_progress')}}%
          gereed.
        message_phone_title: 3D Printer
        message_phone_tag: 3dprinter_gereed
        message_phone_group: 3dprinter
        message_phone_persistent: true
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_title: BMW i4 op slot doen
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: BMW_I4_FLASH_LIGHT
        action_2_phone_title: Knipper lampen
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
      action: script.notification_script_v10
  - if:
    - condition: trigger
      id:
      - print_3minute
    then:
    - action: script.notificatie_lg_tv_1
      metadata: {}
      data:
        notify_tv: lg_c4_woonkamer
        message_tv_body: De 3d print is over ongeveer {{ (((states('sensor.justprint_remaining_time')
          | float)) | round(0))}} minuten klaar.
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_body: 'De 3d print is over ongeveer {{ (((states(''sensor.justprint_remaining_time'')
          | float)) | round(0))}} minuten klaar.  '
        message_phone_title: 3D Printer
        message_phone_tag: 3dprinter_klaar
        message_phone_group: 3dprinter
        message_phone_persistent: true
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_title: BMW i4 op slot doen
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: BMW_I4_FLASH_LIGHT
        action_2_phone_title: Knipper lampen
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
    - action: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Keuken
        message_tts_pre_notify: false
        message_tts_body: De 3d print is over ongeveer {{ (((states('sensor.justprint_remaining_time')     |
          float)) | round(0))}} minuten klaar.
  - if:
    - condition: trigger
      id:
      - print_complete
    then:
    - metadata: {}
      data:
        notify_device:
        - iPhone
        - Sonos Speaker
        message_room:
        - Woonkamer
        - Werkkamer Helmer
        - Keuken
        message_person: Helmer
        message_person_priority: false
        message_tv_body: 3D Print is gereed.
        notify_tv: woonkamer_tv
        message_tts_pre_notify: true
        message_tts_body: De 3D print is gereed.
        action_phone_action_enabled: none
        notify_ios_device:
        - iPhone Helmer
        notify_location: away
        message_phone_body: De 3D print is gereed.
        message_phone_title: 3D Printer
        message_phone_tag: 3dprinter_gereed
        message_phone_group: 3dprinter
        message_phone_persistent: true
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_title: BMW i4 op slot doen
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: BMW_I4_FLASH_LIGHT
        action_2_phone_title: Knipper lampen
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
      action: script.notification_script_v10
      enabled: false
  - if:
    - condition: trigger
      id:
      - print_complete_lamp_uit
    then:
    - action: light.turn_off
      metadata: {}
      data: {}
      target:
        entity_id: light.justprint_chamber_light
  mode: single
- id: '1706606940643'
  alias: MS Teams - Meeting Status
  description: ''
  trigger:
  - platform: webhook
    allowed_methods:
    - POST
    local_only: true
    webhook_id: -mM7TfqROHe1fpp47oF2US-O-
  condition: []
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: template
          value_template: '{{ trigger.json.presence_status == ''Available'' }}'
        - condition: template
          value_template: '{{ trigger.json.presence_status == ''Busy'' }}'
        - condition: template
          value_template: '{{ trigger.json.presence_status == ''Activity Available''
            }}'
        - condition: template
          value_template: '{{ trigger.json.presence_status == ''Activity Busy'' }}'
      sequence:
      - service: script.notification_script_v10
        metadata: {}
        data:
          notify_device:
          - iPhone
          message_room:
          - Woonkamer
          - Werkkamer Helmer
          message_person: Helmer
          message_person_priority: true
          notify_tv: woonkamer_tv
          message_tts_pre_notify: false
          action_phone_action_enabled: none
          notify_ios_device:
          - iPhone Helmer
          notify_location: away
          message_phone_body: 'Teams status : Available or Busy'
          message_phone_title: Teams
          message_phone_tag: msteams_status
          message_phone_group: msteams
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
        enabled: false
    - conditions:
      - condition: template
        value_template: '{{ trigger.json.presence_status == ''Away'' }}'
      sequence:
      - service: script.notification_script_v10
        metadata: {}
        data:
          notify_device:
          - iPhone
          message_room:
          - Woonkamer
          - Werkkamer Helmer
          message_person: Helmer
          message_person_priority: true
          notify_tv: woonkamer_tv
          message_tts_pre_notify: false
          message_tts_body: Dit is een testbericht.
          action_phone_action_enabled: none
          notify_ios_device:
          - iPhone Helmer
          notify_location: away
          message_phone_body: 'Teams status : AWAY'
          message_phone_title: Teams
          message_phone_tag: msteams_status
          message_phone_group: msteams
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
        enabled: false
    - conditions:
      - condition: template
        value_template: '{{ trigger.json.presence_status == ''Activity In A Call''
          }}'
      sequence:
      - service: script.notification_script_v10
        metadata: {}
        data:
          notify_device:
          - iPhone
          message_room:
          - Woonkamer
          - Werkkamer Helmer
          message_person: Helmer
          message_person_priority: true
          notify_tv: woonkamer_tv
          message_tts_pre_notify: false
          action_phone_action_enabled: none
          notify_ios_device:
          - iPhone Helmer
          notify_location: away
          message_phone_body: Teams Meeting gestart!
          message_phone_title: Microsoft Teams
          message_phone_tag: msteams_status
          message_phone_group: msteams
          message_phone_persistent: true
          action_1_phone_single: BMW_I4_LOCK_CAR
          action_1_phone_title: BMW i4 op slot doen
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: BMW_I4_FLASH_LIGHT
          action_2_phone_title: Knipper lampen
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
      - service: input_select.select_option
        data:
          option: Presenting-Meeting
        target:
          entity_id: input_select.focus_status_iphone_helmer
    default:
    - service: script.notification_script_v10
      metadata: {}
      data:
        notify_device:
        - iPhone
        message_room:
        - Woonkamer
        - Werkkamer Helmer
        message_person: Helmer
        message_person_priority: true
        notify_tv: woonkamer_tv
        message_tts_pre_notify: false
        message_tts_body: Dit is een testbericht.
        action_phone_action_enabled: none
        notify_ios_device:
        - iPhone Helmer
        notify_location: away
        message_phone_body: 'Onbekende Status : - {{ trigger.json.presence_status}}
          -

          '
        message_phone_title: Microsoft Teams
        message_phone_tag: msteams_status_unknown
        message_phone_group: msteams
        message_phone_persistent: true
        action_1_phone_single: BMW_I4_LOCK_CAR
        action_1_phone_title: BMW i4 op slot doen
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: BMW_I4_FLASH_LIGHT
        action_2_phone_title: Knipper lampen
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
      enabled: false
  mode: single
- id: '1707262757618'
  alias: Webhook - iCloudPD Helmer Sync
  description: ''
  trigger:
  - platform: webhook
    allowed_methods:
    - POST
    - PUT
    local_only: true
    webhook_id: -ZqkNXeux94cpfgdBkABtXqaj
  condition: []
  action:
  - service: script.notification_script_v10
    metadata: {}
    data:
      notify_device:
      - iPhone
      message_room: Woonkamer
      message_person: Helmer
      message_person_priority: false
      message_tv_body: Example Message
      notify_tv: lg_c4_woonkamer
      message_tts_pre_notify: false
      message_tts_body: Dit is een testbericht.
      action_phone_action_enabled: none
      notify_ios_device:
      - iPhone Helmer
      notify_location: away
      message_phone_body: iCloudPD webhook - {{ trigger.json }} -
      message_phone_tag: unraid_icloudpd
      message_phone_group: unraid
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
      message_phone_title: Unraid - iCloudPD
  mode: single
- id: '1711320305369'
  alias: Dashboard - Woonkamer - Restart at high memory usage
  description: Als het geheugengebruik van de Surface Pro 4 > 60% is dan Edge herstarten.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.ha_dashboard_woonkamer_memoryusage
    above: 60
  condition: []
  action:
  - service: button.press
    metadata: {}
    data: {}
    target:
      entity_id: button.ha_dashboard_woonkamer_ha_dashboard_kill_msedge
  - service: button.press
    metadata: {}
    data: {}
    target:
      entity_id: button.ha_dashboard_woonkamer_ha_dashboard_startpage
  - service: button.press
    metadata: {}
    data: {}
    target:
      entity_id: button.ha_dashboard_woonkamer_ha_dashboard_f11
  mode: single
- id: '1721066294816'
  alias: Er wordt op de bel gedrukt.
  description: ''
  triggers:
  - entity_id:
    - binary_sensor.voordeur_doorbell
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - parallel:
    - metadata: {}
      data:
        media_ruimte: Woonkamer
        message_tts_pre_notify: false
        message_tts_body: De deurbel gaat. Er staat iemand voor de deur.
        message_tts_priority: true
      action: script.sonos_audio_notificatie_v6
    - metadata: {}
      data:
        media_ruimte: Werkkamer Regina
        message_tts_pre_notify: false
        message_tts_body: De deurbel gaat. Er staat iemand voor de deur.
        message_tts_priority: true
      action: script.sonos_audio_notificatie_v6
    - metadata: {}
      data:
        media_ruimte: Keuken
        message_tts_pre_notify: false
        message_tts_body: De deurbel gaat. Er staat iemand voor de deur.
        message_tts_priority: true
      action: script.sonos_audio_notificatie_v6
      enabled: false
  mode: single
- id: '1721730124917'
  alias: Oven - Timer afgelopen - Gerecht gereed.
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.keuken_combi_stoomoven_resterende_tijd
    below: 3
  condition: []
  action:
  - parallel:
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Werkkamer Regina
        message_tts_pre_notify: true
        message_tts_body: De timer van de oven loopt over ongeveer 1 minuut af. Het
          gerecht is dus bijna gereed.
      enabled: true
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Werkkamer Helmer
        message_tts_pre_notify: true
        message_tts_body: De timer van de oven loopt over ongeveer 1 minuut af. Het
          gerecht is dus bijna gereed.
      enabled: true
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Keuken
        message_tts_pre_notify: true
        message_tts_body: De timer van de oven loopt over ongeveer 1 minuut af. Het
          gerecht is dus bijna gereed.
  - delay:
      hours: 0
      minutes: 0
      seconds: 20
      milliseconds: 0
  - parallel:
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Werkkamer Regina
        message_tts_pre_notify: true
        message_tts_body: Haal het gerecht uit de oven.
      enabled: true
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Werkkamer Helmer
        message_tts_pre_notify: true
        message_tts_body: Haal het gerecht uit de oven.
      enabled: true
    - service: script.sonos_audio_notificatie_v6
      metadata: {}
      data:
        media_ruimte: Keuken
        message_tts_pre_notify: true
        message_tts_body: Haal het gerecht uit de oven.
  mode: single
- id: '1721730138391'
  alias: Oven - Timer afgelopen - Gerecht gereed.
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.keuken_combi_stoomoven_resterende_tijd
    below: 0.8
  condition: []
  action:
  - service: script.sonos_audio_notificatie_v6
    metadata: {}
    data:
      media_ruimte: Keuken
      message_tts_pre_notify: false
      message_tts_body: De oven is klaar!
  mode: single
- id: '1722330926086'
  alias: Te vochting op de vliering, afzuiging op 90%
  description: Na een reboot van HA of na een check elke 2 uur start hij de fan.
  triggers:
  - event: start
    trigger: homeassistant
  - minutes: '5'
    trigger: time_pattern
  conditions:
  - condition: numeric_state
    entity_id: sensor.temperatuur_vliering_humidity
    above: 58
  actions:
  - target:
      entity_id:
      - fan.open_air_mini
    data:
      percentage: 30
    action: fan.turn_on
  mode: single
- id: '1722675262431'
  alias: Afwasmachine - START v2
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  trigger:
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: running
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_afwasmachine
      state: idle
    - condition: state
      entity_id: input_select.status_afwasmachine
      state: completed
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.afwasmachine_v2_started
  - service: input_select.select_option
    data:
      option: running
    target:
      entity_id: input_select.status_afwasmachine
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.afwasmachine_v2_ready
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ (now().timestamp() + states(''input_number.afwasmachine_v2_expected_runtime'')
        | float(0)) | timestamp_local() }}'
    target:
      entity_id: input_datetime.afwasmachine_v2_expected_time_to_stop
  mode: single
- id: '1722675382189'
  alias: Afwasmachine v2 - STOP
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  trigger:
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: program_ended
  condition:
  - condition: state
    entity_id: input_select.status_afwasmachine
    state: running
  action:
  - service: input_datetime.set_datetime
    data:
      datetime: '{{ now() }}'
    target:
      entity_id: input_datetime.afwasmachine_v2_stopped
  - service: input_select.select_option
    data:
      option: completed
    target:
      entity_id: input_select.status_afwasmachine
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.afwasmachine_v2_ready
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.afwasmachine_v2_aantal_wasbeurten
  mode: single
- id: '1722675401231'
  alias: Afwasmachine v2 - Notificatie UITgeschakeld
  description: Track het moment dat de vaatwasmachine notificatie (handmatig) wordt
    uitgeschakeld  na een voltooide wasbeurt.
  trigger:
  - platform: state
    entity_id:
    - input_boolean.afwasmachine_v2_ready
    to: 'off'
  - platform: state
    entity_id:
    - input_select.status_afwasmachine
    to: completed
    for:
      hours: 0
      minutes: 23
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.keuken_afwasmachine_deur
    to: 'on'
    enabled: false
  - platform: state
    entity_id:
    - sensor.keuken_afwasmachine_status
    to: Waiting to start
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.status_afwasmachine
      state: running
    - condition: state
      entity_id: input_select.status_afwasmachine
      state: completed
  action:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.afwasmachine_v2_last_emptied
    action: input_datetime.set_datetime
  - data:
      option: idle
    target:
      entity_id: input_select.status_afwasmachine
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.afwasmachine_v2_ready
    action: input_boolean.turn_off
  - data: {}
    action: script.vaatwasser_notification_scheduler_v25
  mode: single
- id: '1722805351704'
  alias: Test - Movie Night Scène Keuken
  description: ''
  trigger: []
  condition: []
  action:
  - action: scene.create
    metadata: {}
    data:
      scene_id: keuken_movie_night_01
      snapshot_entities:
      - light.ruimte_keuken
  mode: single
- id: '1722805607388'
  alias: Woonkamer - Apple TV start Afspelen - Movie Night AAN? v3.0
  description: Als de AppleTV gaat afspelen, Movie Night AAN? Dan lampen dimmen (als
    ze aan staan).
  trigger:
  - platform: state
    entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
  - platform: state
    entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: ATV-PLAY-long
    enabled: false
  - platform: state
    entity_id:
    - media_player.woonkamer_appletv
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-STOPPLAY
    from: playing
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.hbo.hbonow
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: ATV-PLAY-short
      sequence:
      - action: scene.create
        metadata: {}
        data:
          scene_id: keuken_movie_night_01
          snapshot_entities:
          - light.keuken_eettafel
          - light.keuken_koffiecorner
          - light.keuken_eiland
      - action: light.turn_off
        metadata: {}
        data: {}
        target:
          area_id: keuken
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - ATV-STOPPLAY
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
      - action: scene.turn_on
        metadata: {}
        target:
          entity_id: scene.keuken_movie_night_01
      - action: scene.delete
        metadata: {}
        data: {}
        target:
          entity_id: scene.keuken_movie_night_01
  mode: single
- id: '1723317227734'
  alias: Nacht - Verlichting Overkappingen Uit
  description: Verlichting Overkappingen uitschakelen
  triggers:
  - at: '23:30:00'
    trigger: time
  conditions: []
  actions:
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - scene.alle_overkappingen_nachtlampje
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      label_id: tuinverlichting_uit_s_nachts
  mode: single
- id: '1723586520156'
  alias: ESPresense - Room Change v2
  description: Als een ruimte wijzigd, dan de variabelen updaten.
  trigger:
  - platform: state
    entity_id:
    - sensor.presence_iphone_helmer
    id: helmer
  - platform: state
    entity_id:
    - sensor.presence_regina_iphone
    id: regina
  condition:
  - condition: template
    value_template: '{{ trigger.from_state.state != trigger.to_state.state }}'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - helmer
      sequence:
      - action: script.espresense_update_previous_current_room_v2
        metadata: {}
        data:
          person: Helmer
          previous_room: '{{ trigger.from_state.state }}

            '
          current_room: '{{ trigger.to_state.state }}

            '
      - data:
          previous_room: '{{ trigger.from_state.state }}

            '
          current_room: '{{ trigger.to_state.state }}

            '
          person: helmer
        action: script.presense_follow_music
    - conditions:
      - condition: trigger
        id:
        - regina
      sequence:
      - action: script.espresense_update_previous_current_room_v2
        metadata: {}
        data:
          person: Regina
          previous_room: '{{ trigger.from_state.state }}

            '
          current_room: '{{ trigger.to_state.state }}

            '
      - data:
          previous_room: '{{ trigger.from_state.state }}

            '
          current_room: '{{ trigger.to_state.state }}

            '
          person: regina
        action: script.presense_follow_music
  mode: single
- id: '1723592320643'
  alias: Slapen - Koffiecorner ook UIT
  description: ''
  triggers:
  - entity_id:
    - light.zone_woonkamer_standaard
    to: 'off'
    trigger: state
  conditions:
  - condition: time
    after: '21:30:00'
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
    before: 07:00:00
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - light.ruimte_keuken
      - light.keuken_kerst_huisjes
      - light.keuken_kerstkaarsen
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      label_id: slapen_uit
  mode: single
- id: '1723823676266'
  alias: Beginnen met Koken -> Verlichting boven eiland aan!
  description: Als de kookplaat aan gaat, dan het eiland verlichten.
  triggers:
  - type: power
    device_id: 20a0e6205a0626393215009f4d53fd11
    entity_id: f9844d51cfbcc2789529d6779f143597
    domain: sensor
    trigger: device
    above: 5
  conditions:
  - condition: and
    conditions:
    - condition: sun
      after: sunset
      after_offset: -0:15:00
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'
  actions:
  - action: hue.activate_scene
    metadata: {}
    data: {}
    target:
      entity_id:
      - scene.keuken_eiland_koken
  mode: single
- id: '1723880888376'
  alias: Notificatie - Staan er nog ramen of deuren open? v2
  description: 'Notificatie als er nog deuren of ramen open staan. '
  trigger:
  - platform: time
    at: input_datetime.tijdstip_melding_raam_deur_open
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.notificatie_raam_deur_open_aan
      state: 'on'
    - condition: or
      conditions:
      - condition: numeric_state
        entity_id: sensor.count_windows_open
        above: 0
      - condition: numeric_state
        entity_id: sensor.count_doors_open
        above: 0
  action:
  - data: {}
    action: script.notificatie_scheduler_raam_and_deur_open
  mode: single
- id: '1723892148969'
  alias: Kraan aan en Lamp badkamer - Douche Mode AAN
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.watermeter_water_gebruik
    above: 10
    below: 12.5
    id: Douche
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: numeric_state
    entity_id:
    - sensor.watermeter_water_gebruik
    above: 13
    id: Bad
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.ruimte_badkamer
      state: 'on'
    - condition: state
      entity_id: binary_sensor.presence_badkamer
      state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Douche
      sequence:
      - action: hue.activate_scene
        metadata: {}
        data: {}
        target:
          entity_id: scene.badkamer_douchen
    - conditions:
      - condition: trigger
        id:
        - Bad
      sequence:
      - action: hue.activate_scene
        metadata: {}
        data: {}
        target:
          entity_id: scene.badkamer_relax_bad
  mode: single
- id: '1724525097801'
  alias: Badkamer - Ontvochtigen na douchen of badderen
  description: Na een reboot van HA of na een check elke 2 uur start hij de fan.
  triggers:
  - event: start
    trigger: homeassistant
  - minutes: '6'
    trigger: time_pattern
  - entity_id:
    - sensor.open_air_mini_badkamer_humidity
    above: 62
    below: 65
    id: hoger-62
    trigger: numeric_state
  - entity_id:
    - sensor.open_air_mini_badkamer_humidity
    above: 65.5
    below: 70
    id: hoger-65
    trigger: numeric_state
  - entity_id:
    - sensor.open_air_mini_badkamer_humidity
    above: 70
    id: hoger-70
    trigger: numeric_state
  conditions:
  - condition: and
    conditions:
    - condition: or
      conditions:
      - condition: numeric_state
        entity_id: sensor.open_air_mini_badkamer_humidity
        above: 62
        enabled: true
    - condition: state
      entity_id: input_boolean.ducobox_fan_manual_override
      state: 'off'
  actions:
  - if:
    - condition: trigger
      id:
      - hoger-65
    then:
    - target:
        entity_id:
        - fan.open_air_mini_open_air_mini
      data:
        percentage: 70
      action: fan.turn_on
  - if:
    - condition: trigger
      id:
      - hoger-70
    then:
    - target:
        entity_id:
        - fan.open_air_mini_open_air_mini
      data:
        percentage: 90
      action: fan.turn_on
  - if:
    - condition: trigger
      id:
      - hoger-62
    then:
    - target:
        entity_id:
        - fan.open_air_mini_open_air_mini
      data:
        percentage: 30
      action: fan.turn_on
  mode: single
- id: '1724544179910'
  alias: Badkamer - Luchtvochtigheid weer op nivau - Duco Box terug naar Default
  description: Na een reboot van HA of na een check elke 2 uur start hij de fan.
  triggers:
  - entity_id:
    - sensor.open_air_mini_badkamer_humidity
    below: 62
    trigger: numeric_state
  - trigger: homeassistant
    event: start
  - trigger: time_pattern
    hours: /2
  conditions:
  - condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.open_air_mini_badkamer_humidity
      above: 0
      below: 62
    - condition: state
      entity_id: input_boolean.ducobox_fan_manual_override
      state: 'off'
  actions:
  - target:
      entity_id:
      - fan.open_air_mini_open_air_mini
    data:
      percentage: 15
    action: fan.turn_on
  mode: single
- id: '1685977813756'
  alias: Woonkamer - Apple TV start Afspelen - Movie Night AAN? v2
  description: Als de AppleTV gaat afspelen, Movie Night AAN? Dan lampen dimmen (als
    ze aan staan).
  trigger:
  - platform: state
    entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.atv_woonkamer
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.atv_woonkamer
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.atv_woonkamer
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.atv_woonkamer
      attribute: app_id
      state: com.hbo.hbonow
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: ATV-PLAY-short
      sequence:
      - data:
          transition: 5
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
  mode: single
- id: '1725214105532'
  alias: iOS Event - Uitschakelen - ALLES - CATEGORIE - SLAPEN
  description: Event om Verlichting, Speakers uit te schakelen als we vertrekken.
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: VERTREK_UIT_LAMP_SONOS
    id: vertrek_uit_lamp_sonos
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: VERTREK_UIT_LAMP_SONOS
      actionName: VERTREK_UIT_LAMP_SONOS
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: vertrek_uit_lamp_sonos
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: VERTREK_UIT_SONOS
    id: vertrek_uit_sonos
  - platform: event
    event_type: ios.action_fired
    event_data:
      actionID: VERTREK_UIT_SONOS
      actionName: VERTREK_UIT_SONOS
    context:
      user_id:
      - d7d415c87c414334ab06bf5407088df8
    id: vertrek_uit_sonos
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - vertrek_uit_lamp_sonos
    then:
    - action: script.uitschakelen_alles_categorie_slapen
      metadata: {}
      data:
        binnenverlichting_uitschakelen: true
        buitenverlichting_plafonds_uitschakelen: false
        buitenverlichting_wandlampen_uitschakelen: false
        sonos_speakers_uitschakelen: true
        tvs_uitschakelen: false
        slaap_modus: false
  - if:
    - condition: trigger
      id:
      - vertrek_uit_sonos
    then:
    - action: script.uitschakelen_alles_categorie_slapen
      metadata: {}
      data:
        binnenverlichting_uitschakelen: false
        buitenverlichting_plafonds_uitschakelen: false
        buitenverlichting_wandlampen_uitschakelen: false
        sonos_speakers_uitschakelen: true
        tvs_uitschakelen: false
        slaap_modus: false
  mode: single
- id: '1725221184920'
  alias: Vertrek van huis
  description: Als iemand van huis vertrekt, dan checken of er nog lampen branden
    en dat melden
  trigger:
  - platform: zone
    entity_id: person.helmer_zandbergen
    zone: zone.home
    event: leave
  condition: []
  action:
  - variables:
      message_iphone: '{% set mode = (states(''sensor.count_lights_on'') | int) %}
        {% if mode == 1 %}Er staat nog {{ states(''sensor.count_lights_on'')}} lamp
        aan{% elif mode > 1 %}Er staan nog {{ states(''sensor.count_lights_on'')}}
        lampen aan{% else %}Er staan geen lampen aan{% endif %} {% set mode = (states(''sensor.count_speakers_on'')
        | int) %}{% if mode == 1 %}en er staat nog {{ states(''sensor.count_speakers_on'')}}
        Sonos speaker aan.{% elif mode > 1 %}en er staan nog {{ states(''sensor.count_speakers_on'')}}
        Sonos speakers aan{% else %}en er staan geen Sonos speakers aan.{% endif %}

        '
  - if:
    - condition: or
      conditions:
      - condition: numeric_state
        entity_id: sensor.count_speakers_on
        above: 0
      - condition: numeric_state
        entity_id: sensor.count_lights_on
        above: 0
    then:
    - metadata: {}
      data:
        action_phone_action_enabled: three
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_body: '{{ message_iphone }}'
        message_phone_title: Vertrek je van huis?
        message_phone_tag: iphone_vertrek_lampen
        message_phone_group: iphone_vertrek
        message_phone_persistent: true
        action_1_phone_single: VERTREK_UIT_LAMP_SONOS
        action_1_phone_title: Alle Sonos + Lampen UIT
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:lightbulb.slash
        action_1_phone_destructive: false
        action_2_phone_single: VERTREK_UIT_SONOS
        action_2_phone_title: Alle Lampen UIT
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb.slash
        action_2_phone_destructive: false
        action_3_phone_single: VERTREK_UIT_SONOS
        action_3_phone_title: Alle Sonos UIT
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:hifispeaker.2.fill
        action_3_phone_destructive: false
      action: script.notificatie_iphone_v7
  mode: single
- id: '1726757922797'
  alias: 'Afwasmachine sessie gepland '
  description: Als er een afwassessie is gepland, dan een uur voordat deze gaat beginnen
    nog even een reminder sturen (zodat alles nog even in de vaatwasser gezet kan
    worden).
  triggers:
  - entity_id:
    - sensor.keuken_afwasmachine_status
    to: waiting_to_start
    id: afwas-gepland
    trigger: state
  - value_template: '{% set start_time_str = states(''sensor.keuken_afwasmachine_start_om'')
      %}

      {% set start_time = as_timestamp(now().replace(hour=start_time_str[:2]|int,
      minute=start_time_str[3:5]|int, second=0)) %}

      {% set current_time = as_timestamp(now()) %}

      {% set time_difference = start_time - current_time %}

      {{ time_difference | timestamp_custom(''%H:%M'', false) == "00:58"}}

      '
    id: afwas-start60min
    trigger: template
  - value_template: '{% set start_time_str = states(''sensor.keuken_afwasmachine_start_om'')
      %}

      {% set start_time = as_timestamp(now().replace(hour=start_time_str[:2]|int,
      minute=start_time_str[3:5]|int, second=0)) %}

      {% set current_time = as_timestamp(now()) %}

      {% set time_difference = start_time - current_time %}

      {{ time_difference | timestamp_custom(''%H:%M'', false) < "00:30"}}'
    id: afwas-start30min
    trigger: template
  - event_type: ios.notification_action_fired
    event_data:
      actionName: afwas_afbreken
    id: afwas-afbreken
    trigger: event
  - event_type: ios.notification_action_fired
    event_data:
      actionName: afwas_nustart
    id: afwas-startdirect
    trigger: event
  conditions: []
  actions:
  - if:
    - condition: trigger
      id:
      - afwas-gepland
    then:
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: two
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: home
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Afwasmachine start met zijn programma (uitgesteld) om
          {{states('sensor.keuken_afwasmachine_start_om')}}.
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: two
        ruimte: Werkkamer Helmer
        notify_phone: iphone_regina
        persoon: helmer
        notify_location: home
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Afwasmachine start met zijn programma (uitgesteld) om
          {{states('sensor.keuken_afwasmachine_start_om')}}.
  - if:
    - condition: trigger
      id:
      - afwas-start60min
    then:
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: two
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Afwasmachine gaat over  {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: one
        ruimte: Werkkamer Helmer
        notify_phone: iphone_regina
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Afwasmachine gaat over  {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
  - if:
    - condition: trigger
      id:
      - afwas-start30min
    then:
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: two
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: LET OP - Afwasmachine gaat over  {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: one
        ruimte: Werkkamer Helmer
        notify_phone: iphone_regina
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: LET OP - Afwasmachine gaat over  {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
    - action: script.1716215162458
      metadata: {}
      data:
        media_ruimte: Werkkamer Helmer
        message_tv_body: Afwasmachine start over      {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten.
        message_tts_pre_notify: true
        message_tts_body: De afwasmachine gaat over      {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
    - action: script.1716215162458
      metadata: {}
      data:
        media_ruimte: Woonkamer
        message_tv_body: Afwasmachine start over      {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten.
        message_tts_pre_notify: true
        message_tts_body: De afwasmachine gaat over      {{states('sensor.keuken_afwasmachine_starttijd')}}
          minuten starten
  - if:
    - condition: trigger
      id:
      - afwas-afbreken
    then:
    - action: switch.turn_off
      metadata: {}
      data: {}
      target:
        entity_id: switch.keuken_afwasmachine_schakel_in
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Bezig ingeplande sessie te stoppen. Wacht op de bevestiging,
          dit duurt ongeveer 30 seconden.
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        ruimte: Werkkamer Helmer
        notify_phone: iphone_regina
        persoon: regina
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Bezig ingeplande sessie te stoppen. Wacht op de bevestiging,
          dit duurt ongeveer 30 seconden.
    - delay:
        hours: 0
        minutes: 0
        seconds: 30
        milliseconds: 0
    - if:
      - condition: state
        entity_id: sensor.keuken_afwasmachine_status
        state: 'off'
      then:
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Ingeplande sessie afwasmachine is succesvol afgebroken.
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_regina
          persoon: regina
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Ingeplande sessie afwasmachine is succesvol afgebroken.
      else:
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: one
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Ingeplande sessie afwasmachine NIET verwijderd.
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: one
          ruimte: Werkkamer Helmer
          notify_phone: iphone_regina
          persoon: regina
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Ingeplande sessie afwasmachine NIET verwijderd.
  - if:
    - condition: trigger
      id:
      - afwas-startdirect
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id: button.keuken_afwasmachine_start
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        ruimte: Werkkamer Helmer
        notify_phone: iphone_helmer
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Bezig afwasmachine te starten, een ogenblik geduld.
    - action: script.notificatie_iphone_v7
      metadata: {}
      data:
        action_phone_action_enabled: none
        ruimte: Werkkamer Helmer
        notify_phone: iphone_regina
        persoon: helmer
        notify_location: away
        message_phone_title: Afwasmachine
        message_phone_tag: afwasmachine_uitgesteld
        message_phone_group: afwasmachine
        message_phone_persistent: true
        action_1_phone_single: afwas_afbreken
        action_1_phone_title: Programma Annuleren
        action_1_phone_activationmode: background
        action_1_phone_icon: sfsymbols:envelope.badge
        action_1_phone_destructive: false
        action_2_phone_single: afwas_nustart
        action_2_phone_title: Start Programma direct
        action_2_phone_activationmode: background
        action_2_phone_icon: sfsymbols:lightbulb
        action_2_phone_destructive: false
        action_3_phone_single: BMW_I4_HORN_SOUND
        action_3_phone_title: Gebruik claxon
        action_3_phone_activationmode: background
        action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
        action_3_phone_destructive: false
        message_phone_body: Bezig afwasmachine te starten, een ogenblik geduld.
    - delay:
        hours: 0
        minutes: 0
        seconds: 10
        milliseconds: 0
    - if:
      - condition: state
        entity_id: sensor.keuken_afwasmachine_status
        state: running
      then:
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Afwasmachine is gestart.
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: none
          ruimte: Werkkamer Helmer
          notify_phone: iphone_regina
          persoon: regina
          notify_location: home
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: Afwasmachine is gestart.
      else:
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: one
          ruimte: Werkkamer Helmer
          notify_phone: iphone_helmer
          persoon: helmer
          notify_location: away
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: De afwasmachine is NIET gestart
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          action_phone_action_enabled: one
          ruimte: Werkkamer Helmer
          notify_phone: iphone_regina
          persoon: helmer
          notify_location: home
          message_phone_title: Afwasmachine
          message_phone_tag: afwasmachine_uitgesteld
          message_phone_group: afwasmachine
          message_phone_persistent: true
          action_1_phone_single: afwas_afbreken
          action_1_phone_title: Programma Annuleren
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:envelope.badge
          action_1_phone_destructive: false
          action_2_phone_single: afwas_nustart
          action_2_phone_title: Start Programma direct
          action_2_phone_activationmode: background
          action_2_phone_icon: sfsymbols:lightbulb
          action_2_phone_destructive: false
          action_3_phone_single: BMW_I4_HORN_SOUND
          action_3_phone_title: Gebruik claxon
          action_3_phone_activationmode: background
          action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
          action_3_phone_destructive: false
          message_phone_body: De afwasmachine is NIET gestart
  mode: single
- id: '1730466790648'
  alias: IT Hok - Temperatuur te hoog!
  description: Als de deur dicht zit loopt de temperatuur op. Stuur een notificatie
    als de temperatuur te ver oploopt.
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.temperatuur_it_hok_temperature
    above: 31
  conditions: []
  actions:
  - action: script.notificatie_iphone_v7
    metadata: {}
    data:
      action_phone_action_enabled: none
      notify_phone: iphone_helmer
      persoon: helmer
      notify_location: away
      message_phone_body: De temperatuur in het IT hok is nu {{states('sensor.temperatuur_it_hok_temperature')}}
        graden.
      message_phone_title: Temp IT hok te hoog!
      message_phone_tag: temperatuur_ithok
      message_phone_group: ithok
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
    enabled: false
  - action: script.it_hok_temperatuur_te_hoog
    metadata: {}
    data: {}
    enabled: false
  - action: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.notificatie_script_ithok_temperatuur
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.notificatie_script_test01
      - input_boolean.notificatie_script_ithok_temperatuur
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.notificatie_script_ithok_temperatuur_snooze
  mode: restart
- id: '1730555932428'
  alias: test v2 - Notifications & Announcements
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
- id: '1730928738045'
  alias: Notifications & Announcements - TEST
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      text_to_speech_engine: tts.home_assistant_cloud
      trigger_state: 'on'
      trigger_state_entity:
      - input_boolean.notificatie_script_test01
      include_notify: enable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: "\U0001F4E2 IT Hok Temperatuur"
      notify_interruption_level: time-sensitive
      include_tts_announcement: disable_tts_announcement
      media_player:
      - media_player.woonkamer_sonos
      notify_tts_message: Dit is een test
      include_persistent_notification: disabled_persistent_notification
      persistent_message: De temperatuur is nu {{states('sensor.temperatuur_it_hok_temperature')
        | round(1)}} °C
      persistent_title: "\U0001F4E2 IT Hok Temperatuur"
      notify_message: De temperatuur is nu {{states('sensor.temperatuur_it_hok_temperature')}}
        °C
- id: '1731272607818'
  alias: 'Fingerprint scanner '
  description: ''
  triggers:
  - allowed_methods:
    - POST
    - PUT
    local_only: true
    webhook_id: -ZqkNXeux94cpfgdBkABtXqaj
    trigger: webhook
  conditions: []
  actions:
  - metadata: {}
    data:
      notify_device:
      - iPhone
      message_room: Woonkamer
      message_person: Helmer
      message_person_priority: false
      message_tv_body: Example Message
      notify_tv: lg_c4_woonkamer
      message_tts_pre_notify: false
      message_tts_body: Dit is een testbericht.
      action_phone_action_enabled: none
      notify_ios_device:
      - iPhone Helmer
      notify_location: away
      message_phone_body: webhook - {{ trigger.json }} -
      message_phone_tag: unraid_icloudpd
      message_phone_group: unraid
      message_phone_persistent: true
      action_1_phone_single: BMW_I4_LOCK_CAR
      action_1_phone_title: BMW i4 op slot doen
      action_1_phone_activationmode: background
      action_1_phone_icon: sfsymbols:envelope.badge
      action_1_phone_destructive: false
      action_2_phone_single: BMW_I4_FLASH_LIGHT
      action_2_phone_title: Knipper lampen
      action_2_phone_activationmode: background
      action_2_phone_icon: sfsymbols:lightbulb
      action_2_phone_destructive: false
      action_3_phone_single: BMW_I4_HORN_SOUND
      action_3_phone_title: Gebruik claxon
      action_3_phone_activationmode: background
      action_3_phone_icon: sfsymbols:speaker.badge.exclamationmark
      action_3_phone_destructive: false
      message_phone_title: Unraid - iCloudPD
    action: script.notification_script_v10
  mode: single
- id: '1731343053553'
  alias: Voordeur - Er staat iemand bij de deur
  description: Er wordt niet aangebeld, maar als er iemand bij de voordeur wordt gedetecteerd,
    dan alvast melden.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: 'on'
      trigger_state_entity:
      - binary_sensor.voordeurbel_persoon_gedetecteerd
      include_notify: enable_mobile_app_notify
      notify_title: "\U0001F4E2 Voordeur"
      notify_message: Er staat iemand bij de deur.
      notify_interruption_level: time-sensitive
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      notify_device:
      - b08939ed8278dae8f339c8694f032293
- id: '1731343081170'
  alias: Voordeur - Er staat iemand bij de deur
  description: Er wordt niet aangebeld, maar als er iemand bij de voordeur wordt gedetecteerd,
    dan alvast melden.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: 'on'
      trigger_state_entity:
      - binary_sensor.voordeur_person_detected
      include_notify: enable_mobile_app_notify
      notify_title: "\U0001F4E2 Voordeur"
      notify_message: Er staat iemand bij de deur.
      notify_interruption_level: time-sensitive
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
- id: '1731511113793'
  alias: Notification - Afwasmachine - Ready - iPhones
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: program_ended
      trigger_state_entity:
      - sensor.keuken_afwasmachine_status
      global_conditions:
      - condition: state
        entity_id: sensor.keuken_afwasmachine_status
        state: program_ended
        for:
          hours: 0
          minutes: 1
          seconds: 0
        enabled: false
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F37D️Afwasmachine"
      notify_message: De Afwasmachine is klaar.
      notify_interruption_level: passive
- id: '1731511839614'
  alias: Notificatie - Afwasmachine - Ingepland - iPhones
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: button_any_state
      trigger_state_entity:
      - sensor.keuken_afwasmachine_status
      global_conditions:
      - condition: state
        entity_id: sensor.keuken_afwasmachine_status
        state:
        - program_ended
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F37D️Afwasmachine"
      notify_message: De Afwasmachine is klaar.
      notify_interruption_level: passive
- id: '1731513008724'
  alias: Notificatie - Afwasmachine - Ingepland - iPhones (actions)
  description: ''
  use_blueprint:
    path: Blackshome/state-notifications-and-actions.yaml
    input:
      start_trigger_state_entity:
      - sensor.keuken_afwasmachine_status
      global_conditions:
      - condition: state
        entity_id: sensor.keuken_afwasmachine_status
        state: waiting_to_start
        enabled: false
      start_notify_device:
      - b08939ed8278dae8f339c8694f032293
      start_message: ' Afwasmachine start met zijn programma (uitgesteld) om {{states(''sensor.keuken_afwasmachine_start_om'')}}.'
      start_title: Afwasmachine
      start_notify_interruption_level: time-sensitive
      include_start_action_buttons:
      - enable_start_action_button_1
      - enable_start_action_button_2
      start_action_button_1: Programma Annuleren
      start_action_button_2: Start Programma direct
      include_start_action_button_confirmation: enable_start_action_button_confirmation
      start_time_delay:
        hours: 0
        minutes: 15
        seconds: 0
      start_action_button_confirmation_title: Afwasmachine
      start_action_button_confirmation_message: Programma geannuleerd.
      start_action_button_2_confirmation_message: Programma wordt gestart.
      start_action_button_stop_confirmation_message: Actie afgebroken
      start_time_delay_confirmation_message: Tijd verstreken
      include_start_auto_actions: []
      start_action_1:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: switch.keuken_afwasmachine_schakel_in
      start_action_2:
      - action: button.press
        metadata: {}
        data: {}
        target:
          entity_id: button.keuken_afwasmachine_start
      include_start_notify: enable_start_notify_options
      start_trigger_state: waiting_to_start
      start_time_delay_state:
        hours: 0
        minutes: 2
        seconds: 0
- id: '1733338148633'
  alias: Stroomverbruik huis > 10kW -> Laadpaal beperken?
  description: Als het huis meer dan 10.000W aan stroom verbruikt, check of de Laadpaal
    staat te laden en de BMW aangekoppeld is, dan de laadsnelheid van de BMW beperken.
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.p1_meter_vermogen
    above: 8000
    id: 4000w-
  - trigger: numeric_state
    entity_id:
    - sensor.p1_meter_vermogen
    above: 1000
    id: 1000w-
    below: 2000
  - trigger: numeric_state
    entity_id:
    - sensor.p1_meter_vermogen
    above: 2000
    id: 2000w-
    below: 4000
  - trigger: numeric_state
    entity_id:
    - sensor.p1_meter_vermogen
    id: < 1000 W
    below: 5000
  conditions:
  - condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.laadpaal_vermogen
      above: 200
      enabled: false
    - condition: state
      entity_id: sensor.i4_edrive40_laadstatus
      state: charging
  actions:
  - if:
    - condition: numeric_state
      entity_id: select.i4_edrive40_ac_charging_limit
      above: 8
    then:
    - action: select.select_option
      metadata: {}
      data:
        option: '8'
      target:
        entity_id: select.i4_edrive40_ac_charging_limit
    enabled: false
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.grootverbruikers_vermogen
          below: 2000
        - condition: state
          entity_id: sensor.i4_edrive40_laadstatus
          state: charging
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - action: select.select_option
        metadata: {}
        data:
          option: '16'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    - conditions:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.grootverbruikers_vermogen
          below: 4000
          above: 2000
        - condition: state
          entity_id: sensor.i4_edrive40_laadstatus
          state: charging
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - action: select.select_option
        metadata: {}
        data:
          option: '12'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    - conditions:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.grootverbruikers_vermogen
          above: 4000
        - condition: state
          entity_id: sensor.i4_edrive40_laadstatus
          state: charging
      sequence:
      - action: select.select_option
        metadata: {}
        data:
          option: '8'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    enabled: false
  - choose:
    - conditions:
      - condition: trigger
        id:
        - 1000w-
      sequence:
      - action: select.select_option
        metadata: {}
        data:
          option: '12'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    - conditions:
      - condition: trigger
        id:
        - 2000w-
      sequence:
      - action: select.select_option
        metadata: {}
        data:
          option: '10'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    - conditions:
      - condition: trigger
        id:
        - 4000w-
      sequence:
      - action: select.select_option
        metadata: {}
        data:
          option: '8'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
    - conditions:
      - condition: trigger
        id:
        - < 1000 W
      sequence:
      - action: select.select_option
        metadata: {}
        data:
          option: '16'
        target:
          entity_id: select.i4_edrive40_ac_charging_limit
  mode: single
- id: '1733843922412'
  alias: Twinkly Effect Rotation
  description: ''
  triggers:
  - trigger: time_pattern
    minutes: /5
  conditions:
  - condition: time
    before: '23:30:00'
  - condition: sun
    after: sunset
  - condition: or
    conditions:
    - condition: state
      entity_id: light.kerstboom_vlaggenmast
      state: 'on'
  - condition: state
    entity_id: input_boolean.new_years_eve_program
    state:
    - 'on'
    enabled: false
  actions:
  - action: light.turn_on
    data_template:
      entity_id: light.twinkly_voortuin
      effect: '{% set effects = state_attr(''light.twinkly_voortuin'', ''effect_list'')
        %} {% set current_effect = state_attr(''light.twinkly_voortuin'', ''effect'')
        %} {% set next_index = (effects.index(current_effect) + 1) % effects | length
        %} {{ effects[next_index] }}

        '
  mode: single
- id: '1735215880584'
  alias: Kerst - Kerstverlichting Overdag Inschakelen
  description: Alle lampen getagged met 'Kerst - Overdag' worden via deze automation
    ingeschakeld tijdens de kerstperiode (als Christmas Mode AAN staat).
  triggers:
  - trigger: time
    at: 08:00:00
  conditions:
  - condition: state
    entity_id: input_boolean.christmas_mode
    state: 'on'
  actions:
  - action: light.turn_on
    metadata: {}
    data: {}
    target:
      label_id: kerst_overdag
  mode: single
- id: '1735667334749'
  alias: NYE - Oudjaarsavond Programma
  description: Deze automation start het oudjaarsavond programma voor de buitenverlichting.
  triggers:
  - trigger: template
    value_template: '{% set now = now() %} {% set check_hour = state_attr(''input_datetime.start_time_new_years_eve'',
      ''hour'') %} {% set check_minute = state_attr(''input_datetime.start_time_new_years_eve'',
      ''minute'') %} {{ now.month == 12 and now.day == 31 and now.hour == check_hour
      and now.minute == check_minute }}'
    id: start_oudjaarsavond
  - trigger: template
    value_template: '{% set now = now() %} {% set check_hour = state_attr(''input_datetime.end_time_new_years_eve'',
      ''hour'') %} {% set check_minute = state_attr(''input_datetime.end_time_new_years_eve'',
      ''minute'') %} {{ now.month == 1 and now.day == 1 and now.hour == check_hour
      and now.minute == check_minute }}'
    id: stop_oudjaarsavond
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - start_oudjaarsavond
      sequence:
      - action: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.new_years_eve_program
      - action: scene.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: scene.zone_voortuin_alle_wandlampen_kleurexplosie
    - conditions:
      - condition: trigger
        id:
        - stop_oudjaarsavond
      sequence:
      - action: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.new_years_eve_program
      - action: scene.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: scene.zone_voortuin_alle_wandlampen_ontspannen
  mode: single
- id: '1735670720180'
  alias: Twinkly New Years Eve Rotation
  description: ''
  triggers:
  - trigger: time_pattern
    minutes: /1
  conditions:
  - condition: state
    entity_id: input_boolean.new_years_eve_program
    state: 'on'
  actions:
  - action: light.turn_on
    data_template:
      entity_id: light.twinkly_voortuin
      effect: '{% set effects = state_attr(''light.twinkly_voortuin'', ''effect_list'')
        %} {% set current_effect = state_attr(''light.twinkly_voortuin'', ''effect'')
        %} {% set next_index = (effects.index(current_effect) + 1) % effects | length
        %} {{ effects[next_index] }}

        '
  mode: single
- id: '1736869365237'
  alias: Notification - AdGuard uitgeschakeld.
  description: ''
  use_blueprint:
    path: Blackshome/state-notifications-and-actions.yaml
    input:
      start_trigger_state_entity:
      - switch.adguard_home_30_bescherming
      - switch.adguard_home_31_bescherming
      include_start_notify: enable_start_notify_options
      start_notify_device:
      - b08939ed8278dae8f339c8694f032293
      start_title: 'AdGuard '
      start_message: '{% if states(''switch.adguard_home_30_bescherming'') == ''off''
        and states(''switch.adguard_home_31_bescherming'') != ''off'' %}   AdGuard
        30 is uitgeschakeld. {% elif states(''switch.adguard_home_30_bescherming'')
        != ''off'' and states(''switch.adguard_home_31_bescherming'') == ''off'' %}     AdGuard
        31 is uitgeschakeld. {% elif (states(''switch.adguard_home_30_bescherming'')
        == ''off'' and states(''switch.adguard_home_31_bescherming'') == ''off'')
        %}   AdGuard 30 en AdGuard 31 zijn beide uitgeschakeld. {% elif states(''switch.adguard_home_30_bescherming'')
        == ''on'' and states(''switch.adguard_home_31_bescherming'') == ''on'' %}       Beide
        AdGuards zijn ingeschakeld {% else %}  AdGuard status onbekend {% endif %}'
      start_trigger_state: 'off'
      include_start_action_buttons:
      - enable_start_action_button_1
      - enable_start_action_button_2
      include_start_action_button_confirmation: enable_start_action_button_confirmation
      start_action_button_1: Alle AdGuard AAN
      start_action_button_2: Alle AdGuard UIT
      start_time_delay:
        hours: 0
        minutes: 30
        seconds: 0
      start_action_button_confirmation_title: AdGuard
      start_action_button_confirmation_message: Alle AdGuards worden nu ingeschakeld
      start_action_button_2_confirmation_message: Alle AdGuard worden nu uitgeschakeld
        (en over 30 minuten weer automatisch ingeschakeld).
      start_time_delay_confirmation_message: Alle AdGuards worden weer ingeschakeld
      include_start_auto_actions:
      - enable_start_action_1
      end_trigger_state: 'on'
      end_trigger_state_entity:
      - switch.adguard_home_30_bescherming
      - switch.adguard_home_31_bescherming
      include_end_notify: enable_end_notify_options
      end_notify_device:
      - b08939ed8278dae8f339c8694f032293
      end_title: 'AdGuard '
      end_message: '{% if states(''switch.adguard_home_30_bescherming'') == ''on''
        and states(''switch.adguard_home_31_bescherming'') != ''on'' %}   AdGuard
        30 is ingeschakeld. {% elif states(''switch.adguard_home_30_bescherming'')
        != ''on'' and states(''switch.adguard_home_31_bescherming'') == ''on'' %}     AdGuard
        31 is ingeschakeld. {% elif (states(''switch.adguard_home_30_bescherming'')
        == ''off'' and states(''switch.adguard_home_31_bescherming'') == ''off'')
        %}   AdGuard 30 en AdGuard 31 zijn beide uitgeschakeld. {% elif states(''switch.adguard_home_30_bescherming'')
        == ''on'' and states(''switch.adguard_home_31_bescherming'') == ''on'' %}       Beide
        AdGuards zijn ingeschakeld {% else %}  AdGuard status onbekend {% endif %}'
      start_notify_interruption_level: time-sensitive
      start_action_1:
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.adguard_home_30_bescherming
          - switch.adguard_home_31_bescherming
      start_action_2:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.adguard_home_30_bescherming
          - switch.adguard_home_31_bescherming
      include_end_action_buttons:
      - enable_end_action_button_1
      - enable_end_action_button_2
      end_action_button_1: Alle AdGuard AAN
      end_action_button_2: Alle AdGuards UIT
      include_end_action_button_confirmation: enable_end_action_button_confirmation
      end_action_button_confirmation_title: AdGuard
      end_action_button_confirmation_message: Alle AdGuard worden nu ingeschakeld
      end_action_button_2_confirmation_message: Alle AdGuard worden nu uitgeschakeld
        (en over 30 minuten weer automatisch ingeschakeld).
      end_time_delay_confirmation_message: Alle AdGuards worden weer ingeschakeld
      include_end_auto_actions:
      - enable_end_action_1
      end_action_1:
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.adguard_home_30_bescherming
          - switch.adguard_home_31_bescherming
      end_time_delay:
        hours: 0
        minutes: 1
        seconds: 0
      end_action_2:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.adguard_home_30_bescherming
          - switch.adguard_home_31_bescherming
- id: '1737403500139'
  alias: Notificatie - Wasdroger Ready - iPhones
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: program_ended
      trigger_state_entity:
      - sensor.bijkeuken_wasdroger_status
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify: enable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      - 9bc445709b8101c5e31520b3e1d72f05
      notify_title: "\U0001F455Wasdroger"
      notify_message: De Wasdroger is klaar.
      notify_interruption_level: passive
      notify_zone: zone.home
      include_notify_zone: zone_enabled
- id: '1737404086779'
  alias: Notificatie - Wasdroger Ready - Sonos
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: program_ended
      trigger_state_entity:
      - sensor.bijkeuken_wasdroger_status
      global_conditions:
      - condition: state
        entity_id: input_boolean.voice_response
        state: 'on'
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify: disable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      - 9bc445709b8101c5e31520b3e1d72f05
      notify_title: "\U0001F455Wasdroger"
      notify_message: De Wasdroger is klaar.
      notify_interruption_level: passive
      notify_zone: zone.home
      include_notify_zone: zone_enabled
      include_tts_announcement: enable_tts_announcement
      text_to_speech_engine: tts.home_assistant_cloud
      media_player:
      - media_player.woonkamer_sonos
      notify_tts_message: De Wasdroger is klaar.
      include_time: time_enabled
      after_time: '10:00:00'
      before_time: '22:30:00'
- id: '1737839948359'
  alias: Notificatie - 3D Print is over 3 minutesn klaar
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: ' De 3d print is over ongeveer {{  (((states(''sensor.justprint_remaining_time'')
        | float)) | round(0))}} minuten klaar.  '
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: "\U0001F5A8️ 3D Printer"
      trigger_state_entity:
      - sensor.justprint_remaining_time
      trigger_state: numeric_state_below
      below_state: 3
      notify_interruption_level: passive
      include_custom_actions: enable_custom_actions
      custom_actions:
      - action: notify.lg_c4_woonkamer
        metadata: {}
        data:
          message: ' De 3d print is over ongeveer {{  (((states(''sensor.justprint_remaining_time'')
            | float)) | round(0))}}minuten klaar.  '
          title: 3D Printer
- id: '1737887986380'
  alias: Notificatie - Oven op Temperatuur
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is op temperatuur
      notify_device:
      - 36a9c6c73eec74c307bba89cc844e15f
      - 7ad1224c50a5407fced9f97fa92b60fb
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_programmafase
      trigger_state: process_running
      below_state: 3
      notify_interruption_level: passive
      include_custom_actions: enable_custom_actions
      custom_actions:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: ' De oven is op temperatuur.'
            title: Oven
          enabled: true
      - data:
          datetime: '{{ now() }}'
        target:
          entity_id: input_datetime.oven_v2_op_temperatuur
        action: input_datetime.set_datetime
      - data: {}
        target:
          entity_id: input_boolean.oven_v2_op_temperatuur
        action: input_boolean.turn_on
      - data:
          option: op_temperatuur
        target:
          entity_id: input_select.status_oven_v2
        action: input_select.select_option
      - data:
          notify_phone: iphone_helmer
          notify_location: home
          message_phone_body: De oven is op temperatuur.
          message_phone_title: Oven
          message_phone_tag: oven_aan
          message_phone_group: oven
          message_phone_persistent: true
          media_room:
          - Werkkamer Helmer
          - Woonkamer
          media_person: Helmer
          media_person_priority: false
          message_tv_body: De oven staat nog aan.
          message_tts_pre_notify: true
          message_tts_body: De oven staat nog aan.
        enabled: true
        action: script.oven_notificatie_oven_aan_scheduler_v3
      global_conditions:
      - condition: state
        entity_id: input_datetime.oven_v2_op_temperatuur
        state: 'off'
        enabled: false
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1738089713426'
  alias: Notificatie - Afvalcontainer - Avondmelding
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state_entity:
      - input_button.notificatie_afvalcontainer_aan_de_weg
      include_notify: enable_mobile_app_notify
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - 7ad1224c50a5407fced9f97fa92b60fb
      notify_title: "\U0001F5D1️ Afvalcontainer"
      notify_message: '{% set container = states(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'')
        %} {% set dag = state_attr(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'',
        ''over_aantal_dagen'') %} {% if dag == 0 %}   {% set moment = ''vandaag''
        %} {% elif dag == 1 %}   {% set moment = ''morgen'' %} {% else %}   {% set
        moment = dag ~ '' dagen vanaf nu'' %} {% endif %}  De {{ container }} container
        wordt {{ moment }} geleegd. Staat de container al aan de weg?'
      notify_interruption_level: time-sensitive
      custom_actions:
      - action: notify.tv_woonkamer
        metadata: {}
        data:
          title: Afvalcontainer
          message: '{% set container = states(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'')
            %} {% set dag = state_attr(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'',
            ''over_aantal_dagen'') %} {% if dag == 0 %}   {% set moment = ''vandaag''
            %} {% elif dag == 1 %}   {% set moment = ''morgen'' %} {% else %}   {%
            set moment = dag ~ '' dagen vanaf nu'' %} {% endif %} De {{ container
            }} container wordt {{ moment }} geleegd.'
      include_custom_actions: enable_custom_actions
- id: '1738092921046'
  alias: Notificatie - Afvalcontainer - Staat hij nog aan de weg?
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state_entity:
      - input_button.notificatie_afvalcontainer_ophalen
      include_notify: enable_mobile_app_notify
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - 7ad1224c50a5407fced9f97fa92b60fb
      notify_title: "\U0001F5D1️ Afvalcontainer"
      notify_message: '{% set container = states(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'')
        %}  De {{ container }} container is vandaag geleegd. Staat de container al
        weer bij huis?'
      notify_interruption_level: time-sensitive
      custom_actions:
      - action: notify.tv_woonkamer
        data:
          title: Afvalcontainer
          message: '{% set container = states(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'')
            %} Staat de {{ container }} container al weer bij huis?'
      include_custom_actions: enable_custom_actions
- id: '1738093312017'
  alias: Afvalcontainer - Staat de container al weer bij huis?
  description: Notificatie als de afvalcontainer geleegd is en mogelijk nog niet bij
    huis staat?
  triggers:
  - at: input_datetime.tijdstip_melding_afval_container_morgen
    trigger: time
  conditions:
  - condition: template
    value_template: '{{ state_attr(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'',''over_aantal_dagen'')
      == 0 }}'
  actions:
  - action: input_button.press
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_button.notificatie_afvalcontainer_ophalen
  mode: single
- id: '1738331261540'
  alias: Notificatie - Combi-Stoomoven - Gerecht over 5 minuten klaar
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is over ongeveer {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
        minuten klaar.
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '5'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: state
        entity_id: input_datetime.oven_v2_op_temperatuur
        state: 'off'
        enabled: false
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: running
          enabled: true
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_programmafase
          state:
          - process_running
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_helmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1738342982391'
  alias: Notificatie - Combi-Stoomoven - Over 10 minuten klaar
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is over ongeveer {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
        minuten klaar.
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '10'
      below_state: 0
      notify_interruption_level: time-sensitive
      include_custom_actions: enable_custom_actions
      custom_actions:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: De oven is over ongeveer         {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
              minuten         klaar.
            title: Oven
          enabled: true
      global_conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: running
          enabled: true
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_programmafase
          state: '7938'
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
        - condition: state
          entity_id: input_boolean.guest_mode
          state: 'off'
      above_state: 0
      notify_zone: zone.home
      include_notify_zone: zone_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
      include_time: time_enabled
- id: '1738433573660'
  alias: Notificatie - Combi-Stoomoven - De Oven is klaar!
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is klaar!
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '0'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: program_ended
          enabled: false
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7938'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7942'
            enabled: true
        - condition: state
          entity_id: input_boolean.guest_mode
          state: 'off'
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_helmer
        state: 'on'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '23:00:00'
- id: '1738846877855'
  alias: SolarEdge - Automatic Limit Solar Export
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - sensor.p1_meter_vermogen
  - trigger: state
    entity_id:
    - input_boolean.solar_limit_export
    to: 'off'
    id: auto limit off
  - trigger: state
    entity_id:
    - input_boolean.solar_limit_export
    to: 'on'
    id: auto limit on
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: sun
        after: sunrise
      - condition: state
        entity_id: input_boolean.solar_limit_export
        state: 'on'
      sequence:
      - variables:
          current_limit: '{{ states(''number.solaredge_active_power_limit'') | float(1)
            }}'
          p1_value: '{{ states(''sensor.p1_meter_vermogen'') | float(0) }}'
          step: 100
          step_change: '{{ (p1_value / step) | round(0) | float }}'
          new_limit: '{{ (current_limit + step_change) | float }}'
          final_limit: '{{ new_limit if new_limit >= 1 and new_limit <= 100 else (1
            if new_limit < 1 else 100) }}

            '
      - if:
        - condition: template
          value_template: '{{ final_limit != current_limit }}'
        then:
        - action: number.set_value
          metadata: {}
          data:
            value: '{{ final_limit }}'
          target:
            entity_id: number.solaredge_active_power_limit
    - conditions:
      - condition: sun
        after: sunset
      sequence:
      - action: number.set_value
        metadata: {}
        data:
          value: '100'
        target:
          entity_id: number.solaredge_active_power_limit
    - conditions:
      - condition: state
        entity_id: input_boolean.solar_limit_export
        state: 'off'
      sequence:
      - action: number.set_value
        metadata: {}
        data:
          value: '100'
        target:
          entity_id: number.solaredge_active_power_limit
  mode: single
- id: '1738950675624'
  alias: Notificatie - Oven - Gestart en om x tijd klaar.
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is gestart en is om {{states('sensor.keuken_combi_stoomoven_einde_om')}}
        klaar.
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_einde_om
      trigger_state: button_any_state
      below_state: 0
      notify_interruption_level: time-sensitive
      include_custom_actions: enable_custom_actions
      custom_actions:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: ' De oven is gestart en is om {{states(''sensor.keuken_combi_stoomoven_einde_om'')}}
              klaar.'
            title: Oven
          enabled: true
      global_conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          state: unknown
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          state: '0'
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          state: unavailable
        enabled: false
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: running
          enabled: true
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7938'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7940'
        - condition: state
          entity_id: input_boolean.guest_mode
          state: 'off'
      above_state: 0
      notify_zone: zone.home
      include_notify_zone: zone_enabled
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1739794130035'
  alias: Clear - Tag testing
  description: ''
  triggers: []
  conditions: []
  actions:
  - action: script.notificatie_clear_iphone_v3
    metadata: {}
    data:
      notify_phone:
      - iPhone Helmer
      message_phone_tag: helmer
  mode: single
- id: '1740395212356'
  alias: Bambu Lab - AMS -> Luchtvochtigheid > 2
  description: Als de luchtvochtigheid in de Bambu Lab AMS te hoog wordt, dan een
    notificatie sturen.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: numeric_state_above
      trigger_state_entity:
      - sensor.justprint_ams_1_humidity_index
      above_state: 2
      time_delay_state:
        hours: 23
        minutes: 59
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_message: 'De luchtvochtheid van de Bambu Lab AMS is nu {{states(''sensor.justprint_ams_1_humidity_index'')}}. '
      notify_interruption_level: passive
      notify_title: "\U0001F4E2 Bambu Lab AMS"
      include_time: time_disabled
- id: '1740395277103'
  alias: Bambu Lab - AMS -> Luchtvochtigheid > 2
  description: Als de luchtvochtigheid in de Bambu Lab AMS te hoog wordt, dan een
    notificatie sturen.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: numeric_state_above
      trigger_state_entity:
      - sensor.justprint_ams_1_humidity_index
      above_state: 2
      time_delay_state:
        hours: 23
        minutes: 59
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_message: 'De luchtvochtheid van de Bambu Lab AMS is nu {{states(''sensor.justprint_ams_1_humidity_index'')}}. '
      notify_interruption_level: passive
      notify_title: "\U0001F4E2 Bambu Lab AMS"
      include_time: time_disabled
- id: '1740579556800'
  alias: Systeem - Zigbee2MQTT Bridge Status Change
  description: Als de Zigbee2MQTT Add-on disconnect, dan melding geven.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state_entity:
      - binary_sensor.zigbee2mqtt_bridge_connection_state
      global_conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: binary_sensor.zigbee2mqtt_bridge_connection_state
          state: 'on'
      time_delay_state:
        hours: 0
        minutes: 15
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F4E2 Zigbee"
      notify_message: 'De Zigbee2MQTT Add-on is niet verbonden. De huidige status
        is : [[{{states(''binary_sensor.zigbee2mqtt_bridge_connection_state'')}}]'
      notify_interruption_level: time-sensitive
- id: '1741090308259'
  alias: Duco Box - Turn OFF FAN Manual Override
  description: Als de Duco Box FAN snelheid handmatig is ingesteld, dan deze op het
    ingestelde tijdstip weer uitschakelen, zodat alles weer automatisch geregeld wordt.
  triggers:
  - trigger: time
    at: input_datetime.tijdstip_docubox_fan_override
  conditions: []
  actions:
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.ducobox_fan_manual_override
  mode: single
- id: '1741258051583'
  alias: mmWave - Schakel Find Switch uit na reboot of elk uur.
  description: De mmWave sensoren in de plafonds schakelen iedere keer na een reboot
    (of stroomonderbreking) hun 'Find Switch' weer in. Als deze switch ingeschakeld
    is meet de sensor de afstand tot een persoon. Dit is niet relevant voor het meten
    van aanwezigheid en zorgt voor minder zigbee verkeer. Deze moet dus uitgeschakeld
    staan. Daar zorgt deze automatisering voor.
  triggers:
  - trigger: time_pattern
    minutes: /15
  - trigger: homeassistant
    event: start
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: switch.woonkamer_mmwave_plafond_hal_find_switch
      state: 'on'
    - condition: state
      entity_id: switch.woonkamer_mmwave_plafond_keuken_find_switch
      state: 'on'
  actions:
  - action: switch.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - switch.woonkamer_mmwave_plafond_hal_find_switch
      - switch.woonkamer_mmwave_plafond_keuken_find_switch
  mode: single
- id: '1741436224467'
  alias: Waze - Update M365 Event Travel Time
  description: ''
  triggers:
  - trigger: time_pattern
    hours: /1
  conditions:
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.waze_event_locatie
      state: thuis
  actions:
  - action: homeassistant.update_entity
    metadata: {}
    data:
      entity_id:
      - sensor.m365_event_travel_time
  mode: single
- id: '1741624137673'
  alias: Afvalcontainer - Vandaag aan de weg!
  description: Notificatie (in de ochtend) als de afvalcontainer vandaag wordt opgehaald.
  triggers:
  - at: input_datetime.tijdstip_melding_afval_container_vandaag
    trigger: time
  conditions:
  - condition: template
    value_template: '{{ state_attr(''sensor.afvalinfo_krekensingel_eerstvolgende_container_en_dagen'',''over_aantal_dagen'')
      == 0 }}'
  actions:
  - action: input_button.press
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_button.notificatie_afvalcontainer_aan_de_weg
  mode: single
- id: '1742053284736'
  alias: Deurbel Motion - Snapshot opslaan.
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.g4_doorbell_pro_beweging
    to: 'on'
  - trigger: event
    event_type: status_change
    event_data:
      event_data:
        entity_id: event.g4_doorbell_pro_poe_doorbell
  conditions:
  - condition: state
    entity_id: input_boolean.ai_notification_deurbel_motion
    state: 'on'
  actions:
  - action: advanced_snapshot.take_snapshot
    metadata: {}
    data:
      setting_font_path: Arial.ttf
      setting_font_size: auto
      setting_font_color: black
      setting_bar_height: 7%
      setting_bar_color: white
      setting_bar_position: bottom
      crop_aspect_ratio: '16:9'
      camera_entity_id: camera.g4_doorbell_pro_high_resolution_channel
      file_path_backup: '{{ now().strftime(''%y%m%d'')}}-voordeur_deurbel.jpg'
      file_path: '{{ now().strftime(''%y%m%d'')}}-voordeur_deurbel.jpg'
      add_bar: true
      custom_text_left: Deurbel
      custom_text_middle: '{{ states(''sensor.weerstation_achtertuin_temperature'')
        }} °C'
      custom_text_right: '{{ now().strftime(''%d-%m-%y %H:%M:%S'') }}'
    enabled: true
  - action: notify.mobile_app_just_a_phone_max
    metadata: {}
    data:
      message: Er staat iemand voor de deur. AI is het beeld aan het analyseren. Hier
        heb je alvast de afbeelding.
      title: Deurbel
      data:
        tag: ai_deurbel
        image: /local/snapshots/{{ now().strftime('%y%m%d')}}-voordeur_deurbel.jpg
  - action: ai_task.generate_data
    metadata: {}
    data:
      task_name: Deurbelomschrijving
      instructions: 'Er staat iemand bij de voordeur.


        Instructies:

        - Omschrijf ieder zichtbaar persoon, dier en eventueel voertuigen in minder
        dan 250 characters. Als je kentekens of merken van auto''s herkend, vermeld
        deze dan ook.

        - tel personen

        - tel dieren

        - tel aantal voertuigen


        Als je twijfeld over informatie, laat deze informatie dan achterwege. Kentekens
        alleen benoemen als je 100% zeker bent. Ook logo''s op voertuigen benoemen
        als je zeker van je zaak bent.'
      entity_id: ai_task.google_ai_task
      structure:
        summary:
          description: Samenvatting van het beeld en de mensen die zichtbaar zijn.
          selector:
            text:
        person_count:
          description: Aantal mensen in beeld
          selector:
            number:
        animal_count:
          description: Aantal dieren in beeld
          selector:
            number:
      attachments:
        media_content_id: media-source://camera/camera.g4_doorbell_pro_high_resolution_channel
        media_content_type: image/jpeg
        metadata:
          title: Camer Voordeurbel High resolution channel
          thumbnail: /api/camera_proxy/camera.g4_doorbell_pro_high_resolution_channel
          media_class: video
          children_media_class:
          navigateIds:
          - {}
          - media_content_type: app
            media_content_id: media-source://camera
    response_variable: ai
  - action: input_text.set_value
    metadata: {}
    data:
      value: '{{ai.data.summary}}'
    target:
      entity_id: input_text.ai_deurbel_motion_samenvatting
  - action: notify.mobile_app_just_a_phone_max
    metadata: {}
    data:
      message: '{{ai.data.summary}}'
      title: "Deurbel ({{ai.data.person_count}} \U0001F468‍\U0001F9B0/ {{ai.data.animal_count}}
        \U0001F431)"
      data:
        tag: ai_deurbel
        image: /local/snapshots/{{ now().strftime('%y%m%d')}}-voordeur_deurbel.jpg
  - action: notify.ha_bot
    metadata: {}
    data:
      data:
        image: /local/snapshots/voordeur_deurbel.jpg
      title: "Deurbel ({{ai.data.person_count}} \U0001F468‍\U0001F9B0/ {{ai.data.animal_count}}
        \U0001F431)"
      message: '{{ai.data.summary}}'
    enabled: false
  mode: single
- id: '1742727428693'
  alias: Notificatie (Kritiek - Regina) - Combi-Stoomoven - Gerecht over 5 minuten
    klaar
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is over ongeveer {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
        minuten klaar.
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '5'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: state
        entity_id: input_datetime.oven_v2_op_temperatuur
        state: 'off'
        enabled: false
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: running
          enabled: true
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_programmafase
          state: '7938'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_regina
        state: 'on'
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1742728036237'
  alias: Notificatie - Combi-Stoomoven - Gerecht over 5 minuten klaar
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: disable_mobile_app_notify
      notify_message: De oven is over ongeveer {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
        minuten klaar.
      notify_device: []
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '5'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: enable_custom_actions
      custom_actions:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: De oven is over ongeveer         {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
              minuten         klaar.
            title: Oven
          enabled: true
      global_conditions:
      - condition: state
        entity_id: input_datetime.oven_v2_op_temperatuur
        state: 'off'
        enabled: false
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state:
          - in_use
          enabled: true
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_programmafase
          state:
          - process_running
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        - condition: state
          entity_id: input_boolean.guest_mode
          state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_disabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1742728791529'
  alias: Notificatie (Kritiek - Regina) - Combi-Stoomoven - De oven is klaar!
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is klaar!
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '0'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: program_ended
          enabled: false
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7938'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7942'
            enabled: true
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_regina
        state: 'on'
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '23:00:00'
- id: '1742728934061'
  alias: Notificatie - Combi-Stoomoven - De oven is klaar!
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: disable_mobile_app_notify
      notify_message: De oven is klaar!
      notify_device: []
      notify_title: ♨️ Oven
      trigger_state_entity:
      - sensor.keuken_combi_stoomoven_resterende_tijd
      trigger_state: '0'
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: enable_custom_actions
      custom_actions:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: De oven is klaar.
            title: Oven
          enabled: true
      global_conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: program_ended
          enabled: false
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7938'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7942'
            enabled: true
        - condition: state
          entity_id: input_boolean.guest_mode
          state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '23:00:00'
- id: '1742729808205'
  alias: Notificatie - KRITIEK TEST
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: De oven is over ongeveer {{states('sensor.keuken_combi_stoomoven_resterende_tijd')}}
        minuten klaar.
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: ♨️ Oven
      trigger_state_entity:
      - input_boolean.notificatie_kritische_meldingen
      trigger_state: button_any_state
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: state
        entity_id: input_datetime.oven_v2_op_temperatuur
        state: 'off'
        enabled: false
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: running
          enabled: true
        - condition: numeric_state
          entity_id: sensor.keuken_combi_stoomoven_resterende_tijd
          above: 0
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_programmafase
          state: '7938'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        enabled: false
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_helmer
        state: 'on'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
- id: '1743672122956'
  alias: AI - Vraag of de LEGO Lamp uitgezet moet worden.
  description: ''
  triggers:
  - trigger: time
    at: '11:30:00'
  conditions:
  - condition: state
    entity_id: light.werkkamer_helmer_lego_lamp
    state: 'on'
  actions:
  - action: assist_satellite.start_conversation
    metadata: {}
    data:
      preannounce: true
      start_message: De LEGO lamp in de werkkamer staat nog aan, zal ik hem voor je
        uit zetten?
      extra_system_prompt: De lego lamp in de werkkamer van Helmer staat nog aan na
        de reguliere werktijden. Mocht er een antwoord komen dat de lamp uitgezet
        mag worden, schakel dan de LEGO lamp uit.
    target:
      entity_id: assist_satellite.home_assistant_voice_woonkamer_assist_satellite
  mode: single
- id: '1743797410941'
  alias: Woonkamer - Apple TV start Afspelen - Movie Night UIT? Vraag of Movie Night
    AAN moet?
  description: Als de AppleTV gaat afspelen en Movie Night staat uit, vraag dan of
    Movie Night ingeschakeld moet worden?
  triggers:
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: ATV-PLAY-long
    enabled: false
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-STOPPLAY
    from: playing
    trigger: state
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-on
    to: 'on'
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-off
    to: 'off'
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.wbd.hbomax
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.amazon.aiv.AIVApp
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.skyshowtime.skyshowtime
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
    enabled: false
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'off'
    enabled: true
  - condition: state
    entity_id: input_boolean.ai_voice_woonkamer
    state: 'on'
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - action: assist_satellite.start_conversation
    metadata: {}
    data:
      start_message: 'Zal ik Movie Night voor je starten? '
      preannounce: true
      extra_system_prompt: Movie Night zorgt ervoor dat de lampen dimmen in de woonkamer
        tijdens het kijken van films. Mocht hier bevestigens om geantwoord worden,
        schakel Movie Time dan in. Dit doe je door Movie Night v2.1 in te schakelen.
        Als er geen antwoord komt laat je Movie Night staan in de stand waarop deze
        stond.
    target:
      entity_id: assist_satellite.home_assistant_voice_woonkamer_assist_satellite
  mode: single
- id: '1743804659605'
  alias: New automation
  description: Als de AppleTV gaat afspelen, Movie Night AAN? Dan lampen dimmen (als
    ze aan staan).
  triggers:
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: ATV-PLAY-long
    enabled: false
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-STOPPLAY
    from: playing
    trigger: state
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-on
    to: 'on'
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-off
    to: 'off'
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.wbd.hbomax
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.amazon.aiv.AIVApp
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.skyshowtime.skyshowtime
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'on'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: ATV-PLAY-short
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - ATV-STOPPLAY
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-on
      - condition: state
        entity_id: media_player.woonkamer_appletv
        state: playing
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-off
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
  mode: single
- id: '1743804665764'
  alias: New automation
  description: Als de AppleTV gaat afspelen, Movie Night AAN? Dan lampen dimmen (als
    ze aan staan).
  triggers:
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-PLAY-short
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    to: playing
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: ATV-PLAY-long
    enabled: false
    trigger: state
  - entity_id:
    - media_player.woonkamer_appletv
    for:
      hours: 0
      minutes: 0
      seconds: 0
    id: ATV-STOPPLAY
    from: playing
    trigger: state
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-on
    to: 'on'
  - trigger: state
    entity_id:
    - input_boolean.movie_night
    id: movie-night-off
    to: 'off'
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.plexapp.plex
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.apple.TVWatchList
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.netflix.Netflix
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.wbd.hbomax
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.amazon.aiv.AIVApp
      enabled: true
    - condition: state
      entity_id: media_player.woonkamer_appletv
      attribute: app_id
      state: com.skyshowtime.skyshowtime
      enabled: true
  - condition: sun
    before: sunrise
    after: sunset
  - condition: state
    entity_id: input_boolean.movie_night
    state: 'on'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: ATV-PLAY-short
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - ATV-STOPPLAY
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-on
      - condition: state
        entity_id: media_player.woonkamer_appletv
        state: playing
      sequence:
      - data: {}
        target:
          entity_id: scene.woonkamer_standaard_movie_night
        action: hue.activate_scene
    - conditions:
      - condition: trigger
        id:
        - movie-night-off
      sequence:
      - data: {}
        target:
          entity_id:
          - scene.woonkamer_standaard_standaard
        action: hue.activate_scene
  mode: single
- id: '1744306140264'
  alias: Notificatie - Replacement Countdown - Wasbeurt Badesofa
  description: Automation draait zodra de sensor.badesofa_wasbeurt < 1 (dag) wordt.
    Als het goed is draait hij dan elke dag, zodra de sensor z'n waarde voor ongeveer
    9:00 heeft, dus om 9:00 's ochtends. Tijdens vakantieperiode's doet hij niets.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: numeric_state_below
      trigger_state_entity: []
      trigger_numeric_entity:
      - sensor.badesofa_wasbeurt
      below_state: 2
      time_delay_state:
        hours: 0
        minutes: 0
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: "\U0001F4E2 Badesofa"
      notify_message: Badesofa moet gewassen worden.
      notify_interruption_level: passive
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: '10:00:00'
      before_time: '22:00:00'
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_custom_actions: enable_custom_actions
      custom_actions:
      - action: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.badesofe_tigger_wassen
- id: '1744307038235'
  alias: Notificatie - Replacement Countdown - Bora Filter
  description: Automation draait zodra de sensor.bora_filter_vervangen < 7 (dag) wordt.
    Als het goed is draait hij dan elke dag, zodra de sensor z'n waarde voor ongeveer
    9:00 heeft, dus om 9:00 's ochtends. Tijdens vakantieperiode's doet hij niets.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: numeric_state_below
      trigger_state_entity: []
      trigger_numeric_entity:
      - sensor.bora_filter_vervangen
      below_state: 5
      time_delay_state:
        hours: 9
        minutes: 0
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: "\U0001F4E2 Bora Filter"
      notify_message: Het filter van de Bora moet vervangen worden.
      notify_interruption_level: passive
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: '10:00:00'
      before_time: '22:00:00'
      global_conditions:
      - condition: state
        entity_id: switch.presence_simulation
        state: 'off'
- id: '1752264326242'
  alias: 'Navimow x315: Get state'
  triggers:
  - minutes: /5
    trigger: time_pattern
  - event: start
    trigger: homeassistant
  conditions:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: -15
    enabled: false
  actions:
  - data:
      command:
      - What is Navimow battery level
      - What is Navimow doing
    response_variable: result
    action: google_assistant_sdk_custom.send_text_command
  - target:
      entity_id: input_text.navimow_battery_level
    data:
      value: '{{ result.responses[0].text | regex_replace(find=''.*?([0-9]+) percent.*'',
        replace=''\\1'', ignorecase=True) }}'
    action: input_text.set_value
  - target:
      entity_id: input_text.navimow_status
    data:
      value: '{{ result.responses[1].text | regex_replace(find=''.*Navimow (.*?)\\.'',
        replace=''\\1'', ignorecase=True) }}'
    action: input_text.set_value
  mode: restart
- id: '1753175793796'
  alias: 'Schedule: Automatically update ESPHome Devices'
  description: Automatically update ESPHome Devices at midnight, and notify when they
    are updated.
  triggers:
  - at: '11:00:00'
    id: update_check
    trigger: time
  - at: '13:00:00'
    id: update_check
    trigger: time
  - at: '15:00:00'
    id: update_check
    trigger: time
  - at: '17:00:00'
    id: update_check
    trigger: time
  - at: '19:00:00'
    id: update_check
    trigger: time
  - alias: When all devices are updated
    value_template: "{% set entities = states.update | \n    selectattr('state', 'eq',
      'on') |\n    map(attribute='entity_id') | \n    select('in', integration_entities('esphome'))
      |\n    list | count\n%} \n\n{{ entities == 0 }}"
    trigger: template
    id: update_done
  - event_type: timer.finished
    event_data:
      entity_id: timer.esphome_updates_timer
    id: esphome_timer_updates_finished
    trigger: event
  - trigger: template
    value_template: '{{ integration_entities(''esphome'') | select(''match'', ''^update.'')
      | select(''is_state'', ''on'') | list | count > 0 }}'
    id: update_check
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: update_check
      - condition: template
        value_template: "{% set entities = states.update | \n    selectattr('state',
          'eq', 'on') |\n    map(attribute='entity_id') | \n    select('in', integration_entities('esphome'))
          |\n    list | count\n%} \n\n{{ entities > 0 }}"
        alias: Confirm something needs to be updated still
      sequence:
      - data:
          duration: 0
        action: timer.start
        target:
          entity_id: timer.esphome_updates_timer
        enabled: false
      - action: notify.mobile_app_just_a_phone_max
        data:
          message: "{% set entities = states.update | \n  selectattr('state', 'eq',
            'on') |\n  map(attribute='entity_id') | \n  select('in', integration_entities('esphome'))
            |\n  list | count\n%} {%\n  set entity = states.update |                      \n
            \ selectattr('state', 'eq', 'on') \n    | map(attribute='entity_id')\n
            \   | select('in', integration_entities('esphome'))\n    | first %}                   \n
            \ {{entities}} the ESPHome devices will now be updated from {{                \n
            \ state_attr(entity, \"installed_version\")  }} to {{                \n
            \ state_attr(entity, \"latest_version\")  }}."
      - action: script.update_all_esphome_devices
        metadata: {}
        data: {}
        enabled: false
      - action: script.automatically_update_esp_devices
        metadata: {}
        data: {}
    - conditions:
      - condition: trigger
        id:
        - update_done
      - condition: template
        value_template: "{% set entities = states.update | \n    selectattr('state',
          'eq', 'on') |\n    map(attribute='entity_id') | \n    select('in', integration_entities('esphome'))
          |\n    list | count\n%} \n\n{{ entities == 0 }}"
        alias: Confirm all are updated
      sequence:
      - data: {}
        target:
          entity_id: timer.esphome_updates_timer
        action: timer.cancel
      - action: notify.mobile_app_just_a_phone_max
        data:
          message: "{% set entity = states.update \n  | selectattr('state', 'eq',
            'on')          \n  | map(attribute='entity_id')         \n  | select('in',
            integration_entities('esphome'))       | first %}                          \n
            \ \nAll ESPHome devices are updated to {{state_attr(entity, \"latest_version\")
            \ }}."
    - conditions:
      - condition: trigger
        id: esphome_timer_updates_finished
      sequence:
      - action: notify.mobile_app_just_a_phone_max
        data: {}
  mode: single
- id: '1754041402735'
  alias: Wasmachine v5.0 - START PROGRAMMA
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  triggers:
  - entity_id:
    - sensor.bijkeuken_wasmachine_status2
    to: running
    trigger: state
    enabled: true
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.wasmachine_v4_started
    action: input_datetime.set_datetime
  - data:
      datetime: '{{ (now().timestamp() + states(''input_number.wasmachine_v4_expected_runtime'')
        | float(0)) | timestamp_local() }}'
    target:
      entity_id: input_datetime.wasmachine_v4_expected_time_to_stop
    action: input_datetime.set_datetime
  - target:
      entity_id: input_select.status_wasmachine_v4
    data:
      option: running
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.wasmachine_v4_ready
    action: input_boolean.turn_off
  mode: single
- id: '1754041583939'
  alias: Wasmachine v5.0 - STOP PROGRAMMA
  description: Track de start en eindtijd van een wasbeurt en hou de totale tijd bij.
    Aan het einde van de wasbeurt stuur een notificatie.
  triggers:
  - trigger: state
    entity_id:
    - sensor.bijkeuken_wasmachine_status2
    to: program_ended
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now() }}'
    target:
      entity_id: input_datetime.wasmachine_v4_stopped
    action: input_datetime.set_datetime
  - data:
      value: '{{ (as_timestamp(states(''input_datetime.wasmachine_v4_stopped'')) -
        as_timestamp(states(''input_datetime.wasmachine_v4_started''))) | float(0)
        }}'
    target:
      entity_id: input_number.wasmachine_v4_expected_runtime
    action: input_number.set_value
    enabled: false
  - data:
      option: completed
    target:
      entity_id: input_select.status_wasmachine_v4
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.wasmachine_v4_ready
    action: input_boolean.turn_on
  - data: {}
    action: script.wasmachine_notification_scheduler_v45
    enabled: false
  - data: {}
    target:
      entity_id: counter.wasmachine_v4_aantal_wasbeurten
    action: counter.increment
  mode: single
- id: '1754041835767'
  alias: Wasmachine v5.0 - 03 - LEEGGEHAALD
  description: Track het moment dat de wasmachinedeur wordt opgemaakt na een voltooide
    wasbeurt.
  triggers:
  - trigger: state
    entity_id:
    - sensor.bijkeuken_wasmachine_status
    to:
    - 'off'
  conditions:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  actions:
  - data:
      datetime: '{{ now()}}'
    target:
      entity_id: input_datetime.wasmachine_v4_last_emptied
    action: input_datetime.set_datetime
  - target:
      entity_id: input_select.status_wasmachine_v4
    data:
      option: idle
    action: input_select.select_option
  - data: {}
    target:
      entity_id: input_boolean.wasmachine_v4_ready
    action: input_boolean.turn_off
  - data:
      notify_phone: iphone_helmer
      message_phone_tag: Wasmachine_klaar
      message_phone_group: Wasmachine
    enabled: true
    action: script.notificatie_clear_iphone_v2
  mode: single
- id: '1754515321845'
  alias: AI camera analysis
  description: ''
  use_blueprint:
    path: balloob/ai-camera-analysis.yaml
    input:
      motion_entity: binary_sensor.deurbel_motion
      camera_target: camera.voordeurbel_high_resolution_channel
- id: '1756296136222'
  alias: Notificatie - Bosch 36V stekker is klaar met laden
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state_entity:
      - input_select.status_bosch_36v_oplader
      global_conditions:
      - condition: state
        entity_id: input_select.status_bosch_36v_oplader
        state: laden_gereed
        for:
          hours: 0
          minutes: 1
          seconds: 0
      include_notify: disable_mobile_app_notify
      notify_device:
      - aacae55e3b88640ea251aff7b6f5bca9
      notify_title: "\U0001F4E2 Bosch Gereedschap Oplader"
      notify_data: []
      notify_interruption_level: passive
      notify_message: Het gereedschap is klaar met opladen.
      include_tts_announcement: enable_tts_announcement
      text_to_speech_engine: tts.home_assistant_cloud
      media_player:
      - media_player.werkkamer_helmer_sonos_v2
      - media_player.woonkamer_sonos
      - media_player.keuken_sonos
      notify_tts_message: Het gereedschap is klaar met opladen.
      include_custom_actions: enable_custom_actions
      custom_actions:
      - action: script.notificatie_iphone_v7
        metadata: {}
        data:
          media_player_entity: media_player.woonkamer_sonos
          ruimte: woonkamer
          notify_tv: lg_tv_woonkamer_c4
          message_tts_volume: 0.15
          message_tts_body: Het gereedschap is klaar met opladen.
          message_tv_body: Het gereedschap is klaar met opladen.
          message_tts_priority: false
          notify_phone: iphone_helmer
          message_phone_body: Het gereedschap is klaar met opladen.
          message_phone_title: "\U0001F4E2 Bosch Gereedschap Oplader"
          message_phone_tag: bosch_gereedschap_gereed
          message_phone_group: bosch_gereedschap
          message_phone_persistent: true
          action_phone_action_enabled: one
          action_1_phone_single: BOSCH_GEREEDSCHAP_LADER_UIT
          action_1_phone_activationmode: background
          action_1_phone_icon: sfsymbols:bicycle
          action_1_phone_destructive: false
          action_1_phone_title: Stekker Uitschakelen
- id: '1756296571255'
  alias: iOS Action - Bosch Gereedschap Oplader UIT
  description: Als de Bosch Gereedschap oplader klaar is, de stekker uitschakelen.
  triggers:
  - event_type: ios.notification_action_fired
    event_data:
      actionName: BOSCH_GEREEDSCHAP_LADER_UIT
    id: GEREEDSCHAP_LADER_UIT
    trigger: event
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - GEREEDSCHAP_LADER_UIT
      sequence:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.bosch_36v_oplader
  mode: single
- id: '1756297731378'
  alias: Notificatie - Bosch Gereedschap Oplader is uitgeshakeld.
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state_entity:
      - switch.bosch_36v_oplader
      global_conditions:
      - condition: state
        entity_id: switch.bosch_36v_oplader
        state: 'off'
        for:
          hours: 0
          minutes: 0
          seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F4E2 Bosch Gereedschap Oplader"
      notify_data: []
      notify_interruption_level: passive
      notify_message: De Bosch oplader is uitgeschakeld.
      include_tts_announcement: enable_tts_announcement
      text_to_speech_engine: tts.home_assistant_cloud
      media_player:
      - media_player.werkkamer_helmer_music_assistant
      notify_tts_message: Het gereedschap is klaar met opladen.
      include_custom_actions: enable_custom_actions
      custom_actions: []
- id: '1756547944470'
  alias: Dashboard Woonkamer - Scherm UIT (Beweging)
  description: ''
  triggers:
  - trigger: time
    at: input_datetime.dashboard_time_screen_off
    enabled: true
  - trigger: state
    entity_id:
    - binary_sensor.woonkamer_mmwave_plafond_hal_presence
    to: 'off'
    for:
      hours: 0
      minutes: 30
      seconds: 0
    enabled: false
  conditions: []
  actions:
  - data: {}
    enabled: true
    action: switch.turn_off
    target:
      entity_id: switch.lenovo_tab_m10_3rd_gen_scherm
  mode: single
- id: '1756548486314'
  alias: Dashboard Woonkamer - Scherm AAN (Beweging)
  description: ''
  triggers:
  - trigger: time
    at: input_datetime.dashboard_time_screen_on
    enabled: true
  conditions: []
  actions:
  - data: {}
    target:
      entity_id:
      - switch.lenovo_tab_m10_3rd_gen_scherm
    enabled: true
    action: switch.turn_on
  - data: {}
    enabled: true
    action: switch.turn_off
    target:
      entity_id: switch.lenovo_tab_m10_3rd_gen_screensaver
  mode: single
- id: '1758128798805'
  alias: Aankondiging - StilteTijd
  description: Melding op TV tonen dat het bijna tijd is om tot rust te komen.
  triggers:
  - trigger: time
    at:
      entity_id: input_datetime.starttijd_schermstilte
      offset: -00:30:00
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
    id: StilteTijd_30min
  - trigger: time
    at: input_datetime.starttijd_schermstilte
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
    id: StilteTijd
  conditions:
  - condition: state
    entity_id: input_boolean.schermstilte
    state: 'on'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - StilteTijd_30min
      sequence:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            message: StilteTijd begint over 30 minuten.
            title: Oven
          enabled: true
    - conditions:
      - condition: trigger
        id:
        - StilteTijd
      sequence:
      - if:
        - condition: device
          device_id: 3216a1bd20b00f4a1510ef1c2193fa02
          domain: media_player
          entity_id: 6035f5d24d611b03be74b17b0d6b0f47
          type: is_on
        then:
        - action: notify.tv_woonkamer
          metadata: {}
          data:
            title: Oven
            message: StilteTijd begint nu.
          enabled: true
      - action: input_button.press
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_button.notificatie_schermstilte
  mode: single
- id: '1758131490120'
  alias: Notificatie - Tijd voor SchermStilte (Sonos)
  description: ''
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      include_notify: enable_mobile_app_notify
      notify_message: Het is tijd om de schermen weg te leggen en te genieten van
        de rust.
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - 6041546c73f21f3bf79077a4be265614
      notify_title: "\U0001F971 StilteTijd Actief"
      trigger_state_entity:
      - input_button.notificatie_schermstilte
      trigger_state: button_any_state
      below_state: 0
      notify_interruption_level: critical
      include_custom_actions: disable_custom_actions
      custom_actions: []
      global_conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.keuken_combi_stoomoven_status
          state: program_ended
          enabled: false
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: conventional_heat
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '334'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: fan_plus
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programma
            state: '99'
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7938'
          - condition: state
            entity_id: sensor.keuken_combi_stoomoven_programmafase
            state: '7942'
            enabled: true
      - condition: state
        entity_id: input_boolean.notificatie_kritische_meldingen_voor_regina
        state: 'on'
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '23:00:00'
      include_tts_announcement: enable_tts_announcement
      text_to_speech_engine: tts.home_assistant_cloud
      media_player:
      - media_player.woonkamer_sonos
      notify_tts_message: Het is tijd voor PixelPauze!
- id: '1759568355454'
  alias: Notificatie - Bosch 36V Oplader
  description: ''
  use_blueprint:
    path: Blackshome/battery-charger-notifications.yaml
    input:
      charger_switch: switch.bosch_36v_oplader
      trigger_options:
      - entity_trigger_enabled
      entity_trigger: input_boolean.bosch_36v_oplader_actief
      running_dead_zone: 5
      power_sensor: sensor.bosch_36v_oplader_power
      include_start_notify: enable_start_notify_options
      start_notify_device:
      - 7ad1224c50a5407fced9f97fa92b60fb
      start_title: Bosch Gereedschap Oplader
      start_message: De batterij is aan het opladen.
      start_notify_interruption_level: passive
      start_notify_tag: bosch_oplader
      include_end_notify: enable_end_notify_options
      end_notify_device:
      - 7ad1224c50a5407fced9f97fa92b60fb
      end_message_title: Bosch Gereedschap Oplader
      end_message: De batterij is volledig opgeladen.
      end_notify_tag: bosch_oplader
      end_notify_interruption_level: passive
      end_reminder_notification: enable_reminder_notification
      end_reminder_notification_entity: switch.bosch_36v_oplader
      end_reminder_notification_message: De batterij is opgeladen, schakel de oplader
        uit.
      end_attended_notification_message: De batterij is opgeladen en de oplader staat
        weer uit.
      end_reminder_notification_time_delay: 10
      include_time: time_enabled
      after_time: '10:00:00'
      before_time: '22:00:00'
      include_power_tracking: enable_power_tracking
      power_consumption_sensor: sensor.bosch_36v_oplader_energy
      end_message_kwh: Verbruik
      include_entity_off_end_option: entity_off_enabled
      entity_off_end:
      - switch.bosch_36v_oplader
      entity_off_end_time_delay: 60
      start_power_consumption: input_number.bosch_36v_oplader_start_energy
      end_power_consumption: input_number.bosch_36v_oplader_stop_energy
      include_custom_actions:
      - enable_start_custom_actions
      - enable_end_custom_actions
      start_custom_actions:
      - action: input_select.select_option
        metadata: {}
        data:
          option: opladen
        target:
          entity_id: input_select.status_bosch_36v_oplader
      end_custom_actions:
      - action: input_select.select_option
        metadata: {}
        data:
          option: laden_gereed
        target:
          entity_id: input_select.status_bosch_36v_oplader
      end_appliance_power: 3
- id: '1759579482956'
  alias: Check Status - BadeSofa is nog niet gewassen
  description: Check of de BadeSofa na afloop van de counter nog niet is gewassen.
    Doe dit elke dag en voer dan taak uit.
  triggers:
  - trigger: time_pattern
    hours: /9
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.badesofe_tigger_wassen
      state: 'on'
    - condition: numeric_state
      entity_id: sensor.badesofa_wasbeurt
      below: -1
  actions:
  - action: input_button.press
    metadata: {}
    data: {}
    target:
      entity_id: input_button.notificatie_trigger_badesofa_wassen
  mode: single
- id: '1759579688275'
  alias: Notificatie - BadeSofa moet nog steeds gewassen worden.
  description: Automation draait zodra de sensor.badesofa_wasbeurt < 1 (dag) wordt.
    Als het goed is draait hij dan elke dag, zodra de sensor z'n waarde voor ongeveer
    9:00 heeft, dus om 9:00 's ochtends. Tijdens vakantieperiode's doet hij niets.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: button_any_state
      trigger_state_entity:
      - input_button.notificatie_trigger_badesofa_wassen
      trigger_numeric_entity:
      - sensor.badesofa_wasbeurt
      below_state: 2
      time_delay_state:
        hours: 0
        minutes: 0
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - 7ad1224c50a5407fced9f97fa92b60fb
      notify_title: "\U0001F4E2 Badesofa"
      notify_message: Badesofa moet gewassen worden.
      notify_interruption_level: passive
      include_notify_zone: zone_disabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 08:00:00
      before_time: '22:00:00'
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_custom_actions: enable_custom_actions
      custom_actions:
      - action: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.badesofe_tigger_wassen
      notify_tag: badesofa
- id: '1759662179815'
  alias: Notificatie - Batterijen bijna leeg check
  description: ''
  use_blueprint:
    path: Blackshome/low-battery-notifications-and-actions.yaml
    input:
      include_time: time_enabled
      time: '15:00:00'
      exclude_sensors:
        entity_id:
        - sensor.just_a_phone_max_17_battery_level
        - sensor.great_scott_battery_level
        - sensor.great_scott_battery_level_2
        label_id: batterij_2
      include_easy_notify: enable_easy_notify
      include_persistent_notification: enable_persistent_notification
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: Lege Batterijen
      notify_okay_message: Geen lege batterijen te zien.
      notify_tag: batterij_leeg
      notify_interruption_level: active
      notify_action_buttons: enable_to_do_list_button_and_confirmation
      to_do_list: todo.helmer_todo_home_assistant
      to_do_task_title: Vervang de volgende batterijen
      exclude_hidden_entities: hidden_enabled
      sensor_selection: enable_all_sensors
      notify_message: sensors
- &id001
  id: lawn_mower_update
  alias: 'Navimow x315: Get state v2'
  description: 'Notes:

    * Google Assistant API rate limit: 500 requests per 24 hours (seems to reset at
    7:00am UTC).

    * Quota status: https://console.cloud.google.com/apis/api/embeddedassistant.googleapis.com/quotas?...'
  triggers:
  - trigger: time_pattern
    minutes: /5
  - trigger: homeassistant
    event: start
  conditions:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: -15
  actions:
  - action: google_assistant_sdk_custom.send_text_command
    metadata: {}
    data:
      command:
      - what is Schaap X 315 battery level
      - what is Schaap X 315 doing
    response_variable: result
  - variables:
      is_available: "{{ result is defined and result.responses is defined and (result.responses
        | count) >= 2\n    and (result.responses[0].text | default('')) != '' and
        (result.responses[1].text | default('')) != '' }}"
      battery_text: '{{ result.responses[0].text | default('''') }}'
      status_text: '{{ result.responses[1].text | default('''') }}'
      s: '{{ status_text | lower | replace("''", "''") }}'
      activity: "{# errors first #} {% if s is search('lost|error|fault|alarm|stuck|blocked|obstacle|outside|disconnected|offline',
        ignorecase=True) %}\n  error\n{# paused #} {% elif s is search(\"\\\\bpause(?:d|ing|s)?\\\\b\",
        ignorecase=True) %}\n  paused\n{# explicitly \"isn't/is not/not running\"
        → docked #} {% elif s is search(\"\\\\bisn['']?t\\\\s+running\\\\b|\\\\bis\\\\s+not\\\\s+running\\\\b|\\\\bnot\\\\s+running\\\\b\",
        ignorecase=True) %}\n  docked\n{# docked keywords #} {% elif s is search(\"\\\\b(charging|charge|base|home|station)\\\\b\",
        ignorecase=True) %}\n  docked\n{# \"is running\" / running #} {% elif s is
        search(\"\\\\bis\\\\s+running\\\\b|\\\\brunning\\\\b\", ignorecase=True) %}\n
        \ mowing\n{# mowing keywords #} {% elif s is search(\"\\\\b(mow|cut|working|in\\\\s*progress)\\\\b\",
        ignorecase=True) %}\n  mowing\n{% else %}\n  docked\n{% endif %}"
      battery: "{% if battery_text is search('([0-9]{1,3})\\\\s?(?:percent|%)', ignorecase=True)
        %}\n  {{ battery_text | regex_replace(find='.*?([0-9]{1,3})\\\\s?(?:percent|%).*',
        replace='\\\\1', ignorecase=True) | int }}\n{% else %}\n  0\n{% endif %}"
  - if:
    - condition: template
      value_template: '{{ is_available }}'
    then:
    - data:
        topic: mower/navimow_x315/availability
        payload: online
        retain: true
      action: mqtt.publish
    - data:
        topic: mower/navimow_x315/state
        payload: "{{ {\n  \"activity\": activity,\n  \"battery\": battery,\n  \"status_text\":
          status_text,\n  \"battery_text\": battery_text\n} | tojson }}\n"
        retain: true
      action: mqtt.publish
    else:
    - data:
        topic: mower/navimow_x315/availability
        payload: offline
        retain: true
      action: mqtt.publish
  initial_state: 'on'
  mode: restart
- *id001
- *id001
- *id001
- *id001
- *id001
- *id001
- &id002
  id: navimow_x315_cmd_handler
  alias: 'Navimow x315: Command handler (MQTT → Google SDK)'
  description: ''
  triggers:
  - topic: mower/navimow_x315e/cmd
    trigger: mqtt
  actions:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ action == ''start'' }}'
      sequence:
      - data:
          command:
          - start mowing with Schaap X 315
          - Schaap X 315 start mowing
        action: google_assistant_sdk_custom.send_text_command
    - conditions:
      - condition: template
        value_template: '{{ action == ''pause'' }}'
      sequence:
      - data:
          command:
          - pause Schaap X 315
          - Schaap X 315 pause
        action: google_assistant_sdk_custom.send_text_command
    - conditions:
      - condition: template
        value_template: '{{ action == ''dock'' }}'
      sequence:
      - data:
          command:
          - return Schaap X 315 to the dock
          - Schaap X 315 go to base
        action: google_assistant_sdk_custom.send_text_command
  mode: single
  variables:
    action: '{{ trigger.payload_json.action | default('''') }}'
- *id002
- id: '1760537495263'
  alias: AI - Samenvatting Weer in Tekst Variabele
  description: ''
  triggers:
  - trigger: time_pattern
    minutes: '0'
    seconds: '0'
  conditions: []
  actions:
  - action: weather.get_forecasts
    metadata: {}
    data:
      type: hourly
    target:
      entity_id: weather.forecast_home
    response_variable: weather
  - action: ai_task.generate_data
    metadata: {}
    data:
      task_name: Weather Summary
      instructions: 'Het is nu {{now}}

        Dit is de weervoorspelling: {{weather}}

        Maak een zin waarin je de weersvoorspelling voor de rest van de dag samenvat.

        Maak het minder dan 150 tekens.'
      entity_id: ai_task.google_ai_task
      structure:
        sentence:
          selector:
            text:
    response_variable: ai
  - action: input_text.set_value
    metadata: {}
    data:
      value: '{{ai.data.sentence}}'
    target:
      entity_id: input_text.weer_samenvatting
  mode: single
- id: '1760970182115'
  alias: AI - Deurbel Motion - Pakket- of Boodschappenbezorger
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.g4_doorbell_pro_beweging
    to: 'on'
  - trigger: event
    event_type: status_change
    event_data:
      event_data:
        entity_id: event.g4_doorbell_pro_poe_doorbell
  conditions: []
  actions:
  - action: advanced_snapshot.take_snapshot
    metadata: {}
    data:
      setting_font_path: Arial.ttf
      setting_font_size: auto
      setting_font_color: black
      setting_bar_height: 7%
      setting_bar_color: white
      setting_bar_position: bottom
      crop_aspect_ratio: '16:9'
      camera_entity_id: camera.g4_doorbell_pro_high_resolution_channel
      file_path_backup: '{{ now().strftime(''%y%m%d'')}}-delivery_voordeur_deurbel.jpg'
      file_path: '{{ now().strftime(''%y%m%d'')}}-delivery_voordeur_deurbel.jpg'
      add_bar: true
      custom_text_left: Deurbel
      custom_text_middle: '{{ states(''sensor.weerstation_achtertuin_temperature'')
        }} °C'
      custom_text_right: '{{ now().strftime(''%d-%m-%y %H:%M:%S'') }}'
    enabled: true
  - action: ai_task.generate_data
    metadata: {}
    data:
      task_name: Deurbelomschrijving
      instructions: "Er staat iemand bij de voordeur.\n\nInstructies:\n- Omschrijf
        het voertuig wat in beeld staat, kijk goed naar eventuele herkenbare logo's
        zoals Albert Heijn, Jumbo Supermarkt, PostNL, UPS, DPD of DHL. Let ook op
        de kleur van het voortuig. Als je een van de logo's herkend, vermeld dan ook
        de naam van het bedrijf. Gebruik voor je antwoord altijd minder dan 150 characters.\n-
        negeer het aantal personen of dieren in de afbeelding, focus je puur op het
        bestelbusje of vrachtwagentje in beeld.\n- als er geen bestelbusje of vrachtwagen
        in beeld is, geef dat dan ook aan in je antwoord.\n\nAls je twijfeld over
        informatie, laat deze informatie dan achterwege. Kentekens alleen benoemen
        als je 100% zeker bent. \n\n- benoem het bezorgbedrijf"
      entity_id: ai_task.google_ai_task
      structure:
        summary:
          description: Omschrijving van het bezorgvoertuig en de naam van het bezorgbedrijf.
          selector:
            text:
        delivery_company:
          description: Naam van het bezorgbedrijf
          selector:
            text:
      attachments:
        media_content_id: media-source://camera/camera.g4_doorbell_pro_high_resolution_channel
        media_content_type: application/vnd.apple.mpegurl
        metadata:
          title: Camer Voordeurbel High resolution channel
          thumbnail: /api/camera_proxy/camera.g4_doorbell_pro_high_resolution_channel
          media_class: video
          children_media_class:
          navigateIds:
          - {}
          - media_content_type: app
            media_content_id: media-source://camera
    response_variable: ai
  - action: input_text.set_value
    metadata: {}
    data:
      value: '{{ai.data.summary}}'
    target:
      entity_id: input_text.ai_deurbel_delivery_summary
  - action: input_text.set_value
    metadata: {}
    data:
      value: '{{ai.data.delivery_company}}'
    target:
      entity_id: input_text.ai_deurbel_delivery_company
  - if:
    - condition: template
      value_template: '{{ states(''input_text.ai_deurbel_delivery_company'') not in
        [''unknown'', ''unavailable'', ''onbekend'', ''Onbekend'', ''Geen'',''geen'',
        '''', none] and states(''input_text.ai_deurbel_delivery_company'') | length
        > 1 }}'
    then:
    - if:
      - condition: state
        entity_id: input_boolean.ai_notification_deurbel_delivery
        state: 'on'
      then:
      - action: notify.mobile_app_just_a_phone_max
        metadata: {}
        data:
          message: '{{ai.data.summary}}'
          title: Deurbel bezorger ({{ai.delivery_company}})
          data:
            tag: ai_deurbel_bezorger
            image: /local/snapshots/{{ now().strftime('%y%m%d')}}-delivery_voordeur_deurbel.jpg
  mode: single
- id: '1762606029965'
  alias: 'Notificatie - Replacement Countdown - Batterij Yale Kluis '
  description: Automation draait zodra de sensor.replacement_batterijen_yale_kluis_vervangen
    < 1 (dag) wordt. Als het goed is draait hij dan elke dag, zodra de sensor z'n
    waarde voor ongeveer 9:00 heeft, dus om 9:00 's ochtends. Tijdens vakantieperiode's
    doet hij niets.
  use_blueprint:
    path: Blackshome/notifications-and-announcements.yaml
    input:
      trigger_state: numeric_state_below
      trigger_state_entity: []
      trigger_numeric_entity:
      - input_datetime.replacement_batterijen_yale_kluis_vervangen
      below_state: 2
      time_delay_state:
        hours: 0
        minutes: 0
        seconds: 0
      include_notify: enable_mobile_app_notify
      notify_device:
      - 9bc445709b8101c5e31520b3e1d72f05
      - 7ad1224c50a5407fced9f97fa92b60fb
      notify_title: "\U0001F4E2 Yale Kluis"
      notify_message: Batterijen van de Yale Kluis moeten worden vervangen.
      notify_interruption_level: passive
      include_notify_zone: zone_enabled
      notify_zone: zone.home
      include_time: time_enabled
      after_time: 09:00:00
      before_time: '22:00:00'
      global_conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      include_custom_actions: enable_custom_actions
      custom_actions:
      - action: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.badesofe_tigger_wassen
        enabled: false
- id: '1762782455789'
  alias: SmartStart - Wasmachine Starttijd aanpassen op basis van selectie
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.smartstart_wasmachine
  - trigger: time_pattern
    minutes: /15
  - trigger: time
    at: input_datetime.solarsmart_wasmachine_starttijd
    id: SolarStart-Wasmachine
  - trigger: time
    at: input_datetime.solarsmart_wasmachine_starttijd
    id: SolarStart-Wasmachine
  - trigger: time
    at: input_datetime.handmatig_wasmachine_starttijd
    id: HandmatigStart-Wasmachine
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
  conditions: []
  actions:
  - if:
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - SolarSmart
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.solarsmart_wasmachine_starttijd
        - input_datetime.smartstart_wasmachine_starttijd
      data:
        datetime: '{{ as_datetime(states(''sensor.solar_production_forecast_westzijde_highest_peak_time_today'')).astimezone(now().tzinfo).strftime(''%Y-%m-%d
          %H:%M:%S'') }}

          '
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id:
        - input_datetime.dynamisch_wasmachine_starttijd
        - input_datetime.handmatig_wasmachine_starttijd
  - if:
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - Dynamisch
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_wasmachine_starttijd
        - input_datetime.smartstart_wasmachine_starttijd
      data:
        datetime: '{{ as_datetime(states(''sensor.steenwijk_time_of_lowest_price'')).astimezone(now().tzinfo).strftime(''%Y-%m-%d
          %H:%M:%S'') }}'
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id:
        - input_datetime.solarsmart_wasmachine_starttijd
        - input_datetime.handmatig_wasmachine_starttijd
  - if:
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - Handmatig
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_wasmachine_starttijd
        - input_datetime.smartstart_wasmachine_starttijd
      data:
        time: 00:00:00
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id: input_datetime.solarsmart_wasmachine_starttijd
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.smartstart_wasmachine_starttijd
        - input_datetime.handmatig_wasmachine_starttijd
      data:
        datetime: '{{ states(''input_datetime.handmatig_wasmachine_starttijd'') }}'
  - if:
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - unavailable
      - unknown
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_wasmachine_starttijd
        - input_datetime.smartstart_wasmachine_starttijd
        - input_datetime.handmatig_wasmachine_starttijd
      data:
        time: 00:00:00
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id: input_datetime.solarsmart_wasmachine_starttijd
  - if:
    - condition: trigger
      id:
      - SolarStart
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - SolarSmart
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id: button.bijkeuken_wasmachine_start
  - if:
    - condition: trigger
      id:
      - DynamischStart
    - condition: state
      entity_id: input_select.smartstart_wasmachine
      state:
      - Dynamisch
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id: button.bijkeuken_wasmachine_start
  mode: single
- id: '1763812117690'
  alias: Nacht - Kerstverlichting UIT
  description: 'Kerstverlichting uitschakelen '
  triggers:
  - at: 01:15:00
    trigger: time
  conditions: []
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      label_id: kerstverlichting_s_nachts_uitschakelen
  mode: single
- id: '1764944066064'
  alias: Nacht - Verlichting Overkappingen Uit
  description: Verlichting Overkappingen uitschakelen
  triggers:
  - at: '23:30:00'
    trigger: time
  conditions: []
  actions:
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      entity_id:
      - scene.alle_overkappingen_nachtlampje
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      label_id: tuinverlichting_uit_s_nachts
  mode: single
- id: '1765402930733'
  alias: SmartStart - Afwasmachine Starttijd aanpassen op basis van selectie v2
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.smartstart_afwasmachine
  - trigger: time_pattern
    minutes: /15
  - trigger: time
    at: input_datetime.solarsmart_afwasmachine_starttijd
    id: SolarStart-afwasmachine
  - trigger: time
    at: input_datetime.dynamisch_afwasmachine_starttijd
    id: Dynamischstart-afwasmachine
  - trigger: time
    at: input_datetime.handmatig_afwasmachine_starttijd
    id: HandmatigStart-afwasmachine
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
  conditions: []
  actions:
  - if:
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - SolarSmart
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.solarsmart_afwasmachine_starttijd
        - input_datetime.smartstart_afwasmachine_starttijd
      data:
        datetime: '{{ as_datetime(states(''sensor.solar_production_forecast_westzijde_highest_peak_time_today'')).astimezone(now().tzinfo).strftime(''%Y-%m-%d
          %H:%M:%S'') }}

          '
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id:
        - input_datetime.dynamisch_afwasmachine_starttijd
        - input_datetime.handmatig_afwasmachine_starttijd
  - if:
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - Dynamisch
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_afwasmachine_starttijd
        - input_datetime.smartstart_afwasmachine_starttijd
      data:
        datetime: '{{ as_datetime(states(''sensor.steenwijk_time_of_lowest_price'')).astimezone(now().tzinfo).strftime(''%Y-%m-%d
          %H:%M:%S'') }}'
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id:
        - input_datetime.solarsmart_afwasmachine_starttijd
        - input_datetime.handmatig_afwasmachine_starttijd
  - if:
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - Handmatig
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_afwasmachine_starttijd
        - input_datetime.smartstart_afwasmachine_starttijd
      data:
        time: 00:00:00
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id: input_datetime.solarsmart_afwasmachine_starttijd
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.smartstart_afwasmachine_starttijd
        - input_datetime.handmatig_afwasmachine_starttijd
      data:
        datetime: '{{ today_at(states(''input_datetime.handmatig_afwasmachine_starttijd''))
          }}'
  - if:
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - unavailable
      - unknown
    then:
    - action: input_datetime.set_datetime
      target:
        entity_id:
        - input_datetime.dynamisch_afwasmachine_starttijd
        - input_datetime.smartstart_afwasmachine_starttijd
        - input_datetime.handmatig_afwasmachine_starttijd
      data:
        time: 00:00:00
    - action: input_datetime.set_datetime
      data:
        time: 00:00:00
      target:
        entity_id: input_datetime.solarsmart_afwasmachine_starttijd
  - if:
    - condition: trigger
      id:
      - SolarStart
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - SolarSmart
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id: button.keuken_afwasmachine_starten
  - if:
    - condition: trigger
      id:
      - Dynamischstart-afwasmachine
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - Dynamisch
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id:
        - button.keuken_afwasmachine_starten
  - if:
    - condition: trigger
      id:
      - HandmatigStart-afwasmachine
    - condition: state
      entity_id: input_select.smartstart_afwasmachine
      state:
      - Handmatig
    then:
    - action: button.press
      metadata: {}
      data: {}
      target:
        entity_id: button.keuken_afwasmachine_starten
    enabled: false
  mode: single
- id: '1766587942447'
  alias: Miele Smart Appliances - List all entities Test
  description: ''
  use_blueprint:
    path: helmerzNL/miele_smart_appliance_entity_list.yaml
    input:
      include_persistent_notification: enable_persistent_notification
      persistent_title: "\U0001F4E2 Titel"
      persistent_message: Message
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
- id: '1766591529320'
  alias: Oven v3 - KLAAR!
  description: ''
  use_blueprint:
    path: helmerzNL/miele_smart_appliances_notifications.yaml
    input:
      appliance_info_device: f6fb015a1725ba36721a4a06e10b5379
      appliance_info_remaining_time: sensor.keuken_combi_stoomoven_resterende_tijd
      appliance_info_program: sensor.keuken_combi_stoomoven_programma
      appliance_info_program_phase: sensor.keuken_combi_stoomoven_programmafase
      trigger_device_state_entity: sensor.keuken_combi_stoomoven_status
      trigger_state_value: program_ended
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F4E2 Oven"
      notify_message: De oven is klaar!
      include_tv_notify: enable_tv_notify_options
      tv_notify_device:
      - 3216a1bd20b00f4a1510ef1c2193fa02
      notify_tv_title: Oven
      notify_tv_message: De oven is klaar!
      include_tts_announcement: enable_tts_announcement
      text_to_speech_engine: tts.home_assistant_cloud
      media_player:
      - media_player.werkkamer_helmer_sonos
      notify_tts_message: De oven is klaar.
- id: '1766655095454'
  alias: Wasmachine - KLAAR!
  description: ''
  use_blueprint:
    path: helmerzNL/miele_smart_appliances_notifications.yaml
    input:
      appliance_info_device: 33cb4073939f6ce81068bcc0ba2b2e2b
      trigger_device_state_entity: sensor.bijkeuken_wasmachine_status
      trigger_state_value: program_ended
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      notify_title: "\U0001F5D1️ Wasmachine"
      notify_message: De wasmachine is klaar.
      notify_sound: wasmachine
      notify_interruption_level: time-sensitive
      include_notify_zone: zone_disabled
      include_tv_notify: enable_tv_notify_options
      tv_notify_device:
      - 3216a1bd20b00f4a1510ef1c2193fa02
      notify_tv_title: Wasmachine
      notify_tv_message: De wasmachine is klaar
- id: '1766665782731'
  alias: Miele Smart Appliances Notifications BETA - TEST
  description: ''
  use_blueprint:
    path: helmerzNL/miele_smart_appliances_notifications_beta.yaml
    input:
      trigger_used: enable_appliance_program_phase_sensor
      include_notify: enable_mobile_app_notify
      notify_device:
      - b08939ed8278dae8f339c8694f032293
      appliance_info_device: f6fb015a1725ba36721a4a06e10b5379
      notify_title: "\U0001F4E2Oven"
      trigger_program_phase_value: heating_up_phase
      dummy_device_state_entity: input_boolean.blueprint_trigger_boolean
